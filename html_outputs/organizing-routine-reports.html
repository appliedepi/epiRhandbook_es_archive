<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>41 Organización de informes rutinarios | El manual de R para la Epidemiología</title>
<meta name="author" content="El equipo del manual">
<meta name="description" content="Esta página cubre el paquete reportfactory, que es un complemento para el uso de R Markdown para los informes. Este paquete facilita la ejecucion de reportes de rutina, especialmente la...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="41 Organización de informes rutinarios | El manual de R para la Epidemiología">
<meta property="og:type" content="book">
<meta property="og:description" content="Esta página cubre el paquete reportfactory, que es un complemento para el uso de R Markdown para los informes. Este paquete facilita la ejecucion de reportes de rutina, especialmente la...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="41 Organización de informes rutinarios | El manual de R para la Epidemiología">
<meta name="twitter:description" content="Esta página cubre el paquete reportfactory, que es un complemento para el uso de R Markdown para los informes. Este paquete facilita la ejecucion de reportes de rutina, especialmente la...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.20/datatables.js"></script><link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet">
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script><script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.7/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.10.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script><link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="libs/plotly-basic-2.5.1/plotly-basic-2.5.1.min.js"></script><script src="libs/plotly-cartesian-2.5.1/plotly-cartesian-2.5.1.min.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style_bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">El manual de R para la Epidemiología</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Buscar" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Tabla de contenidos</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">Acerca de este libro</li>
<li><a class="" href="editorial-and-technical-notes.html"><span class="header-section-number">1</span> Notas editoriales y técnicas</a></li>
<li><a class="" href="download-handbook-and-data.html"><span class="header-section-number">2</span> Descargando el manual y los datos</a></li>
<li class="book-part">Aspectos básicos</li>
<li><a class="" href="r-basics.html"><span class="header-section-number">3</span> Fundamentos de R</a></li>
<li><a class="" href="transition-to-r.html"><span class="header-section-number">4</span> Transición a R</a></li>
<li><a class="" href="suggested-packages-1.html"><span class="header-section-number">5</span> Paquetes recomendados</a></li>
<li><a class="" href="r-projects.html"><span class="header-section-number">6</span> Proyectos en R</a></li>
<li><a class="" href="import-and-export.html"><span class="header-section-number">7</span> Importación y exportación</a></li>
<li class="book-part">Gestión de datos</li>
<li><a class="" href="cleaning-data-and-core-functions.html"><span class="header-section-number">8</span> Limpieza de datos y funciones básicas</a></li>
<li><a class="" href="working-with-dates.html"><span class="header-section-number">9</span> Borrador. Trabajando con Fechas</a></li>
<li><a class="" href="characters-and-strings.html"><span class="header-section-number">10</span> Borrador. Caracteres y cadenas</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">11</span> Borrador. Factores</a></li>
<li><a class="" href="pivoting-data.html"><span class="header-section-number">12</span> Borrador. Pivotar datos</a></li>
<li><a class="" href="grouping-data.html"><span class="header-section-number">13</span> Borrador. Agrupar datos</a></li>
<li><a class="" href="joining-data.html"><span class="header-section-number">14</span> Borrador. Unir datos</a></li>
<li><a class="" href="de-duplication.html"><span class="header-section-number">15</span> Borrador. De-duplicación</a></li>
<li><a class="" href="iteration-loops-and-lists.html"><span class="header-section-number">16</span> Borrador. Iteración, bucles y listas</a></li>
<li class="book-part">Análisis</li>
<li><a class="" href="descriptive-tables.html"><span class="header-section-number">17</span> Borrador. Tablas descriptivas</a></li>
<li><a class="" href="simple-statistical-tests.html"><span class="header-section-number">18</span> Borrador. Tests estadísticos sencillos</a></li>
<li><a class="" href="univariate-and-multivariable-regression.html"><span class="header-section-number">19</span> Borrador. Regresión univariante y multivariable</a></li>
<li><a class="" href="missing-data.html"><span class="header-section-number">20</span> Borrador. Valores faltantes</a></li>
<li><a class="" href="standardised-rates.html"><span class="header-section-number">21</span> Borrador. Tasas estandarizadas</a></li>
<li><a class="" href="moving-averages.html"><span class="header-section-number">22</span> Borrador. Medias Móviles</a></li>
<li><a class="" href="time-series-and-outbreak-detection.html"><span class="header-section-number">23</span> Borrador. Series temporales y detección de brotes</a></li>
<li><a class="" href="epidemic-modeling.html"><span class="header-section-number">24</span> Borrador. Modelización de epidemias</a></li>
<li><a class="" href="contact-tracing-1.html"><span class="header-section-number">25</span> Borrador. Rastreo de contactos</a></li>
<li><a class="" href="survey-analysis.html"><span class="header-section-number">26</span> Borrador. Análisis de encuestas</a></li>
<li><a class="" href="survival-analysis.html"><span class="header-section-number">27</span> Borrador. Análisis de supervivencia</a></li>
<li><a class="" href="gis-basics.html"><span class="header-section-number">28</span> Conceptos básicos de los SIG</a></li>
<li class="book-part">Visualización de datos</li>
<li><a class="" href="tables-for-presentation.html"><span class="header-section-number">29</span> Borrador. Tablas para presentaciones</a></li>
<li><a class="" href="ggplot-basics.html"><span class="header-section-number">30</span> Conceptos básicos de ggplot</a></li>
<li><a class="" href="ggplot-tips.html"><span class="header-section-number">31</span> Consejos de ggplot</a></li>
<li><a class="" href="epidemic-curves.html"><span class="header-section-number">32</span> Curvas epidémicas</a></li>
<li><a class="" href="demographic-pyramids-and-likert-scales.html"><span class="header-section-number">33</span> Pirámides de población y escalas de Likert</a></li>
<li><a class="" href="heat-plots.html"><span class="header-section-number">34</span> Gráficos de calor</a></li>
<li><a class="" href="diagrams-and-charts.html"><span class="header-section-number">35</span> Diagramas y gráficos</a></li>
<li><a class="" href="combinations-analysis.html"><span class="header-section-number">36</span> Borrador. Análisis de combinaciones</a></li>
<li><a class="" href="transmission-chains.html"><span class="header-section-number">37</span> Borrador. Cadenas de transmisión</a></li>
<li><a class="" href="phylogenetic-trees-1.html"><span class="header-section-number">38</span> Árboles filogenéticos</a></li>
<li><a class="" href="interactive-plots.html"><span class="header-section-number">39</span> Gráficos interactivos</a></li>
<li class="book-part">Informes y Dashboards</li>
<li><a class="" href="reports-with-r-markdown.html"><span class="header-section-number">40</span> Informes con R Markdown</a></li>
<li><a class="active" href="organizing-routine-reports.html"><span class="header-section-number">41</span> Organización de informes rutinarios</a></li>
<li><a class="" href="dashboards-with-r-markdown.html"><span class="header-section-number">42</span> Borrador. Dashboards con R Markdown</a></li>
<li><a class="" href="dashboards-with-shiny.html"><span class="header-section-number">43</span> Borrador. Dashboards con Shiny</a></li>
<li class="book-part">Miscelánea</li>
<li><a class="" href="writing-functions-1.html"><span class="header-section-number">44</span> Escribir funciones</a></li>
<li><a class="" href="directory-interactions.html"><span class="header-section-number">45</span> Borrador. Interacciones con directorios</a></li>
<li><a class="" href="version-control-and-collaboration-with-git-and-github.html"><span class="header-section-number">46</span> Control de versiones y colaboración con Git y Github</a></li>
<li><a class="" href="common-errors.html"><span class="header-section-number">47</span> Errores comunes</a></li>
<li><a class="" href="getting-help.html"><span class="header-section-number">48</span> Cómo obtener ayuda</a></li>
<li><a class="" href="r-on-network-drives.html"><span class="header-section-number">49</span> Borrador. R en redes locales</a></li>
<li><a class="" href="data-table.html"><span class="header-section-number">50</span> Borrador. data.table</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="organizing-routine-reports" class="section level1" number="41">
<h1>
<span class="header-section-number">41</span> Organización de informes rutinarios<a class="anchor" aria-label="anchor" href="#organizing-routine-reports"><i class="fas fa-link"></i></a>
</h1>
<p>Esta página cubre el paquete <strong>reportfactory</strong>, que es un <em>complemento para el uso de R Markdown para los informes</em>.</p>
<p>Este paquete facilita la ejecucion de reportes de rutina, especialmente la compilación de múltiples archivos R Markdown y la organización de sus resultados. En esencia, proporciona una “fábrica” desde la que se pueden ejecutar los informes R Markdown, obtener automáticamente carpetas con fecha y hora para guardar los archivos de salida, y generar un control de versiones “ligero”.</p>
<p><strong>reportfactory</strong> es uno de los paquetes desarrollados por RECON (R Epidemics Consortium). Aquí está su <a href="https://www.repidemicsconsortium.org/">sitio web</a> y su <a href="https://github.com/reconverse">Github</a>.</p>
<div id="preparation-34" class="section level2" number="41.1">
<h2>
<span class="header-section-number">41.1</span> Preparación<a class="anchor" aria-label="anchor" href="#preparation-34"><i class="fas fa-link"></i></a>
</h2>
<div id="cargar-paquetes-29" class="section level3 unnumbered">
<h3>Cargar paquetes<a class="anchor" aria-label="anchor" href="#cargar-paquetes-29"><i class="fas fa-link"></i></a>
</h3>
<p>En RStudio, instalá la última versión del paquete <strong>reportfactory</strong> desde Github.</p>
<p>Podés hacerlo a través del paquete <strong>pacman</strong> con <code><a href="https://rdrr.io/pkg/pacman/man/p_load_current_gh.html">p_load_current_gh()</a></code> que forzará la instalación de la última versión desde Github. Proporcioná la cadena de caracteres “reconverse/reportfactory”, que especifica la organización de Github (reconverse) y el repositorio (reportfactory). También puede utilizar <code><a href="https://devtools.r-lib.org/reference/remote-reexports.html">install_github()</a></code> del paquete <strong>remotes</strong>, como alternativa.</p>
<div class="sourceCode" id="cb1738"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Instalá y cargá la última versión del paquete desde Github</span>
<span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load_current_gh.html">p_load_current_gh</a></span><span class="op">(</span><span class="st">"reconverse/reportfactory"</span><span class="op">)</span>
<span class="co">#remotes::install_github("reconverse/reportfactory") # alternativa</span></code></pre></div>
</div>
</div>
<div id="new-factory" class="section level2" number="41.2">
<h2>
<span class="header-section-number">41.2</span> Nueva fábrica<a class="anchor" aria-label="anchor" href="#new-factory"><i class="fas fa-link"></i></a>
</h2>
<p>Para crear una nueva fábrica, ejecutá la función <code>new_factory()</code>. Esto creará una nueva carpeta de proyecto R autocontenida con las siguientes características predeterminadas:</p>
<ul>
<li>La fábrica se añadirá a tu directorio de trabajo</li>
<li>El nombre del proyecto R de la fábrica será “new_factory.Rproj”</li>
<li>Tu sesión de RStudio se “trasladará” a este proyecto R</li>
</ul>
<div class="sourceCode" id="cb1739"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Este comando creará una fabrica en el directorio de trabajo</span>
<span class="fu">new_factory</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Mirando dentro de la fábrica, se puede ver que las subcarpetas y algunos archivos se han creado de manera automática.</p>
<div class="inline-figure"><img src="images/factory_new2.png" width="424"></div>
<ul>
<li>La carpeta <em>report_sources</em> contendrá tus scripts R Markdown, que generan sus informes</li>
<li>La carpeta de <em>outputs</em> contendrá el informe de salida (por ejemplo, HTML, Word, PDF, etc.)</li>
<li>La carpeta de <em>scripts</em> puede utilizarse para guardar otros scripts de R (por ejemplo, los que se convican en tus scripts de Rmd)</li>
<li>La carpeta de <em>data</em> puede utilizarse para guardar tus datos (se incluyen las subcarpetas “raw” (datos brutos) y “clean” (datos limpios))</li>
<li>Un archivo <em>.here</em>, para que puedas utilizar el paquete <strong>here</strong> para convocar a los archivos de las subcarpetas gracias a su relación con esta carpeta raíz (véase la página de <a href="r-projects.html#r-projects">proyectos en R</a> para más detalles)</li>
<li>Se ha creado un archivo <em>gitignore</em> en caso de que se vincule este proyecto R a un repositorio de Github (ver [Control de versiones y colaboración con Github])</li>
<li>Un archivo README vacío, en caso de que uses un repositorio de Github</li>
</ul>
<p><span style="color: orange;"><strong><em>PRECAUCIÓN::</em></strong> dependiendo de la configuración de tu ordenador, los archivos como “.here” pueden existir pero estar ocultos.</span></p>
<p>A continuación mencionamos configuraciones predeterminadas que tal vez quieras ajustar con el comando <code>new_factory()</code>:</p>
<ul>
<li>
<code>factory =</code> Proporciona un nombre para la carpeta de fábrica (por defecto es “new_factory”)</li>
<li>
<code>path =</code> Designa una ruta de archivo para la nueva fábrica (por defecto es el directorio de trabajo)</li>
<li>
<code>report_sources =</code> Proporciona un nombre alternativo para la subcarpeta que contiene los scripts R Markdown (por defecto es “report_sources”)</li>
<li>
<code>outputs =</code> Proporciona un nombre alternativo para la carpeta que contiene los resultados del informe (por defecto es “outputs”)</li>
</ul>
<p>Ver <code>?new_factory</code> para ver una lista completa de los argumentos.</p>
<p>Cuando creás la nueva fábrica, tu sesión de R se transfiere al nuevo proyecto R, por lo que debés cargar de nuevo el paquete <strong>reportfactory</strong>.</p>
<div class="sourceCode" id="cb1740"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">reportfactory</span><span class="op">)</span></code></pre></div>
<p>Ahora podés ejecutar el comando <code>factory_overview()</code> para ver la estructura interna (todas las carpetas y archivos) de la fábrica.</p>
<div class="sourceCode" id="cb1741"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">factory_overview</span><span class="op">(</span><span class="op">)</span>            <span class="co"># muestra la estructura de la fábrica en la consola</span></code></pre></div>
<p>El siguiente “árbol” de las carpetas y archivos de la fábrica se imprime en la consola de R. Fijáte que en la carpeta “data” hay subcarpetas para los datos “raw” y “clean”, y datos CSV de ejemplo. También hay “example_report.Rmd” en la carpeta “report_sources”.</p>
<div class="inline-figure"><img src="images/factory_overview.png" width="202"></div>
</div>
<div id="create-a-report" class="section level2" number="41.3">
<h2>
<span class="header-section-number">41.3</span> Crear un informe<a class="anchor" aria-label="anchor" href="#create-a-report"><i class="fas fa-link"></i></a>
</h2>
<p>Desde la fábrica del proyecto R, creá un informe R Markdown como lo harías normalmente, y guardálo en la carpeta “report_sources”. Consultá la página de <a href="reports-with-r-markdown">R Markdown</a> para obtener instrucciones. A modo de ejemplo, hemos añadido lo siguiente a la fábrica:</p>
<ul>
<li>Un nuevo script de R markdown titulado “daily_sitrep.Rmd”, guardado dentro de la carpeta “report_sources”.</li>
<li>Datos para el informe (“linelist_cleaned.rds”) guardados en la subcarpeta “clean” dentro de la carpeta “data”</li>
</ul>
<p>Ejecutando factory_overview() podemos ver el archivo R Markdown en la carpeta “report_sources” y el archivo de datos en la carpeta de datos “clean” (resaltado):</p>
<div class="inline-figure"><img src="images/factory_overview2.png" width="149"></div>
<p>A continuación mostramos una captura de pantalla del comienzo del archivo de Markdown “daily_sitrep.Rmd”. Podés ver que el formato de salida está configurado para ser HTML, a través de la cabecera YAML <code>output: html_document</code>.</p>
<div class="inline-figure"><img src="images/factory_new_rmd.png" width="420"></div>
<p>En este sencillo script, hay comandos para:</p>
<ul>
<li>Cargar los paquetes necesarios</li>
<li>Importar los datos del listado de casos utilizando una ruta de archivo del paquete <strong>here</strong> (lea más en la página sobre <a href="import-and-export.html#import-and-export">Importación y exportación</a>)</li>
</ul>
<div class="sourceCode" id="cb1742"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"clean"</span>, <span class="st">"linelist_cleaned.rds"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<ul>
<li>Imprimir una tabla de resumen de casos, y exportarla con <code><a href="https://rdrr.io/pkg/plotly/man/export.html">export()</a></code> como un archivo .csv</li>
<li>Imprimir una epicurva, y exportarla con <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave()</a></code> como un archivo .png</li>
</ul>
<p>Podés revisar la lista de informes R Markdown en la carpeta “report_sources” con este comando:</p>
<div class="sourceCode" id="cb1743"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">list_reports</span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div id="compile" class="section level2" number="41.4">
<h2>
<span class="header-section-number">41.4</span> Compilar<a class="anchor" aria-label="anchor" href="#compile"><i class="fas fa-link"></i></a>
</h2>
<p>En una fábrica de informes, “compilar” un informe de R Markdown implica que se ejecutará el script .Rmd y se producirá la salida (como se especifica en el script YAML, por ejemplo, como HTML, Word, PDF, etc.).</p>
<p><em>La fábrica creará automáticamente una carpeta con fecha y hora para las salidas en la carpeta “outputs”.</em></p>
<p>El informe de salida y los archivos generados por el script (por ejemplo, csv, png, xlsx) se guardarán en esta carpeta. Además, el propio script Rmd se guardará en esta carpeta, así tendrás un registro de esa versión del script.</p>
<p>Esto contrasta con el comportamiento normal de un R Markdown “tejido”, que guarda las salidas en la ubicación del script Rmd. Este comportamiento por defecto puede resultar en carpetas abarrotadas y desordenadas. El objetivo de la fábrica es mejorar la organización de archivos cuando uno necesita ejecutar informes con frecuencia.</p>
<div id="compilar-por-nombre" class="section level3 unnumbered">
<h3>Compilar por nombre<a class="anchor" aria-label="anchor" href="#compilar-por-nombre"><i class="fas fa-link"></i></a>
</h3>
<p>Podés compilar un informe específico ejecutando <code>compile_reports()</code> y proporcionando el nombre del script Rmd (sin la extensión .Rmd) a <code>reports =</code>. Para simplificar, podés omitir <code>reports =</code> y simplemente escribir el nombre R Markdown entre comillas, como se indica a continuación.</p>
<div class="inline-figure"><img src="images/factory_compile1.png" width="271"></div>
<p>Este comando compilaría sólo el informe “daily_sitrep.Rmd”, guardando el informe de HTML, y las exportaciones de la tabla de .csv y la epicurva de .png en una subcarpeta con fecha y hora específicas, dentro de la carpeta “outputs”.</p>
<p>Tené en cuenta que si proporcionás la extensión .Rmd, debés escribir la extensión tal como aparece en el nombre del archivo (.rmd vs. .Rmd).</p>
<p>También hay que tener en cuenta que, al compilar, es posible que aparezcan temporariamente varios archivos en la carpeta “report_sources”, pero pronto desaparecerán al ser transferidos a la carpeta “outputs”.</p>
</div>
<div id="compilación-por-número" class="section level3 unnumbered">
<h3>Compilación por número<a class="anchor" aria-label="anchor" href="#compilaci%C3%B3n-por-n%C3%BAmero"><i class="fas fa-link"></i></a>
</h3>
<p>También se puede especificar el script Rmd a compilar proporcionando un número o vector de números a <code>reports =</code>. Los números deben alinearse con el orden en que aparecen los informes cuando se ejecuta <code>list_reports()</code>.</p>
<div class="sourceCode" id="cb1744"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Compilar el segundo y el cuarto Rmd en la carpeta "report_sources"</span>
<span class="fu">compile_reports</span><span class="op">(</span>reports <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="compilar-todos" class="section level3 unnumbered">
<h3>Compilar todos<a class="anchor" aria-label="anchor" href="#compilar-todos"><i class="fas fa-link"></i></a>
</h3>
<p>Puedes compilar <em>todos</em> los informes R Markdown en la carpeta “report_sources” usando el argumento <code>reports =</code> a TRUE.</p>
<div class="inline-figure"><img src="images/factory_compile_all.png" width="268"></div>
</div>
<div id="compilar-desde-la-subcarpeta" class="section level3 unnumbered">
<h3>Compilar desde la subcarpeta<a class="anchor" aria-label="anchor" href="#compilar-desde-la-subcarpeta"><i class="fas fa-link"></i></a>
</h3>
<p>Podés añadir subcarpetas a la carpeta “report_sources”. Para ejecutar un informe R Markdown desde una subcarpeta, simplemente proporcioná el nombre de la carpeta a <code>subfolder =</code>. A continuación se muestra un ejemplo de código para compilar un informe Rmd localizado en una subcarpeta de “report_sources”.</p>
<div class="sourceCode" id="cb1745"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">compile_reports</span><span class="op">(</span>
     reports <span class="op">=</span> <span class="st">"summary_for_partners.Rmd"</span>,
     subfolder <span class="op">=</span> <span class="st">"for_partners"</span><span class="op">)</span></code></pre></div>
<p>Podés compilar todos los informes Rmd dentro de una subcarpeta proporcionando el nombre de la subcarpeta a <code>reports =</code>, con una barra al final, como se indica a continuación.</p>
<div class="sourceCode" id="cb1746"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">compile_reports</span><span class="op">(</span>reports <span class="op">=</span> <span class="st">"for_partners/"</span><span class="op">)</span></code></pre></div>
</div>
<div id="parametrización" class="section level3 unnumbered">
<h3>Parametrización<a class="anchor" aria-label="anchor" href="#parametrizaci%C3%B3n"><i class="fas fa-link"></i></a>
</h3>
<p>Como indicamos en la página sobre <a href="reports-with-r-markdown.html#reports-with-r-markdown">Informes con R Markdown</a>, podés ejecutar informes con parámetros especificados. Podés pasar estos parámetros como una lista a <code>compile_reports()</code> a través del argumento <code>params =</code>. Por ejemplo, en este informe ficticio hay tres parámetros proporcionados a los informes de R Markdown.</p>
<div class="sourceCode" id="cb1747"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">compile_reports</span><span class="op">(</span>
  reports <span class="op">=</span> <span class="st">"daily_sitrep.Rmd"</span>,
  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>most_recent_data <span class="op">=</span> <span class="cn">TRUE</span>,
                region <span class="op">=</span> <span class="st">"NORTHERN"</span>,
                rates_denominator <span class="op">=</span> <span class="fl">10000</span><span class="op">)</span>,
  subfolder <span class="op">=</span> <span class="st">"regional"</span>
<span class="op">)</span></code></pre></div>
</div>
<div id="utilizar-un-run-file" class="section level3 unnumbered">
<h3>Utilizar un “run-file”<a class="anchor" aria-label="anchor" href="#utilizar-un-run-file"><i class="fas fa-link"></i></a>
</h3>
<p>Si tenés que ejecutar varios informes, podés crear un script de R que contenga todos los comandos <code>compile_reports()</code>. Un usuario puede simplemente ejecutar todos los comandos en este script de R y todos los informes se compilarán. Puedes guardar este “archivo de ejecución” (run file) en la carpeta “scripts”.</p>
</div>
</div>
<div id="outputs-1" class="section level2" number="41.5">
<h2>
<span class="header-section-number">41.5</span> Salidas<a class="anchor" aria-label="anchor" href="#outputs-1"><i class="fas fa-link"></i></a>
</h2>
<p>Después de haber compilado los informes unas cuantas veces, la carpeta “outputs” tendría este aspecto (los resaltados se han añadido para mayor claridad):</p>
<div class="inline-figure"><img src="images/factory_overview_all.png" width="350"></div>
<ul>
<li>Dentro de “outputs”, se han creado subcarpetas para cada informe Rmd</li>
<li>Dentro de ellas, se han creado otras subcarpetas para cada compilación única
<ul>
<li>Están marcados con fecha y hora (“2021-04-23_T11-07-36” significa 23 de abril de 2021 a las 11:07:36)</li>
<li>Podés editar el formato de la fecha/hora. Ver <code>?compile_reports</code>
</li>
</ul>
</li>
<li>Dentro de cada carpeta compilada de fecha/hora, se almacena el resultado del informe (por ejemplo, HTML, PDF, Word) junto con el script Rmd (¡control de versiones!) y cualquier otro archivo exportado (por ejemplo, table.csv, epidemic_curve.png)</li>
</ul>
<p>Esta es una vista dentro de una de las carpetas con fecha/hora, para el informe “daily_sitrep”. La ruta del archivo está resaltada en amarillo para enfatizar.</p>
<div class="inline-figure"><img src="images/factory_compile_folder.png" width="435"></div>
<p>Por último, a continuación mostramos una captura de pantalla del informe de salida de HTML .</p>
<div class="inline-figure"><img src="images/factory_html.png" width="452"></div>
<p>Podés utilizar <code>list_outputs()</code> para ver una lista de las salidas.</p>
</div>
<div id="miscellaneous-1" class="section level2" number="41.6">
<h2>
<span class="header-section-number">41.6</span> Miscelánea<a class="anchor" aria-label="anchor" href="#miscellaneous-1"><i class="fas fa-link"></i></a>
</h2>
<div id="knit" class="section level3 unnumbered">
<h3>Knit<a class="anchor" aria-label="anchor" href="#knit"><i class="fas fa-link"></i></a>
</h3>
<p>Si querés “procesar” uno de tus informes R Markdown cliqueando el botón “Knit” podés hacerlo. En este caso, por defecto, las salidas aparecerán en la carpeta donde se guarda el Rmd - la carpeta “report_sources”. En versiones anteriores de <strong>reportfactory</strong>, la presencia de cualquier archivo que no sea Rmd en la carpeta “report_sources” impediría la compilación, pero esto ya no es así. Es posible ejecutar <code>compile_reports()</code> y no se producirá ningún error.</p>
</div>
<div id="scripts-1" class="section level3 unnumbered">
<h3>Scripts<a class="anchor" aria-label="anchor" href="#scripts-1"><i class="fas fa-link"></i></a>
</h3>
<p>Te recomendamos utilizar la carpeta “scripts” para almacenar “archivos de ejecución” o scripts .R que se originan en tus scripts .Rmd. Consultá la página sobre <a href="reports-with-r-markdown.html#reports-with-r-markdown">R Markdown</a> para obtener consejos sobre cómo estructurar tu código en varios archivos.</p>
</div>
<div id="extras" class="section level3 unnumbered">
<h3>Extras<a class="anchor" aria-label="anchor" href="#extras"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li><p>Con <strong>reportfactory</strong>, podés utilizar la función <code>list_deps()</code> para listar todos los paquetes requeridos en todos los informes de toda la fábrica.</p></li>
<li>
<p>Hay un paquete de acompañamiento en desarrollo llamado <strong>rfextras</strong> que ofrece más funciones de ayuda para asistirte en la construcción de informes, tales como:</p>
<ul>
<li>
<code>load_scripts()</code> - carga todos los scripts .R en una carpeta determinada (la carpeta “scripts” por defecto)</li>
<li>
<code>find_latest()</code>- encuentra la última versión de un archivo (por ejemplo, el último conjunto de datos)</li>
</ul>
</li>
</ul>
<!-- ======================================================= -->
</div>
</div>
<div id="resources-34" class="section level2" number="41.7">
<h2>
<span class="header-section-number">41.7</span> Recursos<a class="anchor" aria-label="anchor" href="#resources-34"><i class="fas fa-link"></i></a>
</h2>
<p>Consultá la <a href="https://github.com/reconverse/reportfactory">página de Github del paquete <strong>reportfactory</strong></a></p>
<p>Consultá la <a href="https://github.com/reconhub/rfextras">página de Github del paquete <strong>rfextras</strong></a></p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="reports-with-r-markdown.html"><span class="header-section-number">40</span> Informes con R Markdown</a></div>
<div class="next"><a href="dashboards-with-r-markdown.html"><span class="header-section-number">42</span> Borrador. Dashboards con R Markdown</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>En esta página</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#organizing-routine-reports"><span class="header-section-number">41</span> Organización de informes rutinarios</a></li>
<li>
<a class="nav-link" href="#preparation-34"><span class="header-section-number">41.1</span> Preparación</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#cargar-paquetes-29">Cargar paquetes</a></li></ul>
</li>
<li><a class="nav-link" href="#new-factory"><span class="header-section-number">41.2</span> Nueva fábrica</a></li>
<li><a class="nav-link" href="#create-a-report"><span class="header-section-number">41.3</span> Crear un informe</a></li>
<li>
<a class="nav-link" href="#compile"><span class="header-section-number">41.4</span> Compilar</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#compilar-por-nombre">Compilar por nombre</a></li>
<li><a class="nav-link" href="#compilaci%C3%B3n-por-n%C3%BAmero">Compilación por número</a></li>
<li><a class="nav-link" href="#compilar-todos">Compilar todos</a></li>
<li><a class="nav-link" href="#compilar-desde-la-subcarpeta">Compilar desde la subcarpeta</a></li>
<li><a class="nav-link" href="#parametrizaci%C3%B3n">Parametrización</a></li>
<li><a class="nav-link" href="#utilizar-un-run-file">Utilizar un “run-file”</a></li>
</ul>
</li>
<li><a class="nav-link" href="#outputs-1"><span class="header-section-number">41.5</span> Salidas</a></li>
<li>
<a class="nav-link" href="#miscellaneous-1"><span class="header-section-number">41.6</span> Miscelánea</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#knit">Knit</a></li>
<li><a class="nav-link" href="#scripts-1">Scripts</a></li>
<li><a class="nav-link" href="#extras">Extras</a></li>
</ul>
</li>
<li><a class="nav-link" href="#resources-34"><span class="header-section-number">41.7</span> Recursos</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>El manual de R para la Epidemiología</strong>" fué escrito por el equipo del manual. Compilado el 2022-02-14.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>Este libro fué construido con el paquete <a class="text-light" href="https://bookdown.org">bookdown</a> de R.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
