<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>3 Fundamentos de R | El manual de R para la Epidemiología</title>
<meta name="author" content="El equipo del manual">
<meta name="description" content="Bienvenido. Esta página repasa los aspectos esenciales de R. No pretende ser un tutorial exhaustivo, pero proporciona los fundamentos y puede ser útil para refrescar la memoria. La sección de...">
<meta name="generator" content="bookdown 0.23 with bs4_book()">
<meta property="og:title" content="3 Fundamentos de R | El manual de R para la Epidemiología">
<meta property="og:type" content="book">
<meta property="og:description" content="Bienvenido. Esta página repasa los aspectos esenciales de R. No pretende ser un tutorial exhaustivo, pero proporciona los fundamentos y puede ser útil para refrescar la memoria. La sección de...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="3 Fundamentos de R | El manual de R para la Epidemiología">
<meta name="twitter:description" content="Bienvenido. Esta página repasa los aspectos esenciales de R. No pretende ser un tutorial exhaustivo, pero proporciona los fundamentos y puede ser útil para refrescar la memoria. La sección de...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.10/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.0/transition.js"></script><script src="libs/bs3compat-0.3.0/tabs.js"></script><script src="libs/bs3compat-0.3.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.18/datatables.js"></script><link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet">
<script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.9.4.1/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script><link href="libs/vis-4.20.1/vis.css" rel="stylesheet">
<script src="libs/vis-4.20.1/vis.min.js"></script><script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script><link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="libs/plotly-basic-1.57.1/plotly-basic-1.57.1.min.js"></script><script src="libs/plotly-cartesian-1.57.1/plotly-cartesian-1.57.1.min.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-8.1.2/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-8.1.2/highcharts.js"></script><script src="libs/highcharts-8.1.2/highcharts-3d.js"></script><script src="libs/highcharts-8.1.2/highcharts-more.js"></script><script src="libs/highcharts-8.1.2/modules/stock.js"></script><script src="libs/highcharts-8.1.2/modules/map.js"></script><script src="libs/highcharts-8.1.2/modules/annotations.js"></script><script src="libs/highcharts-8.1.2/modules/data.js"></script><script src="libs/highcharts-8.1.2/modules/drilldown.js"></script><script src="libs/highcharts-8.1.2/modules/item-series.js"></script><script src="libs/highcharts-8.1.2/modules/offline-exporting.js"></script><script src="libs/highcharts-8.1.2/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-8.1.2/modules/exporting.js"></script><script src="libs/highcharts-8.1.2/modules/export-data.js"></script><script src="libs/highcharts-8.1.2/modules/funnel.js"></script><script src="libs/highcharts-8.1.2/modules/heatmap.js"></script><script src="libs/highcharts-8.1.2/modules/treemap.js"></script><script src="libs/highcharts-8.1.2/modules/sankey.js"></script><script src="libs/highcharts-8.1.2/modules/dependency-wheel.js"></script><script src="libs/highcharts-8.1.2/modules/organization.js"></script><script src="libs/highcharts-8.1.2/modules/solid-gauge.js"></script><script src="libs/highcharts-8.1.2/modules/streamgraph.js"></script><script src="libs/highcharts-8.1.2/modules/sunburst.js"></script><script src="libs/highcharts-8.1.2/modules/vector.js"></script><script src="libs/highcharts-8.1.2/modules/wordcloud.js"></script><script src="libs/highcharts-8.1.2/modules/xrange.js"></script><script src="libs/highcharts-8.1.2/modules/tilemap.js"></script><script src="libs/highcharts-8.1.2/modules/venn.js"></script><script src="libs/highcharts-8.1.2/modules/gantt.js"></script><script src="libs/highcharts-8.1.2/modules/timeline.js"></script><script src="libs/highcharts-8.1.2/modules/parallel-coordinates.js"></script><script src="libs/highcharts-8.1.2/modules/bullet.js"></script><script src="libs/highcharts-8.1.2/modules/coloraxis.js"></script><script src="libs/highcharts-8.1.2/modules/dumbbell.js"></script><script src="libs/highcharts-8.1.2/modules/lollipop.js"></script><script src="libs/highcharts-8.1.2/modules/series-label.js"></script><script src="libs/highcharts-8.1.2/plugins/motion.js"></script><script src="libs/highcharts-8.1.2/custom/reset.js"></script><script src="libs/highcharts-8.1.2/modules/boost.js"></script><script src="libs/highchart-binding-0.8.2/highchart.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style_bs4.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">El manual de R para la Epidemiología</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">Acerca de este libro</li>
<li><a class="" href="editorial-and-technical-notes.html"><span class="header-section-number">1</span> Notas editoriales y técnicas</a></li>
<li><a class="" href="download-handbook-and-data.html"><span class="header-section-number">2</span> Descargando el manual y los datos</a></li>
<li class="book-part">Aspectos básicos</li>
<li><a class="active" href="r-basics.html"><span class="header-section-number">3</span> Fundamentos de R</a></li>
<li><a class="" href="transition-to-r.html"><span class="header-section-number">4</span> Transición a R</a></li>
<li><a class="" href="suggested-packages-1.html"><span class="header-section-number">5</span> Paquetes recomendados</a></li>
<li><a class="" href="r-projects.html"><span class="header-section-number">6</span> Proyectos en R</a></li>
<li><a class="" href="import-and-export.html"><span class="header-section-number">7</span> Importación y exportación</a></li>
<li class="book-part">Gestión de datos</li>
<li><a class="" href="cleaning-data-and-core-functions.html"><span class="header-section-number">8</span> Limpieza de datos y funciones básicas</a></li>
<li><a class="" href="working-with-dates.html"><span class="header-section-number">9</span> Working with dates</a></li>
<li><a class="" href="characters-and-strings.html"><span class="header-section-number">10</span> Caracteres y cadenas</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">11</span> Factors</a></li>
<li><a class="" href="pivoting-data.html"><span class="header-section-number">12</span> Pivoting data</a></li>
<li><a class="" href="grouping-data.html"><span class="header-section-number">13</span> Grouping data</a></li>
<li><a class="" href="joining-data.html"><span class="header-section-number">14</span> Joining data</a></li>
<li><a class="" href="de-duplication.html"><span class="header-section-number">15</span> De-duplication</a></li>
<li><a class="" href="iteration-loops-and-lists.html"><span class="header-section-number">16</span> Iteration, loops, and lists</a></li>
<li class="book-part">Análisis</li>
<li><a class="" href="descriptive-tables.html"><span class="header-section-number">17</span> Descriptive tables</a></li>
<li><a class="" href="simple-statistical-tests.html"><span class="header-section-number">18</span> Simple statistical tests</a></li>
<li><a class="" href="univariate-and-multivariable-regression.html"><span class="header-section-number">19</span> Univariate and multivariable regression</a></li>
<li><a class="" href="missing-data.html"><span class="header-section-number">20</span> Missing data</a></li>
<li><a class="" href="standardised-rates.html"><span class="header-section-number">21</span> Standardised rates</a></li>
<li><a class="" href="moving-averages.html"><span class="header-section-number">22</span> Moving averages</a></li>
<li><a class="" href="time-series-and-outbreak-detection.html"><span class="header-section-number">23</span> Time series and outbreak detection</a></li>
<li><a class="" href="epidemic-modeling.html"><span class="header-section-number">24</span> Epidemic modeling</a></li>
<li><a class="" href="contact-tracing.html"><span class="header-section-number">25</span> Contact tracing</a></li>
<li><a class="" href="survey-analysis.html"><span class="header-section-number">26</span> Survey analysis</a></li>
<li><a class="" href="survival-analysis.html"><span class="header-section-number">27</span> Survival analysis</a></li>
<li class="book-part">Visualización de datos</li>
<li><a class="" href="tables-for-presentation.html"><span class="header-section-number">28</span> Tables for presentation</a></li>
<li><a class="" href="ggplot-basics.html"><span class="header-section-number">29</span> Conceptos básicos de ggplot</a></li>
<li><a class="" href="ggplot-tips.html"><span class="header-section-number">30</span> ggplot tips</a></li>
<li><a class="" href="epidemic-curves.html"><span class="header-section-number">31</span> Epidemic curves</a></li>
<li><a class="" href="demographic-pyramids-and-likert-scales.html"><span class="header-section-number">32</span> Demographic pyramids and Likert-scales</a></li>
<li><a class="" href="heat-plots.html"><span class="header-section-number">33</span> Heat plots</a></li>
<li><a class="" href="diagrams-and-charts.html"><span class="header-section-number">34</span> Diagrams and charts</a></li>
<li><a class="" href="combinations-analysis.html"><span class="header-section-number">35</span> Combinations analysis</a></li>
<li><a class="" href="transmission-chains.html"><span class="header-section-number">36</span> Transmission chains</a></li>
<li><a class="" href="phylogenetic-trees-1.html"><span class="header-section-number">37</span> Árboles filogenéticos</a></li>
<li><a class="" href="interactive-plots.html"><span class="header-section-number">38</span> Gráficos interactivos</a></li>
<li class="book-part">Informes y Dashboards</li>
<li><a class="" href="organizing-routine-reports.html"><span class="header-section-number">39</span> Borrador. Organización de informes rutinarios</a></li>
<li><a class="" href="dashboards-with-r-markdown.html"><span class="header-section-number">40</span> Dashboards with R Markdown</a></li>
<li><a class="" href="dashboards-with-shiny.html"><span class="header-section-number">41</span> Dashboards with Shiny</a></li>
<li class="book-part">Miscelánea</li>
<li><a class="" href="writing-functions-1.html"><span class="header-section-number">42</span> Writing functions</a></li>
<li><a class="" href="directory-interactions.html"><span class="header-section-number">43</span> Directory interactions</a></li>
<li><a class="" href="version-control-and-collaboration-with-git-and-github.html"><span class="header-section-number">44</span> Control de versiones y colaboración con Git y Github</a></li>
<li><a class="" href="common-errors.html"><span class="header-section-number">45</span> Common errors</a></li>
<li><a class="" href="getting-help.html"><span class="header-section-number">46</span> Getting help</a></li>
<li><a class="" href="r-on-network-drives.html"><span class="header-section-number">47</span> R on network drives</a></li>
<li><a class="" href="data-table.html"><span class="header-section-number">48</span> Data Table</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="r-basics" class="section level1" number="3">
<h1>
<span class="header-section-number">3</span> Fundamentos de R<a class="anchor" aria-label="anchor" href="#r-basics"><i class="fas fa-link"></i></a>
</h1>
<div class="inline-figure"><img src="images/basics_header_close.png" width="100%" style="display: block; margin: auto;"></div>
<p>Bienvenido.</p>
<p>Esta página repasa los aspectos esenciales de R. No pretende ser un tutorial exhaustivo, pero proporciona los fundamentos y puede ser útil para refrescar la memoria. La sección de <a href="r-basics.html#learning">Recursos para el aprendizaje</a> enlaza con tutoriales más completos.</p>
<p>Partes de esta página han sido adaptadas con permiso del <a href="https://r4epis.netlify.app/">proyecto R4Epis</a>.</p>
<p>Consulta la página sobre <a href="transition-to-r.html#transition-to-r">Transición a R</a> para obtener consejos sobre cómo cambiar a R desde STATA, SAS o Excel.</p>
<!-- ======================================================= -->
<div id="por-qué-utilizar-r" class="section level2" number="3.1">
<h2>
<span class="header-section-number">3.1</span> ¿Por qué utilizar R?<a class="anchor" aria-label="anchor" href="#por-qu%C3%A9-utilizar-r"><i class="fas fa-link"></i></a>
</h2>
<p>Como se indica en el <a href="https://www.r-project.org/about.html">sitio web de R project</a>, éste es un lenguaje de programación y un entorno para la computación estadística y gráficos. Es muy versátil, ampliable y dirigido por la comunidad.</p>
<p><strong>Coste</strong></p>
<p>El uso de R es gratuito. Hay una fuerte ética en la comunidad de material libre y de código abierto.</p>
<p><strong>Reproducibilidad</strong></p>
<p>La gestión y el análisis de los datos a través de un lenguaje de programación (en comparación con Excel u otra herramienta principalmente manual) mejora <strong>la reproducibilidad</strong>, facilita la <strong>detección de errores</strong> y alivia la carga de trabajo.</p>
<p><strong>Comunidad</strong></p>
<p>La comunidad de usuarios de R es enorme y colaborativa. Cada día se desarrollan nuevos paquetes y herramientas para abordar problemas cotidianos, que son examinados por la comunidad de usuarios. Por ejemplo, <a href="https://rladies.org/">R-Ladies</a> es una asociación mundial cuya misión es promover la diversidad de género en la comunidad de R, siendo una de las mayores asociaciones de usuarios de R. Es probable que tengas un grupo cerca.</p>
</div>
<div id="términos-clave" class="section level2" number="3.2">
<h2>
<span class="header-section-number">3.2</span> Términos clave<a class="anchor" aria-label="anchor" href="#t%C3%A9rminos-clave"><i class="fas fa-link"></i></a>
</h2>
<p><strong>RStudio</strong> - RStudio es una interfaz gráfica de usuario (GUI) para facilitar el uso de <strong>R.</strong> Lee más en la sección <a href="r-basics.html#rstudio">RStudio</a>.</p>
<p><strong>Objetos</strong> - Todo lo que se almacena en R - conjuntos de datos, variables, una lista de nombres de pueblos, un número total de población, incluso resultados como gráficos - son <em>objetos</em> a los que se les <em>asigna un nombre</em> y <em>pueden ser referenciados</em> en comandos posteriores. Lee más en la sección <a href="r-basics.html#objects">Objetos</a>.</p>
<p><strong>Funciones</strong> - Una función es una operación de código que acepta entradas y devuelve una salida transformada. Lee más en la sección <a href="r-basics.html#functions">Funciones</a>.</p>
<p><strong>Paquetes</strong> - Un paquete de R es un conjunto de funciones que se pueden compartir. Lee más en la sección <a href="r-basics.html#packages">Paquetes</a>.</p>
<p><strong>Scripts</strong> - Un script es el archivo de documento que contiene tus comandos. Lee más en la sección <a href="r-basics.html#scripts">Scripts</a></p>
</div>
<div id="learning" class="section level2" number="3.3">
<h2>
<span class="header-section-number">3.3</span> Recursos de aprendizaje<a class="anchor" aria-label="anchor" href="#learning"><i class="fas fa-link"></i></a>
</h2>
<div id="resources-within-rstudio" class="section level3" number="3.3.1">
<h3>
<span class="header-section-number">3.3.1</span> Recursos en RStudio<a class="anchor" aria-label="anchor" href="#resources-within-rstudio"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Documentación de ayuda</strong></p>
<p>Busca en la pestaña “Help” de RStudio la documentación sobre los paquetes de R y funciones específicas. Esto está dentro del panel que también contiene Archivos, Gráficos y Paquetes (normalmente en el panel inferior derecho). También puedes escribir el nombre de un paquete o función en la consola de R después de un signo de interrogación para abrir la página de ayuda correspondiente. No incluyas paréntesis.</p>
<p>Por ejemplo: ?filter o ?diagrammeR.</p>
<p><strong>Tutoriales interactivos</strong></p>
<p>Hay varias formas de aprender R de forma interactiva <em>dentro de</em> RStudio.</p>
<p>El propio RStudio ofrece un Tutorial que se encuentra en el paquete de R <a href="https://blog.rstudio.com/2020/02/25/rstudio-1-3-integrated-tutorials/"><strong><u>learnr</u></strong></a>. Simplemente instala este paquete y abre un tutorial a través de la nueva pestaña “Tutorial” en el panel superior derecho de RStudio (que también contiene las pestañas Environment e History).</p>
<p>El paquete de R <a href="https://swirlstats.com/"><strong>swirl</strong></a> ofrece cursos interactivos en la consola de R. Instala y carga este paquete, luego ejecuta el comando <code>swirl()</code> (paréntesis vacío) en la consola de R. Verá que aparecen indicaciones en la consola. Responde escribiendo en la consola. Te guiará a través de un curso de tu elección.</p>
</div>
<div id="Cheatsheets" class="section level3" number="3.3.2">
<h3>
<span class="header-section-number">3.3.2</span> Hojas de referencia<a class="anchor" aria-label="anchor" href="#Cheatsheets"><i class="fas fa-link"></i></a>
</h3>
<p>Hay muchas “hojas de referencias o trucos” (Cheatsheets) en PDF disponibles en el <a href="https://rstudio.com/resources/cheatsheets/">sitio web de RStudio</a>, por ejemplo:</p>
<ul>
<li>Factores con el paquete <strong>forcats</strong>
</li>
<li>Fechas y horarios con el paquete <strong>lubridate</strong>
</li>
<li>Cadenas con el paquete <strong>stringr</strong>
</li>
<li>Operaciones iterativas con el paquete <strong>purrr</strong>
</li>
<li>Importación de datos</li>
<li>Transformación de datos con el paquete <strong>dplyr</strong>
</li>
<li>
<strong>R Markdown</strong> (para crear documentos como PDF, Word, Powerpoint…)</li>
<li>
<strong>Shiny</strong> (para crear aplicaciones web interactivas)</li>
<li>Visualización de datos con el paquete <strong>ggplot2</strong>
</li>
<li>Cartografía (GIS)</li>
<li>Mapas interactivos con el paquete <strong>leaflet</strong>
</li>
<li>Python con R (paquete <strong>reticulate</strong>)</li>
</ul>
<p>En este enlace puedes encontrar un recurso en línea, específicamente para los <a href="https://jules32.github.io/r-for-excel-users/">usuarios de Excel</a></p>
</div>
<div id="twitter" class="section level3 unnumbered">
<h3>Twitter<a class="anchor" aria-label="anchor" href="#twitter"><i class="fas fa-link"></i></a>
</h3>
<p>R tiene una vibrante comunidad en Twitter en la que puedes aprender trucos, atajos y noticias: sigue estas cuentas:</p>
<ul>
<li>Síguenos! <span class="citation">[@epiRhandbook]</span>(<a href="https://twitter.com/epirhandbook" class="uri">https://twitter.com/epirhandbook</a>)</li>
<li>R Function A Day <span class="citation">[@rfuntionaday]</span>(<a href="https://twitter.com/rfunctionaday" class="uri">https://twitter.com/rfunctionaday</a>) (Es un recurso <em>increíble)</em>
</li>
<li>R para ciencia de datos <span class="citation">[@rstats4ds]</span>(<a href="https://twitter.com/rstats4ds?lang=en" class="uri">https://twitter.com/rstats4ds?lang=en</a>)</li>
<li>RStudio <span class="citation">[@RStudio]</span>(<a href="https://twitter.com/rstudio?lang=en" class="uri">https://twitter.com/rstudio?lang=en</a>)</li>
<li>Trucos de RStudio <span class="citation">[@rstudiotips]</span>(<a href="https://twitter.com/rstudiotips" class="uri">https://twitter.com/rstudiotips</a>)</li>
<li>R-Bloggers <span class="citation">[@Rbloggers]</span>(<a href="https://twitter.com/Rbloggers" class="uri">https://twitter.com/Rbloggers</a>)</li>
<li>R-ladies <span class="citation">[@RLadiesGlobal]</span>(<a href="https://twitter.com/RLadiesGlobal" class="uri">https://twitter.com/RLadiesGlobal</a>)</li>
<li>Hadley Wickham <span class="citation">[@hadleywickham]</span>(<a href="https://twitter.com/hadleywickham?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" class="uri">https://twitter.com/hadleywickham?ref_src=twsrc^google|twcamp^serp|twgr^author</a>)</li>
</ul>
<p>También:</p>
<p><strong>#epitwitter</strong> y <strong>#rstats</strong></p>
</div>
<div id="free-online-resources" class="section level3" number="3.3.3">
<h3>
<span class="header-section-number">3.3.3</span> Recursos gratuitos en línea<a class="anchor" aria-label="anchor" href="#free-online-resources"><i class="fas fa-link"></i></a>
</h3>
<p>Un texto definitivo es el libro <a href="https://r4ds.had.co.nz/">R for Data Science</a> de Garrett Grolemund y Hadley Wickham</p>
<p>El sitio web del proyecto <a href="https://r4epis.netlify.app/">R4Epis</a> tiene como objetivo “desarrollar herramientas estandarizadas de limpieza de datos, análisis y elaboración de informes para cubrir los tipos comunes de brotes y estudios realizados en la población en un entorno de respuesta de emergencia de MSF”. Se pueden encontrar materiales de formación sobre los fundamentos de R, plantillas para informes de RMarkdown sobre brotes y encuestas, y tutoriales para ayudar a configurarlos.</p>
</div>
<div id="languages-other-than-english" class="section level3" number="3.3.4">
<h3>
<span class="header-section-number">3.3.4</span> Idiomas distintos del inglés<a class="anchor" aria-label="anchor" href="#languages-other-than-english"><i class="fas fa-link"></i></a>
</h3>
<p><a href="https://www.rstudio.com/collections/espanol/">Materiales de RStudio en Español</a></p>
<p><a href="https://es.r4ds.hadley.nz/">R for Data Science en español</a></p>
<p><a href="https://juba.github.io/tidyverse/index.html">Introduction à R et au tidyverse (Francais)</a></p>
<!-- ======================================================= -->
</div>
</div>
<div id="Installation" class="section level2" number="3.4">
<h2>
<span class="header-section-number">3.4</span> Instalación<a class="anchor" aria-label="anchor" href="#Installation"><i class="fas fa-link"></i></a>
</h2>
<div id="r-and-rstudio" class="section level3" number="3.4.1">
<h3>
<span class="header-section-number">3.4.1</span> R y RStudio<a class="anchor" aria-label="anchor" href="#r-and-rstudio"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Cómo instalar R</strong></p>
<p>Visita este sitio web <a href="https://www.r-project.org/">https://www.r-project.org/</a> y descarga la última versión de R adecuada a tu ordenador.</p>
<p><strong>Cómo instalar RStudio</strong></p>
<p>Visita este sitio web <a href="https://rstudio.com/products/rstudio/download/">https://rstudio.com/products/rstudio/download/</a> y descarga la última versión gratuita de RStudio para escritorio adecuada para tu ordenador.</p>
<p><strong>Permisos </strong></p>
<p>Ten en cuenta que debes instalar R y RStudio en una unidad donde tengas permisos de lectura y escritura. De lo contrario, la capacidad para instalar paquetes de R (algo frecuente) se verá afectada. Si tienes problemas, intenta abrir RStudio con el botón derecho en el icono y seleccionando “Ejecutar como administrador”. Puedes encontrar otros consejos en la página <a href="r-on-network-drives.html#r-on-network-drives">R en unidades de red</a>.</p>
<p><strong>Cómo actualizar R y RStudio</strong></p>
<p>Tu versión de R se muestra al inicio de la consola de R. También puede ejecutar <code><a href="https://rdrr.io/r/utils/sessionInfo.html">sessionInfo()</a></code>.</p>
<p>Para actualizar R, puedes ir al sitio web mencionado anteriormente y vuelva a instalar R. También puede utilizar el paquete <strong>installr</strong> (en Windows) ejecutando <code><a href="https://talgalili.github.io/installr/reference/updateR.html">installr::updateR()</a></code>. Esto abrirá cuadros de diálogo para ayudarle a descargar la última versión de R y actualizar sus paquetes a la nueva versión de R. Puedes encontrar más detalles en la <a href="https://www.r-project.org/nosvn/pandoc/installr.html">documentación de</a> <strong>installr</strong>.</p>
<p>Ten en cuenta que la versión antigua de R seguirá existiendo en tu ordenador. Puedes ejecutar temporalmente una versión anterior (una “instalación” más antigua) de R clicando en “Herramientas” -&gt; “Opciones globales” en RStudio y eligiendo una versión de R. Esto puede ser útil si quieres utilizar un paquete que no ha sido actualizado para funcionar en la versión más reciente de R.</p>
<p>Para actualizar RStudio, puede ir a la página web anterior y volver a descargar RStudio. Otra opción es clicar en “Ayuda” -&gt; “Buscar actualizaciones” dentro de RStudio, pero esto puede no mostrar las últimas actualizaciones.</p>
<p>Para ver qué versiones de R, RStudio o paquetes se utilizaron cuando se hizo este Manual, consulta la página de <a href="editorial-and-technical-notes.html#editorial-and-technical-notes">Notas técnicas y editoriales</a>.</p>
</div>
<div id="other-software-you-may-need-to-install" class="section level3" number="3.4.2">
<h3>
<span class="header-section-number">3.4.2</span> Otros programas que <em>puedes</em> necesitar instalar<a class="anchor" aria-label="anchor" href="#other-software-you-may-need-to-install"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>TinyTeX (<em>para compilar un documento RMarkdown en PDF</em>)</li>
<li>Pandoc (<em>para compilar documentos RMarkdown</em>)</li>
<li>RTools (<em>para construir paquetes para R</em>)</li>
<li>phantomjs (<em>para guardar imágenes fijas de redes animadas, como cadenas de transmisión</em>)</li>
</ul>
<div id="tinytex" class="section level4 unnumbered">
<h4>TinyTex<a class="anchor" aria-label="anchor" href="#tinytex"><i class="fas fa-link"></i></a>
</h4>
<p>TinyTex es una distribución LaTeX personalizada, útil cuando se trata de producir PDFs desde R. Ver <a href="https://yihui.org/tinytex/">https://yihui.org/tinytex/</a> para más información.</p>
<p>Para instalar TinyTex desde R:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'tinytex'</span><span class="op">)</span>
<span class="fu">tinytex</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tinytex/man/install_tinytex.html">install_tinytex</a></span><span class="op">(</span><span class="op">)</span>
<span class="co"># para desinstalar TinyTeX, ejecuta tinytex::uninstall_tinytex()</span></code></pre></div>
</div>
<div id="pandoc" class="section level4 unnumbered">
<h4>Pandoc<a class="anchor" aria-label="anchor" href="#pandoc"><i class="fas fa-link"></i></a>
</h4>
<p>Pandoc es un conversor de documentos, un software separado de R. <strong>Viene incluido con RStudio y no debería ser necesario descargarlo.</strong> Ayuda en el proceso de conversión de documentos Rmarkdown a formatos como pdf y añade funcionalidades complejas.</p>
</div>
<div id="rtools" class="section level4 unnumbered">
<h4>RTools<a class="anchor" aria-label="anchor" href="#rtools"><i class="fas fa-link"></i></a>
</h4>
<p>RTools es una colección de software para construir paquetes para R</p>
<p>Se instala desde este sitio web:<a href="https://cran.r-project.org/bin/windows/Rtools/">https://cran.r-project.org/bin/windows/Rtools/</a></p>
</div>
<div id="phantomjs" class="section level4 unnumbered">
<h4>phantomjs<a class="anchor" aria-label="anchor" href="#phantomjs"><i class="fas fa-link"></i></a>
</h4>
<p>Esto se utiliza a menudo para hacer “capturas de pantalla” de las páginas web. Por ejemplo, cuando se hace una cadena de transmisión con el paquete <strong>epicontacts</strong>, se produce un archivo HTML que es interactivo y dinámico. Si deseas una imagen estática, puede ser útil utilizar el paquete [<strong><a href="https://wch.github.io/webshot/articles/intro.html">webshot**</a> para automatizar este proceso. Para ello se necesita el programa externo “phantomjs”. Puedes instalar phantomjs a través del paquete </strong>webshot** con el comando <code><a href="https://rdrr.io/pkg/webshot/man/install_phantomjs.html">webshot::install_phantomjs()</a></code>.</p>
<!-- ======================================================= -->
</div>
</div>
</div>
<div id="rstudio" class="section level2" number="3.5">
<h2>
<span class="header-section-number">3.5</span> RStudio<a class="anchor" aria-label="anchor" href="#rstudio"><i class="fas fa-link"></i></a>
</h2>
<div id="rstudio-orientation" class="section level3" number="3.5.1">
<h3>
<span class="header-section-number">3.5.1</span> Orientación de RStudio<a class="anchor" aria-label="anchor" href="#rstudio-orientation"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Primero, abre RStudio.</strong> Como sus iconos pueden ser muy similares, asegúrate de que estás abriendo <em>RStudio</em> y no R.</p>
<p>Para que RStudio funcione, también debes tener instalado R en el ordenador (consulta las instrucciones de instalación más arriba).</p>
<p><strong>RStudio</strong> es una interfaz (GUI) para facilitar el uso de <strong>R</strong>. Puedes pensar que R es el motor de un vehículo, que hace el trabajo crucial, y RStudio es la carrocería del vehículo (con asientos, accesorios, etc.) que te ayuda a usar el motor para avanzar. Puedes ver la hoja de trucos completa de la interfaz de usuario de RStudio (PDF) <a href="https://www.rstudio.com/wp-content/uploads/2016/01/rstudio-IDE-cheatsheet.pdf">aquí</a></p>
<p>Por defecto, RStudio muestra cuatro paneles rectangulares.</p>
<div class="inline-figure"><img src="images/RStudio_overview.png" width="100%" style="display: block; margin: auto;"></div>
<p><span style="color: black;"><strong><em>CONSEJO:</em></strong> Si tu RStudio sólo muestra un panel izquierdo es porque aún no tiene ningún script abierto.</span></p>
<p><strong>El panel Source</strong></p>
<p>Este panel de código Fuente u origen, por defecto en la parte superior izquierda, es un espacio para editar, ejecutar y guardar tus <a href="r-basics.html#scripts">scripts</a>. Los scripts contienen los comandos que desea ejecutar. Este panel también puede mostrar conjuntos de datos (data frames) para su visualización.</p>
<p>Para los usuarios de Stata, este panel es similar a las ventanas de Do-file y del Editor de Datos.</p>
<p><strong>El panel Console</strong></p>
<p>La consola de R es el hogar del “motor” de R es, por defecto, el panel izquierdo o inferior izquierdo en R Studio. Aquí es donde se ejecutan realmente los comandos y aparecen las salidas no gráficas y los mensajes de error/advertencia. Puedes introducir y ejecutar directamente comandos en la Consola de R, pero ten en cuenta que estos comandos no se guardan como cuando se ejecutan comandos desde un script.</p>
<p>Si estás familiarizado con Stata, la consola de R es como la ventana de comandos y también la ventana de resultados.</p>
<p><strong>El panel Environment</strong></p>
<p>Este panel de Entorno, por defecto en la parte superior derecha, se utiliza más a menudo para ver breves resúmenes de los <a href="r-basics.html#objects">objetos</a> en el Entorno R en la sesión actual. Estos objetos pueden incluir conjuntos de datos importados, modificados o creados, parámetros que hayas definido (por ejemplo, una semana epi específica para el análisis), o vectores o listas que hayas definido durante el análisis (por ejemplo, nombres de regiones). Puedes clicar en la flecha situada junto al nombre de un dataframe para ver sus variables.</p>
<p>En Stata, esto es muy similar a la ventana del Gestor de Variables.</p>
<p>Este panel también contiene <em>History</em> donde puede ver los comandos ejecutados anteriormente. También tiene una pestaña “Tutorial” donde puedes completar tutoriales interactivos de R si tienes el paquete <strong>learnr</strong> instalado. También tiene una pestaña de “Conexiones” para las conexiones externas, y puede tener un panel “Git” si decides interactuar con Github.</p>
<p><strong>Panel Files, Plots, Packages, Help, Viewer</strong> Este panel inferior derecho incluye varias pestañas importantes. La pestaña Files (Archivos) permite navegar por las carpetas y puede utilizarse para abrir o eliminar archivos. En la pestaña Plots (Gráficos), se mostrarán todos los gráficos, incluyendo los mapas. Las salidas interactivas o HTML se mostrarán en la pestaña Viewer (Visor). El panel Packages (Paquetes) permite ver, instalar, actualizar, eliminar, cargar/descargar paquetes de R y ver qué versión del paquete tiene. En la <a href="r-basics.html#packages">sección de paquetes</a> más abajo se puede aprender más sobre los paquetes. Por último, en el panel de Ayuda (Help) se mostrará la documentación y los archivos de ayuda.</p>
<p>Este panel contiene los equivalentes en Stata de las ventanas Plots Manager y Project Manager.</p>
</div>
<div id="rstudio-settings" class="section level3" number="3.5.2">
<h3>
<span class="header-section-number">3.5.2</span> Configuración de RStudio<a class="anchor" aria-label="anchor" href="#rstudio-settings"><i class="fas fa-link"></i></a>
</h3>
<p>Cambia la configuración y la apariencia de RStudio en el menú desplegable <em>Tools (Herramientas)</em>, seleccionando <em>Global Options (Opciones globales)</em>. Allí puede cambiar la configuración por defecto, incluyendo la apariencia/color de fondo.</p>
<p><img src="images/RStudio_tools_options_1.png" width="50%"><img src="images/RStudio_tools_options.png" width="50%"></p>
<p><strong>Reiniciar</strong></p>
<p>Si se cuelga R, se puede reiniciar yendo al menú Sesión y clicando en “Restart R” (Reiniciar R)". Esto evita la molestia de cerrar y abrir RStudio. Al hacer esto, se eliminará todo el entorno de esa sesión de R.</p>
</div>
<div id="keyboard-shortcuts" class="section level3" number="3.5.3">
<h3>
<span class="header-section-number">3.5.3</span> Atajos de teclado<a class="anchor" aria-label="anchor" href="#keyboard-shortcuts"><i class="fas fa-link"></i></a>
</h3>
<p>Algunos atajos de teclado muy útiles están abajo. Se pueden ver todos los atajos de teclado para Windows, Max y Linux en la segunda página de esta <a href="https://www.rstudio.com/wp-content/uploads/2016/01/rstudio-IDE-cheatsheet.pdf">hoja de trucos de la interfaz de usuario</a> de RStudio.</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="24%">
<col width="21%">
<col width="54%">
</colgroup>
<thead><tr class="header">
<th>Windows/Linux</th>
<th>Mac</th>
<th>Acción</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Esc</td>
<td>Esc</td>
<td>Interrumpir el comando actual (útil si accidentalmente ejecutó un comando incompleto y no puede evitar ver “+” en la consola de R)</td>
</tr>
<tr class="even">
<td>Ctrl+s</td>
<td>Cmd+s</td>
<td>Guardar (script)</td>
</tr>
<tr class="odd">
<td>Tab</td>
<td>Tab</td>
<td>Autocompletar</td>
</tr>
<tr class="even">
<td>Ctrl + Enter</td>
<td>Cmd + Enter</td>
<td>Ejecutar la(s) línea(s) de código actual(es)</td>
</tr>
<tr class="odd">
<td>Ctrl + Mayús + C</td>
<td>Cmd + Shift + c</td>
<td>Comentar/descomentar las líneas resaltadas</td>
</tr>
<tr class="even">
<td>Alt + *</td>
<td>Opción + *</td>
<td>Insertar &lt;-</td>
</tr>
<tr class="odd">
<td>Ctrl + Shift + m</td>
<td>Cmd + Shift + m</td>
<td>Insertar %&gt;%</td>
</tr>
<tr class="even">
<td>Ctrl + l</td>
<td>Cmd + l</td>
<td>Limpiar la consola de R</td>
</tr>
<tr class="odd">
<td>Ctrl + Alt + b</td>
<td>Cmd + Opción + b</td>
<td>Ejecutar desde el inicio hasta la línea actual</td>
</tr>
<tr class="even">
<td>Ctrl + Alt + t</td>
<td>Cmd + Opción + t</td>
<td>Ejecutar la sección de código actual (R Markdown)</td>
</tr>
<tr class="odd">
<td>Ctrl + Alt + i</td>
<td>Cmd + Shift + r</td>
<td>Insertar un trozo (chunk) de código (en R Markdown)</td>
</tr>
<tr class="even">
<td>Ctrl + Alt + c</td>
<td>Cmd + Opción + c</td>
<td>Ejecutar el código chunk actual (R Markdown)</td>
</tr>
<tr class="odd">
<td>flechas arriba/abajo en la consola R</td>
<td>En el mismo</td>
<td>Recorrer los comandos ejecutados recientemente</td>
</tr>
<tr class="even">
<td>Shift + flechas arriba/abajo en el script</td>
<td>En el mismo</td>
<td>Seleccionar varias líneas de código</td>
</tr>
<tr class="odd">
<td>Ctrl + f</td>
<td>Cmd + f</td>
<td>Buscar y reemplazar en el script actual</td>
</tr>
<tr class="even">
<td>Ctrl + Mayús + f</td>
<td>Cmd + Shift + f</td>
<td>Buscar en archivos (buscar/reemplazar en muchos scripts)</td>
</tr>
<tr class="odd">
<td>Alt + l</td>
<td>Cmd + Opción + l</td>
<td>Plegar el código seleccionado</td>
</tr>
<tr class="even">
<td>Shift + Alt + l</td>
<td>Cmd + Shift + Opción+l Desplegar el código seleccionado</td>
<td></td>
</tr>
</tbody>
</table></div>
<p><span style="color: darkgreen;"><strong><em>CONSEJO:</em></strong> Utiliza la tecla Tab cuando escribas para activar la función de autocompletar de RStudio. Esto puede evitar errores de ortografía. Pulsa el tabulador mientras escribes para que aparezca un menú desplegable de posibles funciones y objetos, basándose en lo que escrito hasta ese momento.</span></p>
<!-- ======================================================= -->
</div>
</div>
<div id="functions" class="section level2" number="3.6">
<h2>
<span class="header-section-number">3.6</span> Funciones<a class="anchor" aria-label="anchor" href="#functions"><i class="fas fa-link"></i></a>
</h2>
<p>Las funciones son la pieza principal en el uso de R. Las funciones son la forma de realizar tareas y operaciones. Muchas vienen instaladas con R, mientras muchas otras están disponibles para su descarga en <em>paquetes</em> (explicados en la sección de <a href="r-basics.html#packages">paquetes</a>), ¡E incluso, puedes escribir tus propias funciones personalizadas.</p>
<p>Esta sección básica sobre las funciones explica:</p>
<ul>
<li>Qué es una función y cómo funciona</li>
<li>Qué son los <em>argumentos</em> de una función</li>
<li>Cómo obtener ayuda para entender una función</li>
</ul>
<p><em>Una nota rápida sobre la sintaxis:</em> En este manual, las funciones se escriben en código-texto con paréntesis abiertos, así: <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code>. Como se explica en la sección de <a href="r-basics.html#packages">paquetes</a>, las funciones se descargan dentro de <em>los paquetes</em>. En este manual, los nombres de los paquetes se escriben en <strong>negrita</strong>, como <strong>dplyr</strong>. A veces en el código de ejemplo puede ver el nombre de la función vinculado explícitamente al nombre de su paquete con dos dos puntos (::) como: <code><a href="https://dplyr.tidyverse.org/reference/filter.html">dplyr::filter()</a></code>. El propósito de esta vinculación se explica en la sección de paquetes.</p>
<!-- ======================================================= -->
<div id="simple-functions" class="section level3" number="3.6.1">
<h3>
<span class="header-section-number">3.6.1</span> Funciones simples<a class="anchor" aria-label="anchor" href="#simple-functions"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Una función es como una máquina que recibe entradas, realiza alguna acción con esas entradas y produce una salida.</strong> El resultado depende de la función.</p>
<p><strong>Las funciones suelen operar sobre algún objeto colocado dentro de los paréntesis de la función</strong>. Por ejemplo, la función <code><a href="https://rdrr.io/r/base/MathFun.html">sqrt()</a></code> calcula la raíz cuadrada de un número:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fl">49</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<p>El objeto proporcionado a una función también puede ser una columna de unos datos (véase la sección <a href="r-basics.html#objects">Objetos</a> para conocer todos los tipos de objetos). Dado que R puede almacenar múltiples conjuntos de datos, tendrá que especificar tanto el set de datos como la columna. Una forma de hacerlo es utilizar la notación <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> para vincular el nombre de los datos y el nombre de la columna (<code>dataset$column</code>). En el siguiente ejemplo, la función summary() se aplica a la columna numérica <code>age</code> en los datos <code>linelist</code>, y la salida es un resumen de los valores numéricos y faltantes de la columna.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Muestra estadísticas resumen de la columna 'age' del dataset 'linelist'</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
##    0.00    6.00   13.00   16.07   23.00   84.00      86</code></pre>
<p><span style="color: black;"><strong><em>NOTA:</em></strong> Entre bastidores, una función representa un código adicional complejo que ha sido envuelto para el usuario en un comando sencillo.</span></p>
<!-- ======================================================= -->
</div>
<div id="functions-with-multiple-arguments" class="section level3" number="3.6.2">
<h3>
<span class="header-section-number">3.6.2</span> Functions with multiple arguments<a class="anchor" aria-label="anchor" href="#functions-with-multiple-arguments"><i class="fas fa-link"></i></a>
</h3>
<p>Las funciones suelen pedir varias entradas, llamadas <strong><em>argumentos</em></strong>, situadas dentro del paréntesis de la función, normalmente separadas por comas.</p>
<ul>
<li>Algunos argumentos son necesarios para que la función funcione correctamente, mientras otros son opcionales</li>
<li>Los argumentos opcionales tienen una configuración por defecto</li>
<li>Los argumentos pueden tomar caracteres, números, lógica (TRUE/FALSE) y otras entradas</li>
</ul>
<p>He aquí una divertida función ficticia, llamada <code>oven_bake()</code>, como ejemplo de una función típica (hacer en el horno). Toma un objeto de entrada (“input”) (por ejemplo, una base de datos o en este ejemplo “masa”) y realiza operaciones en él según lo especificado por los argumentos adicionales (<code>minutes =</code> y <code>temperature =</code>). La salida (“output”) puede ir a la consola, o guardarse como un objeto utilizando el operador de asignación <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>.</p>
<div class="inline-figure"><img src="images/Function_Bread_Example.png" width="75%" style="display: block; margin: auto;"></div>
<p><strong>En un ejemplo más realista</strong>, el comando <code>age_pyramid()</code> que aparece a continuación produce un gráfico de pirámide de edad basado en grupos de edad definidos y una columna de división binaria, como <code>gender</code>. La función recibe tres argumentos dentro de los paréntesis, separados por comas. Los valores suministrados a los argumentos establecen <code>linelist</code> como los datos (dataframe) a utilizar, <code>age_cat5</code> como la columna a contar, y <code>gender</code> como la columna binaria a utilizar para dividir la pirámide por color según género.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Crea una pirámide de edad </span>
<span class="fu">age_pyramid</span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span>, age_group <span class="op">=</span> <span class="st">"age_cat5"</span>, split_by <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-28-1.png" width="75%" height="75%"></div>
<p>El comando anterior puede escribirse de forma equivalente a la de más abajo, con un estilo más largo con una nueva línea para cada argumento. Este estilo puede ser más fácil de leer, y más fácil de escribir “comentarios” con <code>#</code> para explicar cada segmento de código (¡comentar en el código es considerado una buena práctica!). Para ejecutar este comando más largo puedes seleccionar todo el texto y clicar en “Ejecutar”, o simplemente colocar el cursor en la primera línea y luego clicar las teclas Ctrl y Enter simultáneamente.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create an age pyramid</span>
<span class="fu">age_pyramid</span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">linelist</span>,        <span class="co"># usa los datos de linelist</span>
  age_group <span class="op">=</span> <span class="st">"age_cat5"</span>, <span class="co"># especifica la columna para los grupos de edad</span>
  split_by <span class="op">=</span> <span class="st">"gender"</span>     <span class="co"># usa la columna gender para los dos lados de la pirámide</span>
  <span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-29-1.png" width="75%" height="75%"></div>
<p>No es necesario especificar la primera mitad de una asignación de argumentos (por ejemplo, <code>data =</code>) si los argumentos se escriben en su orden específico (especificado en la documentación de la función). El código siguiente produce exactamente la misma pirámide que la anterior, porque la función espera ese orden de los argumentos: conjunto de datos, la variable para <code>age_group, y la variable para</code>split_by` .</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Esta orden produce exactamente el mismo gráfico que la anterior</span>
<span class="fu">age_pyramid</span><span class="op">(</span><span class="va">linelist</span>, <span class="st">"age_cat5"</span>, <span class="st">"gender"</span><span class="op">)</span></code></pre></div>
<p><strong>Un comando <code>age_pyramid()</code> más complejo podría incluir argumentos <em>opcionales</em> para:</strong></p>
<ul>
<li>Mostrar proporciones en lugar de recuentos (estableciendo <code>proportional = TRUE</code> cuando el valor por defecto es <code>FALSE</code>)</li>
<li>Especificar los dos colores a utilizar (<code>pal =</code> es la abreviatura de “paleta” y se suministra con un vector de dos nombres de color. Para saber cómo se hace un vector con la función <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> puedes consultar la página de <a href="#objectstructure">objetos</a> .</li>
</ul>
<p><span style="color: black;"><strong><em>NOTA:</em></strong> En los argumentos en los que se especifican ambas partes del argumento (por ejemplo, <code>proporcional = TRUE</code>), no importa el orden de estos argumentos.</span></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">age_pyramid</span><span class="op">(</span>
  <span class="va">linelist</span>,                    <span class="co"># usa los casos de linelist</span>
  <span class="st">"age_cat5"</span>,                  <span class="co"># columna de los grupos de edad</span>
  <span class="st">"gender"</span>,                    <span class="co"># dividido por género</span>
  proportional <span class="op">=</span> <span class="cn">TRUE</span>,         <span class="co"># porcentajes en vez de números absolutos</span>
  pal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"orange"</span>, <span class="st">"purple"</span><span class="op">)</span>  <span class="co"># colores</span>
  <span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="_main_files/figure-html/unnamed-chunk-30-1.png" width="75%" height="75%"></div>
<!-- ======================================================= -->
</div>
<div id="writing-functions" class="section level3" number="3.6.3">
<h3>
<span class="header-section-number">3.6.3</span> Escribir funciones<a class="anchor" aria-label="anchor" href="#writing-functions"><i class="fas fa-link"></i></a>
</h3>
<p>R es un lenguaje orientado a las funciones, por lo que deberías sentirte capacitado para escribir tus propias funciones. La creación de funciones aporta varias ventajas:</p>
<ul>
<li>Facilitar la programación modular, es decir, la separación del código en partes independientes y manejables.</li>
<li>Sustituye el repetitivo copiar y pegar, que puede dar lugar a errores</li>
<li>Dar a las piezas de código nombres fáciles de recordar</li>
</ul>
<p>En la página <a href="writing-functions-1.html#writing-functions-1">Escribir funciones</a> se trata en profundidad cómo escribir funciones.</p>
<!-- A function is given a name and defined with the assignment operator `<-` to a special **base** R function called `function()`. Within the parentheses, the arguments that the function will accept are defined. This is followed by curly brackets `{ }`, within which the actual code of the function is written.     -->
<!-- The arguments should be provided in the syntax `argument = default`, separated by commas.   -->
<!-- Here is an example where we create a function `staff_calc()` to serve as a staffing calculator for COVID-19 case investigation and contact tracing calls.   -->
<!-- The arguments (inputs) and their default values will be:   -->
<!-- * `daily_cases = NULL` The number of new COVID-19 cases per day   -->
<!-- * `contacts_each = 5` The number contacts enumerated for each case   -->
<!-- * `time_case = 0.5`  Number of hours to complete a case investigaton by phone   -->
<!-- * `time_contact = 0.25`  Number of hours to complete a contact follow-up by phone   -->
<!-- * `time_day = 8` The number of hours one staff works per day   -->
<!-- Below, the function is created. The code ends with the special function `return()`, which is what the function produces.    -->
<!-- ```{r message=FALSE, warning=FALSE, out.width = "75%", out.height="75%"} -->
<!-- staff_calc <- function(daily_cases = NULL, contacts_each = 5, -->
<!--                        time_case = 0.5, time_contact = 0.25, time_day = 8){ -->
<!--   # Define total daily hours for calling cases -->
<!--   case_hours <- daily_cases * time_case  -->
<!--   # Define total daily hours for calling contacts -->
<!--   contact_hours <- daily_cases * contacts_each * time_contact -->
<!--   # Calculate number of staff required -->
<!--   staff_required <- (case_hours + contact_hours)/time_day -->
<!--   return(staff_required) -->
<!-- } -->
<!-- ``` -->
<!-- Once this code is run, the function will be defined and will appear in the R Environment. We can run the function. Below all the default values are used and the `daily_cases = ` is set to 150.   -->
<!-- There are many other nuances to understand when writing functions, as discussed in the page [Writing functions].   -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</div>
</div>
<div id="packages" class="section level2" number="3.7">
<h2>
<span class="header-section-number">3.7</span> Paquetes<a class="anchor" aria-label="anchor" href="#packages"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Los paquetes contienen funciones.</strong></p>
<p>Un paquete de R es un conjunto de código y documentación que se puede compartir y que contiene funciones predefinidas. Los usuarios de la comunidad R desarrollan paquetes todo el tiempo atendiendo a problemas específicos, ¡es probable que alguno pueda ayudarte en tu trabajo! En tu uso de R instalarás y utilizarás cientos de paquetes.</p>
<p>En la instalación, R contiene paquetes <strong>“base”</strong> y funciones que realizan tareas elementales comunes. Pero muchos usuarios de R crean funciones especializadas, que son verificadas por la comunidad de R y que puedes descargar como <strong>paquete</strong> para tu propio uso. En este manual, los nombres de los paquetes se escriben en <strong>negrita</strong>. Uno de los aspectos más desafiantes de R es que a menudo hay muchas funciones o paquetes donde elegir para una tarea determinada.</p>
<div id="install-and-load" class="section level3" number="3.7.1">
<h3>
<span class="header-section-number">3.7.1</span> Instalar y cargar<a class="anchor" aria-label="anchor" href="#install-and-load"><i class="fas fa-link"></i></a>
</h3>
<p><em>Las funciones</em> están contenidas en <strong>paquetes</strong> que pueden descargarse (“instalarse”) en tu ordenador desde Internet. Una vez descargado un paquete, se almacena en tu “librería”. Puedes acceder a las funciones que contiene durante una sesión de R “cargando” el paquete.</p>
<p><em>Piensa en R como tu librería personal</em>: Cuando se descarga un paquete, tu librería adquiere un nuevo libro de funciones, pero cada vez que quieras utilizar una función de ese libro, debes tomar prestado (“cargar”) ese libro de tu librería.</p>
<p>En resumen: para utilizar las funciones disponibles en un paquete de R, hay que realizar dos pasos:</p>
<ol style="list-style-type: decimal">
<li>El paquete debe ser <strong>instalado</strong> (una vez), <em>y</em>
</li>
<li>El paquete debe ser <strong>cargado</strong> (cada sesión de R)</li>
</ol>
<div id="tu-librería" class="section level4 unnumbered">
<h4>Tu librería<a class="anchor" aria-label="anchor" href="#tu-librer%C3%ADa"><i class="fas fa-link"></i></a>
</h4>
<p>Tu “librería” es en realidad una carpeta en tu ordenador, que contiene una carpeta para cada paquete que se ha instalado. Averigua dónde está instalado R en tu ordenador, y busca una carpeta llamada “win-library”. Por ejemplo: R-library\4.0 (la 4.0 es la versión de R - tendrá una librería diferente para cada versión de R que haya descargado).</p>
<p>Puedes imprimir la ruta del archivo de tu librería introduciendo .libPaths() (paréntesis vacíos). Esto resulta especialmente importante si se trabaja con <a href="r-on-network-drives.html#r-on-network-drives">R en unidades de red</a>.</p>
</div>
<div id="instalar-desde-cran" class="section level4 unnumbered">
<h4>Instalar desde CRAN<a class="anchor" aria-label="anchor" href="#instalar-desde-cran"><i class="fas fa-link"></i></a>
</h4>
<p>Lo habitual es que los usuarios de R descarguen paquetes de CRAN. CRAN (Comprehensive R Archive Network) es un almacén público online de paquetes de R que han sido publicados por los miembros de la comunidad R.</p>
<p>¿Te preocupan los virus y la seguridad al descargar un paquete de CRAN? Lee <a href="https://support.rstudio.com/hc/en-us/articles/360042593974-R-and-R-Package-Security">este artículo</a> sobre el tema.</p>
</div>
<div id="cómo-instalar-y-cargar" class="section level4 unnumbered">
<h4>Cómo instalar y cargar<a class="anchor" aria-label="anchor" href="#c%C3%B3mo-instalar-y-cargar"><i class="fas fa-link"></i></a>
</h4>
<p>En este manual, sugerimos utilizar el paquete <strong>pacman</strong> (abreviatura de “packages manager”). Ofrece una interesante función <code>p_load()</code> que instalará un paquete si es necesario <em>y</em> lo cargará para su uso en la sesión actual de R.</p>
<p>La sintaxis es bastante sencilla. Sólo hay que listar los nombres de los paquetes dentro de los paréntesis de <code>p_load()</code>, separados por comas. Este comando instalará los paquetes <strong>rio</strong>, <strong>tidyverse</strong> y <strong>here</strong> si aún no están instalados, y los cargará para su uso. Esto hace que el enfoque de <code>p_load()</code> sea conveniente y conciso si se comparten scripts con otros. Ten en cuenta que los nombres de los paquetes distinguen entre mayúsculas y minúsculas.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Instala (si es necesario) y carga los paquetes a utilizar</span>
<span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">rio</span>, <span class="va">tidyverse</span>, <span class="va">here</span><span class="op">)</span></code></pre></div>
<p>Fíjate que hemos utilizado la sintaxis <code><a href="https://rdrr.io/pkg/pacman/man/p_load.html">pacman::p_load()</a></code> que escribe explícitamente el nombre del paquete (<strong>pacman</strong>) antes del nombre de la función (<code>p_load()</code>), conectado por dos dos puntos <code><a href="https://rdrr.io/r/base/ns-dblcolon.html">::</a></code>. Esta sintaxis es útil porque también carga el paquete <strong>pacman</strong> (suponiendo que ya esté instalado).</p>
<p>Hay funciones de R <strong>base</strong> alternativas que verás a menudo. La función de R <strong>base</strong> para instalar un paquete es <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code>. El nombre del paquete a instalar debe proporcionarse entre paréntesis <em>entre comillas</em>. Si deseas instalar varios paquetes en un solo comando, deben ser listados dentro de un vector de caracteres <code><a href="https://rdrr.io/r/base/c.html">c()</a></code>.</p>
<p>Nota: este comando <em>instala</em> un paquete, pero <em>no</em> lo carga para utilizarlo en la sesión actual.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># instala un solo paquete con R base</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span>

<span class="co"># instala múltiples paquetes con R base</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"tidyverse"</span>, <span class="st">"rio"</span>, <span class="st">"here"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>La instalación también se puede realizar clicando en el panel “Packages” de RStudio, luego en “Install” y buscando el nombre del paquete deseado.</p>
<p>La función alternativa en para <strong>cargar</strong> un paquete (después de haberlo instalado) es <code><a href="https://rdrr.io/r/base/library.html">library()</a></code>. Sólo puedes cargar un paquete a la vez (otra razón para usar <code>p_load()</code>). Se puede escribir el nombre del paquete con o sin comillas.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># carga los paqutes para usarlos, con R base</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leeper/rio">rio</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/">here</a></span><span class="op">)</span></code></pre></div>
<p>Para comprobar si un paquete está instalado y/o cargado, puedes mirar en la pestaña de Packages de RStudio. Si el paquete está instalado, se muestra allí con el número de versión. Si su casilla está marcada, está cargado para la sesión actual.</p>
<p><strong>Instalar desde Github</strong></p>
<p>A veces, necesitas instalar un paquete que aún no está disponible en CRAN. O tal vez el paquete está disponible en CRAN pero quieres la <em>versión de desarrollo</em> con nuevas características que aún no se ofrecen en la versión más estable publicada en CRAN. Éstas suelen estar alojadas en el sitio web <a href="https://github.com/">github.com</a> en un “repositorio” de código gratuito y de acceso público. Lee más sobre Github en la página del manual sobre <a href="#version-control-and-collaboration-with-">Control de versiones y colaboración con Git y Github</a>.</p>
<p>Para descargar los paquetes de R desde Github, puedes utilizar la función <code>p_load_gh()</code> de <strong>pacman</strong>, que instalará el paquete si es necesario, y lo cargará para utilizarlo en tu sesión actual de R. Las alternativas de instalación incluyen el uso de los paquetes <strong>remotes</strong> o <strong>devtools</strong>. Puedes leer más sobre todas las funciones de <strong>pacman</strong> en la <a href="https://cran.r-project.org/web/packages/pacman/pacman.pdf">documentación del paquete</a>.</p>
<p>Para instalar desde Github, tienes que proporcionar más información. Debe proporcionar:</p>
<ol style="list-style-type: decimal">
<li>El ID de Github del propietario del repositorio</li>
<li>El nombre del repositorio que contiene el paquete</li>
<li><em>(opcional) El nombre de la “rama” (versión de desarrollo específica) que quieras descargar</em></li>
</ol>
<p>En los ejemplos siguientes, la primera palabra entre comillas es el ID de Github del propietario del repositorio, después de la barra es el nombre del repositorio (el nombre del paquete).</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># instalar/cargar el paquete epicontacts desde su repositorio de Github</span>
<span class="fu">p_load_gh</span><span class="op">(</span><span class="st">"reconhub/epicontacts"</span><span class="op">)</span></code></pre></div>
<p>Si quieres instalar desde una “rama” (versión) distinta de la rama principal, añade el nombre de la rama tras una “@”, después del nombre del repositorio.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># instala el paquete epicontacts de la rama "timeline" desde Github</span>
<span class="fu">p_load_gh</span><span class="op">(</span><span class="st">"reconhub/epicontacts@timeline"</span><span class="op">)</span></code></pre></div>
<p>Si no hay diferencia entre la versión de Github y la versión en tu ordenador, no se realizará ninguna acción. Puedes “forzar” una reinstalación usando <code>p_load_current_gh()</code> con el argumento <code>update = TRUE</code>. Puedes leer más sobre <strong>pacman</strong> en esta <a href="http://trinker.github.io/pacman/vignettes/Introduction_to_pacman.html">viñeta online</a></p>
<p><strong>Instalar desde ZIP o TAR</strong></p>
<p>Puedes instalar el paquete desde una URL:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">packageurl</span> <span class="op">&lt;-</span> <span class="st">"https://cran.r-project.org/src/contrib/Archive/dsr/dsr_0.2.2.tar.gz"</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="va">packageurl</span>, repos<span class="op">=</span><span class="cn">NULL</span>, type<span class="op">=</span><span class="st">"source"</span><span class="op">)</span></code></pre></div>
<p>O bien, descargarlo en tu ordenador en un archivo comprimido:</p>
<p>Opción 1: utilizar <code>install_local()</code> del paquete <strong>remotes</strong></p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_local.html">install_local</a></span><span class="op">(</span><span class="st">"~/Downloads/dplyr-master.zip"</span><span class="op">)</span></code></pre></div>
<p>Opción 2: utilizando <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code> desde , proporcionando la ruta del archivo ZIP y estableciendo <code>type = "source"</code> y <code>repos = NULL</code>.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"~/Downloads/dplyr-master.zip"</span>, repos<span class="op">=</span><span class="cn">NULL</span>, type<span class="op">=</span><span class="st">"source"</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="code-syntax" class="section level3" number="3.7.2">
<h3>
<span class="header-section-number">3.7.2</span> Sintaxis del código<a class="anchor" aria-label="anchor" href="#code-syntax"><i class="fas fa-link"></i></a>
</h3>
<p>Para mayor claridad en este manual, las funciones van a veces precedidas por el nombre de su paquete utilizando el símbolo <code><a href="https://rdrr.io/r/base/ns-dblcolon.html">::</a></code> de la siguiente manera: <code>nombre_del_paquete::nombre_de_la_función()</code></p>
<p>Una vez cargado un paquete para una sesión, este estilo explícito no es necesario. Se puede utilizar simplemente <code>nombre_de_la_funcion()</code>. Sin embargo, escribir el nombre del paquete es útil cuando el nombre de una función es común y puede existir en varios paquetes (por ejemplo, <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>). Escribir el nombre del paquete también cargará el paquete si no está todavía cargado.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Este comando usa el paquete "rio" y su función "import()" para importar un dataset</span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"linelist.xlsx"</span>, which <span class="op">=</span> <span class="st">"Sheet1"</span><span class="op">)</span></code></pre></div>
</div>
<div id="function-help" class="section level3" number="3.7.3">
<h3>
<span class="header-section-number">3.7.3</span> Ayuda a la función<a class="anchor" aria-label="anchor" href="#function-help"><i class="fas fa-link"></i></a>
</h3>
<p>Para leer más sobre una función, se puede buscar en la pestaña Ayuda de la parte inferior derecha de RStudio. También se puede ejecutar un comando como <code>?nombre_de_la_funcion</code> (escribe el nombre de la función después de un signo de cerrar interrogación) y aparecerá la página de ayuda en la pestaña de ayuda. Por último, intenta buscar otros recursos en Internet.</p>
</div>
<div id="update-packages" class="section level3" number="3.7.4">
<h3>
<span class="header-section-number">3.7.4</span> Actualizar paquetes<a class="anchor" aria-label="anchor" href="#update-packages"><i class="fas fa-link"></i></a>
</h3>
<p>Puedes actualizar los paquetes reinstalándolos. También puedes clicar en el botón verde “Update” en la pestaña de paquetes de RStudio para ver qué paquetes tienen nuevas versiones para instalar. Ten en cuenta que tu código antiguo puede necesitar ser actualizado si hay una revisión importante en el funcionamiento de una función.</p>
</div>
<div id="delete-packages" class="section level3" number="3.7.5">
<h3>
<span class="header-section-number">3.7.5</span> Eliminar paquetes<a class="anchor" aria-label="anchor" href="#delete-packages"><i class="fas fa-link"></i></a>
</h3>
<p>Utiliza <code>p_delete()</code> de <strong>pacman</strong>, o <code><a href="https://rdrr.io/r/utils/remove.packages.html">remove.packages()</a></code> de <strong>.</strong> Alternativamente, puedes buscar la carpeta que lo contiene en tu librería y borrarla manualmente.</p>
</div>
<div id="dependencies" class="section level3" number="3.7.6">
<h3>
<span class="header-section-number">3.7.6</span> Dependencias<a class="anchor" aria-label="anchor" href="#dependencies"><i class="fas fa-link"></i></a>
</h3>
<p>Los paquetes a menudo dependen de otros paquetes para funcionar. Estos se llaman dependencias. Si una dependencia no está instalada, entonces el paquete que depende de ella también puede no instalarse.</p>
<p>Se pueden ver las dependencias de un paquete con <code>p_depends()</code>, y ver qué paquetes dependen de él con <code>p_depends_reverse()</code></p>
</div>
<div id="masked-functions" class="section level3" number="3.7.7">
<h3>
<span class="header-section-number">3.7.7</span> Funciones enmascaradas<a class="anchor" aria-label="anchor" href="#masked-functions"><i class="fas fa-link"></i></a>
</h3>
<p>No es raro que dos o más paquetes contengan el mismo nombre de función. Por ejemplo, el paquete <strong>dplyr</strong> tiene una función <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code>, pero también la tiene el paquete <strong>stats</strong>. La función <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> por defecto depende del orden en que estos paquetes se cargan por primera vez en la sesión de R - el último será el predeterminado para el comando <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code>.</p>
<p>Puedes comprobar el orden en la Pestaña de Entorno de R Studio - clica en el desplegable de “Global Evironment” (Entorno Global) y mira el orden de los paquetes. Las funciones de los paquetes <em>más bajos</em> en esa lista desplegable enmascararán las funciones del mismo nombre en los paquetes que aparecen más arriba en la lista desplegable. Cuando se carga por primera vez un paquete, R advertirá en la consola si se está produciendo el enmascaramiento, pero esto puede ser fácil de pasar por alto.</p>
<div class="inline-figure"><img src="images/masking_functions.png" width="50%" style="display: block; margin: auto;"></div>
<p>Aquí hay formas de arreglar el enmascaramiento:</p>
<ol style="list-style-type: decimal">
<li>Especifique el nombre del paquete en el comando. Por ejemplo, utiliza <code><a href="https://dplyr.tidyverse.org/reference/filter.html">dplyr::filter()</a></code>
</li>
<li>Reordena el orden de carga de los paquetes (por ejemplo, dentro de <code>p_load()</code>), e <strong>iniciar una nueva sesión de R</strong>
</li>
</ol>
</div>
<div id="detach-unload" class="section level3" number="3.7.8">
<h3>
<span class="header-section-number">3.7.8</span> Descargar<a class="anchor" aria-label="anchor" href="#detach-unload"><i class="fas fa-link"></i></a>
</h3>
<p>Para descargar (detach / unload) un paquete, utiliza este comando, con el nombre correcto del paquete y sólo dos puntos. Ten en cuenta que esto puede no resolver el enmascaramiento.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/detach.html">detach</a></span><span class="op">(</span><span class="va">package</span><span class="op">:</span><span class="va">PACKAGE_NAME_HERE</span>, unload<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div id="install-older-version" class="section level3" number="3.7.9">
<h3>
<span class="header-section-number">3.7.9</span> Instalar una versión anterior<a class="anchor" aria-label="anchor" href="#install-older-version"><i class="fas fa-link"></i></a>
</h3>
<p>Consulta esta <a href="https://support.rstudio.com/hc/en-us/articles/219949047-Installing-older-versions-of-packages">guía</a> para instalar una versión anterior de un paquete concreto.</p>
</div>
<div id="suggested-packages" class="section level3" number="3.7.10">
<h3>
<span class="header-section-number">3.7.10</span> Paquetes recomendados<a class="anchor" aria-label="anchor" href="#suggested-packages"><i class="fas fa-link"></i></a>
</h3>
<p>Consulta la página de <a href="suggested-packages-1.html#suggested-packages-1">Paquetes recomendados</a> para obtener una lista de paquetes que recomendamos para la epidemiología del día a día.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="scripts" class="section level2" number="3.8">
<h2>
<span class="header-section-number">3.8</span> Scripts<a class="anchor" aria-label="anchor" href="#scripts"><i class="fas fa-link"></i></a>
</h2>
<p>Los scripts son una parte fundamental de la programación. Son documentos que contienen comandos (por ejemplo, funciones para crear y modificar datos, imprimir visualizaciones, etc.). Puedes guardar un script y volver a ejecutarlo más tarde. Almacenar y ejecutar tus comandos desde un script tiene muchas ventajas (frente a teclear los comandos uno a uno en la “línea de comandos” de la consola de R):</p>
<ul>
<li>Portabilidad: puedes compartir tu trabajo con otros enviándoles tus scripts</li>
<li>Reproducibilidad: para que tú y los demás sepan exactamente lo que ha hecho</li>
<li>Control de versiones: para que puedas hacer un seguimiento de los cambios realizados por ti mismo o por tus colegas</li>
<li>Comentarios/anotaciones: para explicar a tus compañeros lo que has hecho</li>
</ul>
<div id="Commenting" class="section level3" number="3.8.1">
<h3>
<span class="header-section-number">3.8.1</span> Comentarios<a class="anchor" aria-label="anchor" href="#Commenting"><i class="fas fa-link"></i></a>
</h3>
<p>En un script también puede anotar (“comentar”) alrededor de su código R. Los comentarios son útiles para explicarte a sí mismo y a otros lectores lo que está haciendo. Puedes añadir un comentario escribiendo el símbolo de almohadilla (#) y escribiendo el comentario después de él. El texto comentado aparecerá en un color diferente al del código R.</p>
<p>Cualquier código escrito después de la # no se ejecutará. Por lo tanto, colocar un # antes del código es también una forma útil de bloquear temporalmente una línea de código (“comentar”) si no quieres borrarla). Puedes comentar varias líneas a la vez resaltándolas y clicando Ctrl+Mayús+c (Cmd+Mayús+c en Mac).</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Un comentario puede ser una línea en sí mismo</span>
<span class="co"># importar datos</span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"linelist_raw.xlsx"</span><span class="op">)</span> <span class="op">%&gt;%</span>   <span class="co"># un comentariotambién puede venir después del  código</span>
<span class="co"># filter(age &gt; 50)                          # También se puede utilizar para desactivar / quitar una línea de código</span>
  <span class="fu">count</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<ul>
<li>Comenta <em>lo que</em> haces <em>y <strong>por qué</strong> lo haces</em>.</li>
<li>Divide tu código en secciones lógicas</li>
<li>Acompaña tu código con un texto describiendo paso a paso lo que está haciendo (por ejemplo, pasos numerados)</li>
</ul>
</div>
<div id="Style" class="section level3" number="3.8.2">
<h3>
<span class="header-section-number">3.8.2</span> Estilo<a class="anchor" aria-label="anchor" href="#Style"><i class="fas fa-link"></i></a>
</h3>
<p>It is important to be conscious of your coding style - especially if working on a team. We advocate for the <strong>tidyverse</strong> <a href="https://style.tidyverse.org/">style guide</a>. There are also packages such as <strong>styler</strong> and <strong>lintr</strong> which help you conform to this style.</p>
<p>A few very basic points to make your code readable to others:<br>
* When naming objects, use only lowercase letters, numbers, and underscores <code>_</code>, e.g. <code>my_data</code><br>
* Use frequent spaces, including around operators, e.g. <code>n = 1</code> and <code>age_new &lt;- age_old + 3</code></p>
</div>
<div id="ejemplo-script-example-script" class="section level3" number="3.8.3">
<h3>
<span class="header-section-number">3.8.3</span> Ejemplo Script {example-script}<a class="anchor" aria-label="anchor" href="#ejemplo-script-example-script"><i class="fas fa-link"></i></a>
</h3>
<p>A continuación se muestra un ejemplo de un breve script de R. ¡Recuerda!, cuanto mejor expliques brevemente el código con los comentarios, ¡más gustará a tus colegas!</p>
<div class="inline-figure"><img src="images/example_script.png" width="100%" style="display: block; margin: auto;"></div>
<!-- ======================================================= -->
</div>
<div id="r-markdown" class="section level3 unnumbered">
<h3>R markdown<a class="anchor" aria-label="anchor" href="#r-markdown"><i class="fas fa-link"></i></a>
</h3>
<p>Un script de R markdown es un tipo de script de R en el que el propio script <em>se convierte en</em> un documento de salida (PDF, Word, HTML, Powerpoint, etc.). Se trata de herramientas increíblemente útiles y versátiles que suelen utilizarse para crear informes dinámicos y automatizados. ¡Hasta este sitio web y este manual se han hecho con scripts de R markdown!</p>
<p>Vale la pena señalar que los usuarios principiantes de R también pueden utilizar R Markdown - ¡no te dejes intimidar! Para saber más, consulta el capítulo del manual sobre <a href="#reports-with-r-markdown">Informes con R Markdown</a>.</p>
<!-- ======================================================= -->
</div>
<div id="r-notebooks" class="section level3 unnumbered">
<h3>R notebooks<a class="anchor" aria-label="anchor" href="#r-notebooks"><i class="fas fa-link"></i></a>
</h3>
<p>No hay ninguna diferencia entre escribir en Rmarkdown o R notebook. Sin embargo, la ejecución del documento difiere ligeramente. Consulta este <a href="http://uc-r.github.io/r_notebook">sitio</a> para obtener más detalles.</p>
<!-- ======================================================= -->
</div>
<div id="shiny" class="section level3 unnumbered">
<h3>Shiny<a class="anchor" aria-label="anchor" href="#shiny"><i class="fas fa-link"></i></a>
</h3>
<p>Las aplicaciones/sitios web de Shiny están contenidos en un script, que debe llamarse <code>app.R</code>. Este archivo tiene tres componentes:</p>
<ol style="list-style-type: decimal">
<li>Una interfaz de usuario (ui)</li>
<li>Una función de servidor</li>
<li>Una llamada a la función <code>shinyApp</code>
</li>
</ol>
<p>Consulta la página del manual sobre <a href="dashboards-with-shiny.html#dashboards-with-shiny">Dashboards con Shiny</a>, o este <a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/">Tutorial de Shiny</a></p>
<p><em>Hace tiempo, el archivo anterior se dividía en dos archivos (<code>ui.R</code> y <code>server.R</code>)</em></p>
</div>
<div id="code-folding" class="section level3" number="3.8.4">
<h3>
<span class="header-section-number">3.8.4</span> Plegar código<a class="anchor" aria-label="anchor" href="#code-folding"><i class="fas fa-link"></i></a>
</h3>
<p>Puedes contraer porciones de código para facilitar la lectura del script.</p>
<p>Para ello, crea una cabecera de texto con #, escribe tu cabecera y sigue con al menos 4 guiones (-), almohadillas (#) o iguales (=). Cuando hayas hecho esto, aparecerá una pequeña flecha en el “margen” de la izquierda (junto al número de fila). Puedes clicar en esta flecha y en el código de abajo hasta que la siguiente cabecera se pliegue y aparezca un icono de flecha doble en su lugar.</p>
<p>Para expandir el código, clica de nuevo en la flecha del margen o en el icono de la flecha doble. También hay atajos de teclado como se explica en la <a href="r-basics.html#rstudio">sección de RStudio</a> de esta página.</p>
<p>Al crear cabeceras con #, también activarás el índice de contenidos en la parte inferior del script (véase más abajo) que puedes utilizar para navegar por el script. Se pueden crear subcabeceras añadiendo más símbolos #, por ejemplo # para las primarias, ## para las secundarias y ### para las terciarias.</p>
<p>A continuación se muestran dos versiones de un script de ejemplo. A la izquierda está el original con cabeceras comentadas. A la derecha, se han escrito cuatro guiones después de cada cabecera, haciéndolas plegables. Dos de ellas están plegadas, y se puede ver que la Tabla de Contenidos en la parte inferior muestra cada sección.</p>
<p><img src="images/code_folding1.png" width="50%"><img src="images/code_folding2.png" width="50%"></p>
<p>Otras áreas de código que son automáticamente elegibles para plegarlas son las zonas entre corchetes <code>{ }</code> como las definiciones de funciones o los bloques condicionales (sentencias if else). Puedes leer más sobre el plegado de código en el <a href="https://support.rstudio.com/hc/en-us/articles/200484568-Code-Folding-and-Sections">sitio de</a> RStudio.</p>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</div>
</div>
<div id="directorio-de-trabajo-working_directory" class="section level2" number="3.9">
<h2>
<span class="header-section-number">3.9</span> Directorio de trabajo {working_directory}<a class="anchor" aria-label="anchor" href="#directorio-de-trabajo-working_directory"><i class="fas fa-link"></i></a>
</h2>
<p>El directorio de trabajo (o Working Directory “WD”) es la ubicación de la carpeta raíz utilizada por R para su trabajo - donde R busca y guarda los archivos por defecto. Por defecto, guardará los nuevos archivos y resultados en esta ubicación, y buscará los archivos de datos para importar aquí también.</p>
<p>El directorio de trabajo aparece en texto gris en la parte superior de la consola de RStudio. También puede imprimir el directorio de trabajo actual ejecutando <code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code> (deja los paréntesis vacíos).</p>
<div class="inline-figure"><img src="images/working_directory_1.png" width="100%" style="display: block; margin: auto;"></div>
<div id="recommended-approach" class="section level3" number="3.9.1">
<h3>
<span class="header-section-number">3.9.1</span> Enfoque recomendado<a class="anchor" aria-label="anchor" href="#recommended-approach"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Consulta la página sobre <a href="r-projects.html#r-projects">proyectos de R</a> para obtener detalles sobre nuestro enfoque recomendado para gestionar tu directorio de trabajo.</strong> Una forma común, eficiente y sin problemas de gestionar tu directorio de trabajo y las rutas de los archivos es combinar estos 3 elementos en un flujo de trabajo <a href="r-projects.html#r-projects">orientado a los proyectos de R</a>:</p>
<ol style="list-style-type: decimal">
<li>Un proyecto R para almacenar todos tus archivos (ver página sobre <a href="r-projects.html#r-projects">proyectos R</a>)</li>
<li>El paquete <strong>here</strong> para localizar los archivos (véase la página sobre <a href="import-and-export.html#import-and-export">importación y exportación</a>)</li>
<li>El paquete <strong>rio</strong> para importar/exportar archivos (véase la página sobre <a href="import-and-export.html#import-and-export">importación y exportación</a>)</li>
</ol>
<!-- ======================================================= -->
</div>
<div id="set-by-command" class="section level3" number="3.9.2">
<h3>
<span class="header-section-number">3.9.2</span> Mediante comandos<a class="anchor" aria-label="anchor" href="#set-by-command"><i class="fas fa-link"></i></a>
</h3>
<p>Hasta hace poco, a muchas personas que aprendían R se les enseñaba a comenzar sus scripts con un comando <code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code>. En vez de esto, piensa mejor en un flujo de trabajo <a href="r-projects.html#r-projects">orientado al proyecto R</a> y lee las <a href="https://www.tidyverse.org/blog/2017/12/workflow-vs-script/">razones para no usar setwd()</a>. En resumen, tu trabajo se convierte en algo específico de tu ordenador, las rutas de archivo utilizadas para importar y exportar archivos se vuelven “frágiles”, y esto dificulta gravemente la colaboración y el uso de tu código en cualquier otro ordenador. Hay alternativas fáciles!</p>
<p>Como se ha indicado anteriormente, aunque no recomendamos este enfoque en la mayoría de las circunstancias, puedes utilizar el comando <code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code> con la ruta del archivo de la carpeta deseada entre comillas, por ejemplo:</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="st">"C:/Documents/R Files/My analysis"</span><span class="op">)</span></code></pre></div>
<p><span style="color: red;"><strong><em>PELIGRO:</em></strong> Establecer un directorio de trabajo con <code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code> <em>puede</em> ser “frágil” si la ruta del archivo es específica de un ordenador. En su lugar, utiliza rutas de archivos relativas a un directorio raíz del proyecto R (con el paquete <strong>here</strong>). </span></p>
<!-- ======================================================= -->
</div>
<div id="set-manually" class="section level3" number="3.9.3">
<h3>
<span class="header-section-number">3.9.3</span> Manualmente<a class="anchor" aria-label="anchor" href="#set-manually"><i class="fas fa-link"></i></a>
</h3>
<p>Para establecer el directorio de trabajo manualmente (el equivalente de apuntar y clicar en setwd()), clica en el menú desplegable Session y luego “Set Working Directory” (Establecer el directorio de trabajo) y entonces “Choose Directory” (Elegir el directorio). Esto establecerá el directorio de trabajo para esa sesión específica de R. Nota: si utilizas este enfoque, tendrás que hacerlo manualmente cada vez que abras RStudio.</p>
<!-- ======================================================= -->
</div>
<div id="within-an-R-project" class="section level3" number="3.9.4">
<h3>
<span class="header-section-number">3.9.4</span> Con un proyecto<a class="anchor" aria-label="anchor" href="#within-an-R-project"><i class="fas fa-link"></i></a>
</h3>
<p>Si se utiliza un proyecto R, el directorio de trabajo será por defecto la carpeta raíz del proyecto R que contiene el archivo “.rproj”. Esto se aplicará si clicas en abrir el proyecto en RStudio (el archivo con extensión “.rproj”).</p>
<!-- ======================================================= -->
</div>
<div id="working-directory-in-an-R-markdown" class="section level3" number="3.9.5">
<h3>
<span class="header-section-number">3.9.5</span> Directorio en Rmarkdown<a class="anchor" aria-label="anchor" href="#working-directory-in-an-R-markdown"><i class="fas fa-link"></i></a>
</h3>
<p>En un script de R markdown, el directorio de trabajo por defecto es la carpeta en la que se guarda el archivo Rmarkdown (<code>.Rmd</code>). Si se utiliza un proyecto R y el paquete <strong>here</strong>, esto no se aplica y el directorio de trabajo será <code><a href="https://here.r-lib.org//reference/here.html">here()</a></code> como se explica en la página de <a href="r-projects.html#r-projects">proyectos R</a>.</p>
<p>Si quieres cambiar el directorio de trabajo de un Rmarkdown independiente (no en un proyecto R), si utiliza setwd() sólo se aplicará a ese trozo de código específico. Para hacer el cambio para todos párrafos, edite el trozo de configuración para añadir el parámetro root.dir =, como se indica a continuación:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_knit.html">opts_knit</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>root.dir <span class="op">=</span> <span class="st">'desired/directorypath'</span><span class="op">)</span></code></pre></div>
<p>Es mucho más fácil usar Rmarkdown dentro de un proyecto R y usar el paquete <strong>here</strong>.</p>
<!-- ======================================================= -->
</div>
<div id="providing-file-paths" class="section level3" number="3.9.6">
<h3>
<span class="header-section-number">3.9.6</span> Escribir la ruta completa<a class="anchor" aria-label="anchor" href="#providing-file-paths"><i class="fas fa-link"></i></a>
</h3>
<p>Quizás la fuente más común de frustración para un principiante de R (al menos en una máquina Windows) es escribir una ruta de archivo para importar o exportar datos. Hay una explicación exhaustiva sobre la mejor manera de introducir las rutas de los archivos en la página de <a href="import-and-export.html#import-and-export">importación y exportación</a>, pero aquí hay algunos puntos clave:</p>
<p><strong>Rutas rotas</strong></p>
<p>A continuación se muestra un ejemplo de una ruta de archivo “absoluta” o de “dirección completa”. Es probable que se rompa si se utiliza en otro ordenador. Una excepción es si estás usando una unidad compartida de red.</p>
<pre><code>C:/Nombre de usuario/Documento/Software analítico/R/Proyectos/Análisis2019/datos/Marzo2019.csv</code></pre>
<p><strong>Dirección de la barra</strong></p>
<p><em>Si escribes una ruta de archivo, ten en cuenta la dirección de las barras inclinadas (/).</em> Utiliza barras <em>inclinadas</em> (/) para separar los componentes (“data/provincial.csv”). Para los usuarios de Windows, la forma predeterminada en que se muestran las rutas de los archivos es con barras <em>invertidas</em> () - por lo que tendrás que cambiar la dirección de cada barra. Si utilizas el paquete <strong>here</strong>, tal y como se describe en la página de <a href="r-projects.html#r-projects">proyectos de R,</a> la dirección de la barra no es un problema.</p>
<p><strong>Relative file paths</strong></p>
<p>Generalmente recomendamos proporcionar rutas de archivo “relativas” - es decir, la ruta <em>relativa a</em> la raíz de tu proyecto R. Puedes hacer esto usando el paquete <strong>here</strong> como se explica en la página de <a href="r-projects.html#r-projects">proyectos R</a>. Una ruta de archivo relativa podría ser así:</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Import csv linelist from the data/linelist/clean/ sub-folders of an R project</span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"clean"</span>, <span class="st">"linelists"</span>, <span class="st">"marin_country.csv"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Incluso si se utilizan rutas de archivo relativas dentro de un proyecto R, se pueden utilizar rutas absolutas para importar/exportar datos fuera del proyecto R.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="objects" class="section level2" number="3.10">
<h2>
<span class="header-section-number">3.10</span> Objetos<a class="anchor" aria-label="anchor" href="#objects"><i class="fas fa-link"></i></a>
</h2>
<p>Todo en R es un objeto, y R es un lenguaje “orientado a objetos”. Estas secciones lo explicarán:</p>
<ul>
<li>Cómo crear objetos (<code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>)</li>
<li>Tipos de objetos (por ejemplo, dataframe -conjunto de datos-, vectores…)</li>
<li>Cómo acceder a las subpartes de los objetos (por ejemplo, las variables de unos datos)</li>
<li>Tipos de objetos (por ejemplo, numéricos, lógicos, enteros, dobles, caracteres, factores)</li>
</ul>
<!-- ======================================================= --><div id="everything-is-an-object" class="section level3" number="3.10.1">
<h3>
<span class="header-section-number">3.10.1</span> Todo es un objeto<a class="anchor" aria-label="anchor" href="#everything-is-an-object"><i class="fas fa-link"></i></a>
</h3>
<p><em>Esta sección está adaptada del <a href="https://r4epis.netlify.app/training/r_basics/objects/">proyecto R4Epis</a>.</em> Todo lo que se almacena en R -conjuntos de datos (dataframe), variables, una lista de nombres de pueblos, un número total de población, incluso resultados como gráficos- son <strong>objetos</strong> alos que se <strong>asigna un nombre</strong> y a los que <strong>se puede hacer referencia</strong> en comandos posteriores.</p>
<p>Un objeto existe cuando se le ha asignado un valor (véase la sección de asignación más adelante). Cuando se le asigna un valor, el objeto aparece en el Entorno -Environment- (en el panel superior derecho de RStudio). A partir de ese momento se puede operar con él, manipularlo, cambiarlo y redefinirlo.</p>
<!-- ======================================================= -->
</div>
<div id="definición-de-objetos---defining-objects--" class="section level3" number="3.10.2">
<h3>
<span class="header-section-number">3.10.2</span> Definición de objetos (<code>&lt;-</code>) {#Defining objects (&lt;-)}<a class="anchor" aria-label="anchor" href="#definici%C3%B3n-de-objetos---defining-objects--"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Crea objetos <em>asignándoles un valor</em> con el operador &lt;-.</strong>
Puedes pensar que el operador de asignación <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code> significa: “se define como”. Los comandos de asignación suelen seguir un orden estándar:</p>
<p><strong>nombre_objeto</strong> &lt;- <strong>valor</strong> (o proceso/cálculo que produce un valor)</p>
<p>Por ejemplo, es posible que desees registrar la semana de notificación epidemiológica actual como un objeto para su referencia posteriormente en un código En este ejemplo, el objeto <code>current_week</code> se crea cuando se le asigna el valor <code>"2018-W10"</code> (las comillas hacen que sea un valor de tipo carácter). El objeto <code>current_week</code> aparecerá entonces en el panel de Environment de RStudio (arriba a la derecha) y podrá ser referenciado en comandos posteriores.</p>
<p>Ver los comandos de R y su salida en los cuadros de abajo.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">current_week</span> <span class="op">&lt;-</span> <span class="st">"2018-W10"</span>   <span class="co"># Este comando crea el objeto current_week asignándole un valor</span>
<span class="va">current_week</span>                 <span class="co"># Este comando muestra en la consola el valor actual del objeto current_week</span></code></pre></div>
<pre><code>## [1] "2018-W10"</code></pre>
<p><span style="color: black;"><strong><em>NOTA:</em></strong> Observa que el <code>[1]</code> en la consola de resultados simplemente indica que estás viendo el primer elemento de resultados</span></p>
<p><span style="color: orange;"><strong><em>ATENCIÓN:</em></strong> <strong>El valor de un objeto puede sobrescribirse</strong> en cualquier momento ejecutando un comando de asignación para redefinir su valor. Por lo tanto, el <strong>orden de ejecución de los comandos es muy importante</strong>.</span></p>
<p>El siguiente comando redefinirá el valor de <code>current_week</code>:</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">current_week</span> <span class="op">&lt;-</span> <span class="st">"2018-W51"</span>   <span class="co"># asigna un NUEVO valor al objeto current_week</span>
<span class="va">current_week</span>                 <span class="co"># muestra en la consola el valor actual del objeto current_week</span></code></pre></div>
<pre><code>## [1] "2018-W51"</code></pre>
<p><strong>Signos de igualdad <code><a href="https://rdrr.io/r/base/assignOps.html">=</a></code></strong></p>
<p>También verás signos de igualdad en el código R:</p>
<ul>
<li>Un doble signo de igualdad <code><a href="https://rdrr.io/r/base/Comparison.html">==</a></code> entre dos objetos o valores formula una <em>pregunta lógica</em>: “¿es esto igual a aquello?”.</li>
<li>También verás signos de igualdad dentro de las funciones que se utilizan para especificar los valores de los argumentos de la función (lee sobre ellos en las secciones siguientes), por ejemplo <code><a href="https://rdrr.io/r/base/Extremes.html">max(edad, na.rm = TRUE)</a></code>.</li>
<li>
<em>Puedes</em> utilizar un único signo de igualdad <code><a href="https://rdrr.io/r/base/assignOps.html">=</a></code> en lugar de <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code> para crear y definir objetos, pero se desaconseja hacerlo. Puedes leer por qué se desaconseja <a href="https://renkun.me/2014/01/28/difference-between-assignment-operators-in-r/">aquí</a>.</li>
</ul>
<p><strong>Conjuntos de datos (datasets)</strong></p>
<p>Los conjuntos de datos también son objetos (normalmente “dataframes”) y se les debe asignar un nombre cuando se importan. En el código siguiente, se crea el objeto <code>linelist</code> y se le asigna el valor de un archivo CSV importado con la función <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> del paquete <strong>rio</strong>.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># se crea linelist y se le asigna los valores del archivo CSV importado</span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span><span class="st">"my_linelist.csv"</span><span class="op">)</span></code></pre></div>
<p>Puedes obtener más información sobre la importación y la exportación de datos en la sección sobre <a href="import-and-export.html#import-and-export">importación y exportación</a>.</p>
<p><span style="color: orange;"><strong><em>ATENCIÓN:</em></strong> Una nota rápida sobre la denominación de los objetos:</span></p>
<ul>
<li>Los nombres de los objetos no deben contener espacios, debes utilizar el guión bajo (_) o un punto (.) en lugar de un espacio.</li>
<li>Los nombres de los objetos distinguen entre mayúsculas y minúsculas (lo que significa que Dataset_A es diferente de dataset_A).</li>
<li>Los nombres de los objetos deben empezar por una letra (no pueden empezar por un número como 1, 2 o 3).</li>
</ul>
<p><strong>Resultados</strong></p>
<p>Los resutados, como las tablas y los gráficos proporcionan un ejemplo de cómo las salidas pueden guardarse como objetos, o simplemente mostrarse en la consola sin ser guardadas. Una tabla cruzada de género y resultado utilizando la función <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> de R <strong>base</strong> puede mostrarse directamente en la consola de R (<em>sin guardarse</em>).</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># solamente se muestra en la consola de R</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">gender</span>, <span class="va">linelist</span><span class="op">$</span><span class="va">outcome</span><span class="op">)</span></code></pre></div>
<pre><code>##    
##     Death Recover
##   f  1227     953
##   m  1228     950</code></pre>
<p>Pero la misma tabla puede guardarse como un objeto con nombre. Y luego, opcionalmente, se puede mostrar o imprimir.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># save</span>
<span class="va">gen_out_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">gender</span>, <span class="va">linelist</span><span class="op">$</span><span class="va">outcome</span><span class="op">)</span>

<span class="co"># print</span>
<span class="va">gen_out_table</span></code></pre></div>
<pre><code>##    
##     Death Recover
##   f  1227     953
##   m  1228     950</code></pre>
<p><strong>Columnas</strong></p>
<p>Las columnas de unos datos también son objetos y pueden definirse, sobrescribirse y crearse como se describe a continuación en la sección sobre Columnas.</p>
<p>Puedes utilizar el operador de asignación de R <strong>base</strong> para crear una nueva columna. A continuación, se crea la nueva columna <code>bmi</code> (Índice de masa corporal), y para cada fila el nuevo valor es el resultado de una operación matemática sobre el valor de la fila en las columnas <code>wt_kg</code> y <code>ht_cm</code>.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># crea la columna "bmi" utilizando sintaxis de R base</span>
<span class="va">linelist</span><span class="op">$</span><span class="va">bmi</span> <span class="op">&lt;-</span> <span class="va">linelist</span><span class="op">$</span><span class="va">wt_kg</span> <span class="op">/</span> <span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">ht_cm</span><span class="op">/</span><span class="fl">100</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span></code></pre></div>
<p>Sin embargo, en este manual, hacemos hincapié en un enfoque diferente para definir las columnas, que utiliza la función <code>mutate()</code> del paquete <strong>dplyr</strong> y la <em>canalización</em> con el operador pipe (<code>%&gt;%</code>). La sintaxis es más fácil de leer y hay otras ventajas que se explican en la página sobre <a href="cleaning-data-and-core-functions.html#cleaning-data-and-core-functions">Limpieza de datos y funciones básicas</a>. Puedes leer más sobre la <em>canalización</em> en dicha sección más abajo.</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># crea la columna "bmi" utilizando sintaxis de dplyr</span>
<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>bmi <span class="op">=</span> <span class="va">wt_kg</span> <span class="op">/</span> <span class="op">(</span><span class="va">ht_cm</span><span class="op">/</span><span class="fl">100</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="object-structure" class="section level3" number="3.10.3">
<h3>
<span class="header-section-number">3.10.3</span> Estructura de los objetos<a class="anchor" aria-label="anchor" href="#object-structure"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Los objetos pueden ser un solo dato (por ejemplo, <code>mi_número &lt;- 24</code>), o pueden consistir en datos estructurados.</strong></p>
<p>El gráfico siguiente está tomado de <a href="http://venus.ifca.unican.es/Rintro/dataStruct.html">este tutorial de R en línea</a>. Muestra algunas estructuras de datos comunes y sus nombres. No se incluyen en esta imagen los datos espaciales, de los que se habla en la página de <a href="#gis-basics">fundamentos del SIG</a>.</p>
<div class="inline-figure"><img src="images/R_data_structures.png" width="75%" height="50%" style="display: block; margin: auto;"></div>
<p>En epidemiología (y en particular en epidemiología de campo), <em>lo habitual es</em> encontrar dataframes (conjuntos de datos) y vectores:</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="24%">
<col width="45%">
<col width="30%">
</colgroup>
<thead><tr class="header">
<th>Estructura común</th>
<th>Explicación</th>
<th>Ejemplo</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Vectores</td>
<td>Un contenedor para una secuencia de objetos singulares, todos del mismo tipo (por ejemplo, numérico, carácter).</td>
<td>
<strong>Las variables (columnas) en los dataframes son vectores</strong> (por ejemplo, la columna de edad en años age_years).</td>
</tr>
<tr class="even">
<td>Dataframes</td>
<td>Vectores (por ejemplo, columnas) unidos que tienen todos el mismo número de filas.</td>
<td>
<code>linelist</code> es un dataframe.</td>
</tr>
</tbody>
</table></div>
<p>Ten en cuenta que para crear un vector que “está solo” (no forma parte de un dataframe) se utiliza la función <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> para combinar los diferentes elementos. Por ejemplo, si se crea un vector de colores de la escala de colores del gráfico: <code>vector_de_colores &lt;- c("azul", "rojo2", "naranja", "gris")</code></p>
<!-- ======================================================= -->
</div>
<div id="object_classes" class="section level3" number="3.10.4">
<h3>
<span class="header-section-number">3.10.4</span> Tipos de objeto<a class="anchor" aria-label="anchor" href="#object_classes"><i class="fas fa-link"></i></a>
</h3>
<p>Todos los objetos almacenados en R tienen un <em>tipo (class)</em> que indica a R cómo manejar el objeto. Hay muchos tipos de datos, pero los más comunes son:</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="7%">
<col width="54%">
<col width="37%">
</colgroup>
<thead><tr class="header">
<th>Tipo</th>
<th>Explicación</th>
<th>Ejemplos</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Character</td>
<td>Son textos/palabras/frases <strong>“entre comillas”</strong>. No se pueden realizar operaciones matemáticas con estos objetos.</td>
<td>“Los objetos de carácter están entre comillas”</td>
</tr>
<tr class="even">
<td>Integer</td>
<td>Números <strong>sólo enteros</strong> (sin decimales)</td>
<td>-5, 14, o 2000</td>
</tr>
<tr class="odd">
<td>Numeric</td>
<td>Son números y <strong>pueden incluir decimales</strong>. Si están entre comillas se considerarán de tipo de caracteres.</td>
<td>23.1 o 14</td>
</tr>
<tr class="even">
<td>Factor</td>
<td>Se trata de vectores que tienen un <strong>orden determinado</strong> o jerarquía de valores</td>
<td>Una variable de situación económica con valores ordenados</td>
</tr>
<tr class="odd">
<td>Date</td>
<td>
<strong>Una vez que se le dice a R que ciertos datos son Fechas</strong>, estos datos pueden ser manipulados y mostrados de maneras especiales. Para más información, consulta la página sobre el <a href="working-with-dates.html#working-with-dates-1">trabajo con fechas</a>.</td>
<td>2018-04-12 o 15/3/1954 o miércoles 4 de enero de 1980</td>
</tr>
<tr class="even">
<td>Logical</td>
<td>Los valores deben ser uno de los dos valores especiales TRUE o FALSE (nótese que <strong>no son</strong> “TRUE” y “FALSE” entre comillas)</td>
<td>TRUE o FALSE</td>
</tr>
<tr class="odd">
<td>data.frame</td>
<td>Un dataframe es la forma en que R almacena un ** conjunto de datos típico**. Consiste en vectores (columnas) de datos unidos, que tienen todos el mismo número de observaciones (filas).</td>
<td>El set de datos AJS de ejemplo denominado <code>linelist_raw</code> contiene 68 variables con 300 observaciones (filas) cada una.</td>
</tr>
<tr class="even">
<td>tibble</td>
<td>Los tibbles son una variación de los dataframe, la principal diferencia operativa es que muestran de forma más agradable en la consola (muestran las 10 primeras filas y sólo las columnas que caben en la pantalla)</td>
<td>Cualquier conjunto de datos, lista o matriz puede convertirse en un tibble con <code>as_tibble()</code>
</td>
</tr>
<tr class="odd">
<td>List</td>
<td>Una lista es como un vector, pero contiene otros objetos que pueden ser de otras tipos diferentes</td>
<td>Una lista puede contener un solo número, un dataframe de datos, un vector e incluso otra lista.</td>
</tr>
</tbody>
</table></div>
<p><strong>Puedes comprobar el tipo de un objeto escribiendo su nombre en la función <code><a href="https://rdrr.io/r/base/class.html">class()</a></code></strong>. Nota: puede hacer referencia a una columna específica dentro de unos datos utilizando la notación <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> para separar el nombre de los datos y el nombre de la columna.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span> <span class="co"># debe ser de tipo dataframe o tibble</span></code></pre></div>
<pre><code>## [1] "data.frame"</code></pre>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span> <span class="co"># debe ser de tipo numérico</span></code></pre></div>
<pre><code>## [1] "numeric"</code></pre>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">gender</span><span class="op">)</span> <span class="co"># debe ser de tipo carácter</span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<p>A veces, una columna puede ser convertida automáticamente por R en un tipo diferente. ¡Cuidado con esto! Por ejemplo, si tiene un vector o columna de números, pero se inserta un valor de carácter… toda la columna cambiará al tipo carácter.</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">num_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span> <span class="co"># define vector como todos números</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">num_vector</span><span class="op">)</span>          <span class="co"># el vector es de tipo numérico</span></code></pre></div>
<pre><code>## [1] "numeric"</code></pre>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">num_vector</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"three"</span>   <span class="co"># convierte el tercer elemento en de tipo carácter</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">num_vector</span><span class="op">)</span>          <span class="co"># el vector es ahora de tipo carácter class</span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<p>Un ejemplo común de esto es cuando se manipula unos datos para imprimir una tabla - si se hace una fila de totales y se intenta pegar porcentajes en la misma celda como números (por ejemplo, <code>23 (40%)</code>), toda la columna numérica de arriba se convertirá en carácter y ya no se podrá utilizar para cálculos matemáticos. <strong>A veces, tendrás que convertir objetos o columnas a otro tipo.</strong></p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="21%">
<col width="78%">
</colgroup>
<thead><tr class="header">
<th>Función</th>
<th>Acción</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>as.character()</td>
<td>Convierte al tipo de carácter</td>
</tr>
<tr class="even">
<td>as.numeric()</td>
<td>Convierte al tipo numérico</td>
</tr>
<tr class="odd">
<td>as.integer()</td>
<td>Convierte al tipo entero</td>
</tr>
<tr class="even">
<td>as.date()</td>
<td>Convierte al tipo de fecha - Nota: ver la sección de <a href="#dates">fechas</a> para más detalles</td>
</tr>
<tr class="odd">
<td>factor()</td>
<td>Convierte en factor - Nota: la redefinición del orden de los niveles de valor requiere argumentos adicionales</td>
</tr>
</tbody>
</table></div>
<p>Asimismo, existen funciones de R <strong>base</strong> para comprobar si un objeto ES de un tipo específico, como <code><a href="https://rdrr.io/r/base/numeric.html">is.numeric()</a></code>, <code><a href="https://rdrr.io/r/base/character.html">is.character()</a></code>, <code><a href="https://rdrr.io/r/base/double.html">is.double()</a></code>, <code><a href="https://rdrr.io/r/base/factor.html">is.factor()</a></code>, <code><a href="https://rdrr.io/r/base/integer.html">is.integer()</a></code></p>
<p>Aquí hay <a href="https://swcarpentry.github.io/r-novice-inflammation/13-supp-data-structures/">más material en línea sobre tipos y estructuras de datos en R</a>.</p>
<!-- ======================================================= -->
</div>
<div id="columnsvariables" class="section level3" number="3.10.5">
<h3>
<span class="header-section-number">3.10.5</span> Columnas/Variables (<code>$</code>)<a class="anchor" aria-label="anchor" href="#columnsvariables"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Una columna en un dataframe es técnicamente un “vector” (véase la tabla anterior)</strong> - una serie de valores que deben ser todos del mismo tipo (ya sea carácter, numérico, lógico, etc).</p>
<p>Un vector puede existir independientemente de un dataframe, por ejemplo, un vector de nombres de columnas que se desea incluir como variables explicativas en un modelo. Para crear un vector “independiente”, utiliza la función <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> como se indica a continuación:</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># define el vector con valores de caracteres</span>
<span class="va">explanatory_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gender"</span>, <span class="st">"fever"</span>, <span class="st">"chills"</span>, <span class="st">"cough"</span>, <span class="st">"aches"</span>, <span class="st">"vomit"</span><span class="op">)</span>

<span class="co"># muestra los valores de este vector</span>
<span class="va">explanatory_vars</span></code></pre></div>
<pre><code>## [1] "gender" "fever"  "chills" "cough"  "aches"  "vomit"</code></pre>
<p><strong>Las columnas de un dataframe también son vectores y pueden ser llamadas, referenciadas, extraídas o creadas utilizando el símbolo <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code>.</strong> El símbolo <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> conecta el nombre de la columna con el nombre del dataframe. En este manual, tratamos de utilizar la palabra “columna” en lugar de “variable”.</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Recuperar la longitud del vector age_years</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span> <span class="co"># (age es una columna del dataframe linelist)</span></code></pre></div>
<p>Al escribir el nombre del dataframe seguido de <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> también verá un menú desplegable de todas las columnas del dataframe. Puedes desplazarte por ellas con la tecla de flecha, seleccionar una con la tecla Intro y evitar errores ortográficos.</p>
<div class="inline-figure"><img src="images/Calling_Names.gif" width="100%" style="display: block; margin: auto;"></div>
<p><span style="color: darkgreen;"><strong><em>CONSEJO AVANZADO:</em></strong> Algunos objetos más complejos (por ejemplo, una lista, o un objeto <code>epicontacts</code>) pueden tener múltiples niveles a los que se puede acceder a través de múltiples signos de dólar. Por ejemplo <code>epicontacts$linelist$date_onset</code></span></p>
<!-- ======================================================= -->
</div>
<div id="accessindex-with-brackets" class="section level3" number="3.10.6">
<h3>
<span class="header-section-number">3.10.6</span> Acceso/índice con corchetes (<code>[ ]</code>)<a class="anchor" aria-label="anchor" href="#accessindex-with-brackets"><i class="fas fa-link"></i></a>
</h3>
<p>Es posible que tengas que mirar sólo partes de los objetos, lo que también se llama “indexación”, que a menudo se hace utilizando los corchetes <code>[ ]</code>. El uso de <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> en un dataframe para acceder a una columna también es un tipo de indexación.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="st">"e"</span>, <span class="st">"f"</span><span class="op">)</span>  <span class="co"># definir el vector</span>
<span class="va">my_vector</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span>                                  <span class="co"># mostrar el 5º elemento</span></code></pre></div>
<pre><code>## [1] "e"</code></pre>
<p>Los corchetes también sirven para devolver partes específicas de un resultado, como la salida de una función <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>:</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># resumen completo </span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
##    0.00    6.00   13.00   16.07   23.00   84.00      86</code></pre>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Sólo el segundo elemento del resumen, nombre (usando solo conchetes simples)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></code></pre></div>
<pre><code>## 1st Qu. 
##       6</code></pre>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Sólo el segundo elemento, sin nombre (usando dobles corchetes)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Extrae un elemento por nombre, sin mostrar el nombre</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span><span class="op">)</span><span class="op">[[</span><span class="st">"Median"</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] 13</code></pre>
<p>Los corchetes también funcionan en los dataframes para ver filas y columnas específicas. Puedes hacerlo utilizando la sintaxis <code>dataframe[filas, columnas]</code>:</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Ver una fila específica (2) del dataset, con todas las columnas (¡no olvides la coma!)</span>
<span class="va">linelist</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span>

<span class="co"># Ver todas las filas, pero solo una columna</span>
<span class="va">linelist</span><span class="op">[</span>, <span class="st">"date_onset"</span><span class="op">]</span>

<span class="co"># Ver los valores de la fila 2 y las columnas 5 hasta la 10</span>
<span class="va">linelist</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">5</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span> 

<span class="co"># Ver los valores desde la fila 2 y las columnas 5 hasta la 10 y 18</span>
<span class="va">linelist</span><span class="op">[</span><span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">18</span><span class="op">)</span><span class="op">]</span> 

<span class="co"># Ver las filas 2 a la 20 y sólo unas columnas especificadas</span>
<span class="va">linelist</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">20</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"date_onset"</span>, <span class="st">"outcome"</span>, <span class="st">"age"</span><span class="op">)</span><span class="op">]</span>

<span class="co"># Ver filas y columnas basado en ciertos criterios</span>
<span class="co"># *** ¡Observa que el nombre del dataframe también debe estar entre los criterios!</span>
<span class="va">linelist</span><span class="op">[</span><span class="va">linelist</span><span class="op">$</span><span class="va">age</span> <span class="op">&gt;</span> <span class="fl">25</span> , <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"date_onset"</span>, <span class="st">"outcome"</span>, <span class="st">"age"</span><span class="op">)</span><span class="op">]</span>

<span class="co"># Usa View() para ver el resultado en el Visor de Rstudio (más fácil de leer) </span>
<span class="co"># *** Fíjate que la "V" de la función View() está en mayúsculas</span>
<span class="fu"><a href="https://rdrr.io/r/utils/View.html">View</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">20</span>, <span class="st">"date_onset"</span><span class="op">]</span><span class="op">)</span>

<span class="co"># Guarda como objeto nuevo</span>
<span class="va">new_table</span> <span class="op">&lt;-</span> <span class="va">linelist</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">20</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"date_onset"</span><span class="op">)</span><span class="op">]</span> </code></pre></div>
<p>Ten en cuenta que también puedes lograr la indexación de filas/columnas anterior en dataframes y tibbles utilizando sintaxis de <strong>dplyr</strong> (funciones <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> para filas, y <code>select()</code> para columnas). Puedes leer más sobre estas funciones básicas en la página de <a href="cleaning-data-and-core-functions.html#cleaning-data-and-core-functions">Limpieza de datos y funciones básicas</a>.</p>
<p>Para filtrar en base al “número de fila”, puedes utilizar la función <code>row_number()</code> de <strong>dplyr</strong> (con paréntesis vacíos) como parte de una sentencia lógica de filtrado. A menudo se utiliza el operador <code><a href="https://rdrr.io/r/base/match.html">%in%</a></code> y un rango de números como parte de esa sentencia lógica, como se muestra a continuación. Para ver las <em>primeras</em> N filas, también puede utilizar la función especial <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> de <strong>dplyr</strong>.</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Ver las primeras 100 filas</span>
<span class="va">linelist</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>

<span class="co"># Mostrar sólo la fila 5</span>
<span class="va">linelist</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="fu">row_number</span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="fl">5</span><span class="op">)</span>

<span class="co"># Ver las filas 2 hasta la 20, y tres columnas específicas (No sonnecesarias las comillas pasa los nombres de columna)</span>
<span class="va">linelist</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="fu">row_number</span><span class="op">(</span><span class="op">)</span> <span class="op">%in%</span> <span class="fl">2</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="va">date_onset</span>, <span class="va">outcome</span>, <span class="va">age</span><span class="op">)</span></code></pre></div>
<p>Cuando se indexa un objeto del tipo <strong>list</strong>, los corchetes simples siempre devuelven con el tipo list, incluso si sólo se devuelve un único objeto. Los corchetes dobles, sin embargo, pueden utilizarse para acceder a un solo elemento y devolver un tipo diferente al de la lista. Los corchetes también pueden escribirse uno tras otro, como se demuestra a continuación.</p>
<p>Esta <a href="https://r4ds.had.co.nz/vectors.html#lists-of-condiments">explicación visual de la indexación de listas, con pimenteros</a>, es divertida y útil.</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># define demo list</span>
<span class="va">my_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
  <span class="co"># El primer elemento en la lista es un vector de carácter</span>
  hospitals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Central"</span>, <span class="st">"Empire"</span>, <span class="st">"Santa Anna"</span><span class="op">)</span>,
  
  <span class="co"># El segundo elemento en la lista es un data frame de direcciones</span>
  addresses   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
    street <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"145 Medical Way"</span>, <span class="st">"1048 Brown Ave"</span>, <span class="st">"999 El Camino"</span><span class="op">)</span>,
    city   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Andover"</span>, <span class="st">"Hamilton"</span>, <span class="st">"El Paso"</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span></code></pre></div>
<p>Este es el aspecto de la lista cuando se muestra en la consola. Mira cómo hay dos elementos con nombre:</p>
<ul>
<li>
<code>hospital</code>, un vector de caracteres</li>
<li>
<code>addresses</code>, un data frame de direcciones</li>
</ul>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_list</span></code></pre></div>
<pre><code>## $hospitals
## [1] "Central"    "Empire"     "Santa Anna"
## 
## $addresses
##            street     city
## 1 145 Medical Way  Andover
## 2  1048 Brown Ave Hamilton
## 3   999 El Camino  El Paso</code></pre>
<p>Ahora extraeremos información, utilizando varios métodos:</p>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_list</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="co"># este devuelve el elemento de tipo "list" - también se muestra el nombre del elemento</span></code></pre></div>
<pre><code>## $hospitals
## [1] "Central"    "Empire"     "Santa Anna"</code></pre>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="co"># este devuelve sólo el vector de carácter (sin nombrarlo) </span></code></pre></div>
<pre><code>## [1] "Central"    "Empire"     "Santa Anna"</code></pre>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_list</span><span class="op">[[</span><span class="st">"hospitals"</span><span class="op">]</span><span class="op">]</span> <span class="co"># también puedes indexar por nombre del elemento list</span></code></pre></div>
<pre><code>## [1] "Central"    "Empire"     "Santa Anna"</code></pre>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="co"># este devuelve el tercer elemento del vector de carácter "hospitals"</span></code></pre></div>
<pre><code>## [1] "Santa Anna"</code></pre>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_list</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="co"># este devuelve la primera columna ("street") del data frame address</span></code></pre></div>
<pre><code>##            street
## 1 145 Medical Way
## 2  1048 Brown Ave
## 3   999 El Camino</code></pre>
<!-- ======================================================= -->
</div>
<div id="remove-objects" class="section level3" number="3.10.7">
<h3>
<span class="header-section-number">3.10.7</span> Eliminar objetos<a class="anchor" aria-label="anchor" href="#remove-objects"><i class="fas fa-link"></i></a>
</h3>
<p>Puedes eliminar objetos individuales de tu entorno R poniendo el nombre en la función <code><a href="https://rdrr.io/r/base/rm.html">rm()</a></code> (sin comillas):</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">object_name</span><span class="op">)</span></code></pre></div>
<p>Puedes eliminar todos los objetos (limpiar tu espacio de trabajo) ejecutando:</p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span>all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</div>
</div>
<div id="piping" class="section level2" number="3.11">
<h2>
<span class="header-section-number">3.11</span> Piping (<code>%&gt;%</code>)<a class="anchor" aria-label="anchor" href="#piping"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Dos aproximaciones para trabajar con objetos:</strong></p>
<ol style="list-style-type: decimal">
<li>
<strong>Pipes/tidyverse</strong> - pipes envía un objeto de una función a otra función - énfasis en la <em>acción</em>, no en el objeto<br>
</li>
<li>
<strong>Definir objetos intermedios</strong> - se re-define un objeto una y otra vez - el énfasis está en el objeto</li>
</ol>
<!-- ======================================================= --><div id="pipes" class="section level3" number="3.11.1">
<h3>
<span class="header-section-number">3.11.1</span> <strong>Pipes (%&gt;%)</strong><a class="anchor" aria-label="anchor" href="#pipes"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Hay dos enfoques generales para trabajar con objetos:</strong></p>
<ol style="list-style-type: decimal">
<li><p><strong>Pipes/tidyverse</strong> - los pipes envían un objeto de función a función - el énfasis está en la <em>acción</em>, no en el objeto</p></li>
<li><p><strong>Definir objetos intermedios</strong> - un objeto se redefine una y otra vez - el énfasis está en el objeto</p></li>
</ol>
<p><strong>Pipes</strong></p>
<p><strong>Explicado de forma sencilla, el operador pipe (<code>%&gt;%</code>) pasa un resultado intermedio de una función a la siguiente.</strong> Puedes pensar en él como si dijera “entonces”. Muchas funciones pueden enlazarse con <code>%&gt;%</code>.</p>
<ul>
<li><strong>Los pipes hacen hincapié en una secuencia de acciones, no en el objeto sobre el que se realizan las acciones</strong></li>
<li>Los pipes son mejores cuando hay que realizar una secuencia de acciones en un objeto</li>
<li>Los pipes provienen del paquete <strong>magrittr</strong>, que se incluye automáticamente en los paquetes <strong>dplyr</strong> y <strong>tidyverse</strong>
</li>
<li>Los pipes pueden hacer que el código sea más limpio y fácil de leer, más intuitivo</li>
</ul>
<p>Más información sobre este enfoque en la <a href="https://style.tidyverse.org/pipes.html">guía de estilo de tidyverse</a></p>
<p>He aquí un ejemplo para comparar, utilizando funciones ficticias para “hornear un pastel”. Primero, el método pipe:</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Un ejemplo falso de cómo hornear un pastel utilizando sintaxis con pipes</span>

<span class="va">cake</span> <span class="op">&lt;-</span> <span class="va">flour</span> <span class="op">%&gt;%</span>       <span class="co"># para definir pastel, empezar con harina, y luego...</span>
  <span class="fu">add</span><span class="op">(</span><span class="va">eggs</span><span class="op">)</span> <span class="op">%&gt;%</span>   <span class="co"># añadir huevos</span>
  <span class="fu">add</span><span class="op">(</span><span class="va">oil</span><span class="op">)</span> <span class="op">%&gt;%</span>    <span class="co"># añadir aceite</span>
  <span class="fu">add</span><span class="op">(</span><span class="va">water</span><span class="op">)</span> <span class="op">%&gt;%</span>  <span class="co"># añadir agua</span>
  <span class="fu">mix_together</span><span class="op">(</span>         <span class="co"># mezclarlos juntos</span>
    utensil <span class="op">=</span> <span class="va">spoon</span>,
    minutes <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span>    
  <span class="fu">bake</span><span class="op">(</span>degrees <span class="op">=</span> <span class="fl">350</span>,   <span class="co"># hornear</span>
       system <span class="op">=</span> <span class="st">"fahrenheit"</span>,
       minutes <span class="op">=</span> <span class="fl">35</span><span class="op">)</span> <span class="op">%&gt;%</span>  
  <span class="fu">let_cool</span><span class="op">(</span><span class="op">)</span>            <span class="co"># dejar que se enfríe</span></code></pre></div>
<p>Aquí hay otro <a href="https://cfss.uchicago.edu/notes/pipes/#:~:text=Pipes%20are%20an%20extremely%20useful,code%20and%20combine%20multiple%20operations">enlace</a> que describe la utilidad de Los pipes.</p>
<p>El uso de pipes no es una función <strong>base</strong>. Para usarlos, debe estar instalado y cargado el paquete <strong>magrittr</strong> (esto se hace normalmente cargando el paquete <strong>tidyverse</strong> o <strong>dplyr</strong> que lo incluyen). Puedes <a href="https://magrittr.tidyverse.org/">leer más sobre pipes en la documentación de magrittr</a>.</p>
<p>Ten en cuenta que, al igual que otros comandos de R, Los pipes se pueden utilizar para mostrar sólo el resultado, o para guardar/re-guardar un objeto, dependiendo de si el operador de asignación <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code> está involucrado. Mira ambas cosas a continuación:</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Crear o sobreescribir objetos, definiéndolo como como recuentos agregados por categoría de edad (sin mostrarlo)</span>
<span class="va">linelist_summary</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">count</span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Muestra la tabla de recuentos en la consola, pero no la guarda</span>
<span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">count</span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span></code></pre></div>
<pre><code>##   age_cat    n
## 1     0-4 1095
## 2     5-9 1095
## 3   10-14  941
## 4   15-19  743
## 5   20-29 1073
## 6   30-49  754
## 7   50-69   95
## 8     70+    6
## 9    &lt;NA&gt;   86</code></pre>
<p><strong><code>%&lt;&gt;%</code></strong><br>
Se trata de un “pipe de asignación” del paquete <strong>magrittr</strong>, que <em>lleva un objeto hacia adelante y también redefine el objeto</em>. Debe ser el primer operador pipe en la cadena. Es una forma abreviada. Los dos comandos siguientes son equivalentes:</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">age</span> <span class="op">&gt;</span> <span class="fl">50</span><span class="op">)</span>

<span class="va">linelist</span> <span class="op">%&lt;&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">age</span> <span class="op">&gt;</span> <span class="fl">50</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="define-intermediate-objects" class="section level3" number="3.11.2">
<h3>
<span class="header-section-number">3.11.2</span> Definir objetos intermedios<a class="anchor" aria-label="anchor" href="#define-intermediate-objects"><i class="fas fa-link"></i></a>
</h3>
<p>Este enfoque para cambiar objetos/dataframes puede ser mejor si:</p>
<ul>
<li>Necesitas manipular múltiples objetos</li>
<li>Hay pasos intermedios que son significativos y merecen nombres de objetos separados</li>
</ul>
<p><strong>Riesgos:</strong></p>
<ul>
<li>Crear nuevos objetos para cada paso significa crear muchos objetos. Si usas el equivocado, ¡puedes no darte cuenta!</li>
<li>Nombrar todos los objetos puede ser confuso</li>
<li>Los errores pueden no ser fácilmente detectables</li>
</ul>
<p>O bien nombrar cada objeto intermedio, o sobrescribir el original, o combinar todas las funciones juntas. Todo ello conlleva sus propios riesgos.</p>
<p>A continuación se muestra el mismo ejemplo de “pastel” falso que el anterior, pero utilizando este estilo:</p>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Un ejemplo falso de cómo hornear un pastel definiendo objetos intermedios</span>
<span class="va">batter_1</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">flour</span>, <span class="va">eggs</span><span class="op">)</span>
<span class="va">batter_2</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">batter_1</span>, <span class="va">oil</span><span class="op">)</span>
<span class="va">batter_3</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">batter_2</span>, <span class="va">water</span><span class="op">)</span>

<span class="va">batter_4</span> <span class="op">&lt;-</span> <span class="fu">mix_together</span><span class="op">(</span>object <span class="op">=</span> <span class="va">batter_3</span>, utensil <span class="op">=</span> <span class="va">spoon</span>, minutes <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>

<span class="va">cake</span> <span class="op">&lt;-</span> <span class="fu">bake</span><span class="op">(</span><span class="va">batter_4</span>, degrees <span class="op">=</span> <span class="fl">350</span>, system <span class="op">=</span> <span class="st">"fahrenheit"</span>, minutes <span class="op">=</span> <span class="fl">35</span><span class="op">)</span>

<span class="va">cake</span> <span class="op">&lt;-</span> <span class="fu">let_cool</span><span class="op">(</span><span class="va">cake</span><span class="op">)</span></code></pre></div>
<p>Combinar todas las funciones juntas - esto es difícil de leer:</p>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># un ejemplo de combinación/anidación de múltiples funciones - difícil de leer</span>
<span class="va">cake</span> <span class="op">&lt;-</span> <span class="fu">let_cool</span><span class="op">(</span><span class="fu">bake</span><span class="op">(</span><span class="fu">mix_together</span><span class="op">(</span><span class="va">batter_3</span>, utensil <span class="op">=</span> <span class="va">spoon</span>, minutes <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, degrees <span class="op">=</span> <span class="fl">350</span>, system <span class="op">=</span> <span class="st">"fahrenheit"</span>, minutes <span class="op">=</span> <span class="fl">35</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="operators" class="section level2" number="3.12">
<h2>
<span class="header-section-number">3.12</span> Operadores y funciones clave<a class="anchor" aria-label="anchor" href="#operators"><i class="fas fa-link"></i></a>
</h2>
<p>Esta sección detalla los operadores en R, como por ejemplo</p>
<ul>
<li>Operadores de definición</li>
<li>Operadores relacionales (menor que, igual a ..)</li>
<li>Operadores lógicos (and, or…)</li>
<li>Tratamiento de los valores faltantes</li>
<li>Operadores y funciones matemáticas (+/-, &gt;, sum(), median(), …)</li>
<li>El operador %in%</li>
</ul>
<!-- ======================================================= --><div id="assignment_operators" class="section level3" number="3.12.1">
<h3>
<span class="header-section-number">3.12.1</span> Operadores de asignación<a class="anchor" aria-label="anchor" href="#assignment_operators"><i class="fas fa-link"></i></a>
</h3>
<p><strong><code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code></strong></p>
<p>El operador de asignación básico en R es <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>. Como en <code>nombre_objeto &lt;- valor</code>.
Este operador de asignación también se puede escribir como <code><a href="https://rdrr.io/r/base/assignOps.html">=</a></code>. Aconsejamos de forma general el uso de <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code> .
También aconsejamos rodear tales operadores con espacios, para mejorar la legibilidad.</p>
<p><strong><code><a href="https://rdrr.io/r/base/assignOps.html">&lt;&lt;-</a></code></strong></p>
<p>Si se <a href="writing-functions-1.html#writing-functions-1">escriben funciones</a>, o se utiliza R de forma interactiva con scripts de origen, entonces puede ser necesario utilizar este operador de asignación <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;&lt;-</a></code> (de R <strong>base</strong>). Este operador se utiliza para definir un objeto en un entorno R superior “padre”. Mira esta <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/assignOps.html">referencia online</a>.</p>
<p><strong><code>%&lt;&gt;%</code></strong></p>
<p>Se trata de un “pipe de asignación” del paquete <strong>magrittr</strong>, que canaliza un objeto hacia adelante y <em>también redefine el objeto</em>. Debe ser el primer operador de pipe en la cadena. Es una forma abreviada, como se muestra a continuación en dos ejemplos equivalentes:</p>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>age_months <span class="op">=</span> <span class="va">age_years</span> <span class="op">*</span> <span class="fl">12</span><span class="op">)</span></code></pre></div>
<p>Lo anterior equivale a lo siguiente:</p>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist</span> <span class="op">%&lt;&gt;%</span> <span class="fu">mutate</span><span class="op">(</span>age_months <span class="op">=</span> <span class="va">age_years</span> <span class="op">*</span> <span class="fl">12</span><span class="op">)</span></code></pre></div>
<p><strong><code>%&lt;+%</code></strong></p>
<p>Se utiliza para añadir datos a los árboles filogenéticos con el paquete <strong>ggtree</strong>. Consulta la página sobre <a href="phylogenetic-trees-1.html#phylogenetic-trees-1">árboles filogenéticos</a> o este <a href="https://yulab-smu.top/treedata-book/">libro de recursos</a> en línea.</p>
<!-- ======================================================= -->
</div>
<div id="relational-and-logical-operators" class="section level3" number="3.12.2">
<h3>
<span class="header-section-number">3.12.2</span> Operadores relacionales y lógicos<a class="anchor" aria-label="anchor" href="#relational-and-logical-operators"><i class="fas fa-link"></i></a>
</h3>
<p>Los operadores relacionales comparan valores y se utilizan a menudo al definir nuevas variables y subconjuntos de datos. Estos son los operadores relacionales más comunes en R:</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="30%">
<col width="16%">
<col width="17%">
<col width="34%">
</colgroup>
<thead><tr class="header">
<th>Significado</th>
<th>Operador</th>
<th>Ejemplo</th>
<th>Ejemplo de resultado</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Igual a</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">==</a></code></td>
<td><code>"A" == "a"</code></td>
<td>
<code>FALSE</code> (R distingue entre mayúsculas y minúsculas) <em>Ten en cuenta que == (doble igual) es diferente de = (simple igual), que actúa como el operador de asignación <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code></em>
</td>
</tr>
<tr class="even">
<td>No es igual a</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">!=</a></code></td>
<td><code>2 != 0</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="odd">
<td>Mayor que</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&gt;</a></code></td>
<td><code>4 &gt; 2</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td>Menor que</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&lt;</a></code></td>
<td><code>4 &lt; 2</code></td>
<td><code>FALSE</code></td>
</tr>
<tr class="odd">
<td>Mayor que o igual a</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&gt;=</a></code></td>
<td><code>6 &gt;= 4</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td>Menor que o igual a</td>
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&lt;=</a></code></td>
<td><code>6 &lt;= 4</code></td>
<td><code>FALSE</code></td>
</tr>
<tr class="odd">
<td>Falta el valor</td>
<td><code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code></td>
<td><code><a href="https://rdrr.io/r/base/NA.html">is.na(7)</a></code></td>
<td>
<code>FALSE</code> (véase la página sobre <a href="missing-data.html#missing-data">Valores faltantes</a>)</td>
</tr>
<tr class="even">
<td>No falta el valor</td>
<td><code>!is.na()</code></td>
<td><code>!is.na(7)</code></td>
<td><code>TRUE</code></td>
</tr>
</tbody>
</table></div>
<p>Los operadores lógicos o booleanos, como AND y OR, suelen utilizarse para conectar operadores relacionales y crear criterios más complicados. Las sentencias complejas pueden requerir paréntesis () para la agrupación y el orden de aplicación.</p>
<div class="inline-table"><table class="table table-sm"><tbody>
<tr class="odd">
<td>gnificado |Operado</td>
<td align="left">r</td>
</tr>
<tr class="even">
<td>———-|——-</td>
<td align="left">—————–</td>
</tr>
<tr class="odd">
<td>D |<code><a href="https://rdrr.io/r/base/Logic.html">&amp;</a></code>
</td>
<td align="left"></td>
</tr>
<tr class="even">
<td>|<code><a href="https://rdrr.io/r/base/Logic.html">|</a></code> (ba</td>
<td align="left">rra vertical)</td>
</tr>
<tr class="odd">
<td>réntesis |<code>( )</code> S</td>
<td align="left">e utiliza para agrupar criterios y aclarar el orden de las operaciones</td>
</tr>
</tbody></table></div>
<p>Por ejemplo, a continuación, tenemos un listado con dos variables que queremos utilizar para crear nuestra definición de caso, <code>hep_e_rdt</code>, un resultado de la prueba y <code>other_cases_in_hh</code>, que nos dirá si hay otros casos en el hogar. El comando siguiente utiliza la función <code>case_when()</code> para crear la nueva variable <code>case_def</code> tal que:</p>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">linelist_cleaned</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>case_def <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">rdt_result</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">other_case_in_home</span><span class="op">)</span>            <span class="op">~</span> <span class="cn">NA_character_</span>,
    <span class="va">rdt_result</span> <span class="op">==</span> <span class="st">"Positive"</span>                                 <span class="op">~</span> <span class="st">"Confirmed"</span>,
    <span class="va">rdt_result</span> <span class="op">!=</span> <span class="st">"Positive"</span> <span class="op">&amp;</span> <span class="va">other_cases_in_home</span> <span class="op">==</span> <span class="st">"Yes"</span>  <span class="op">~</span> <span class="st">"Probable"</span>,
    <span class="cn">TRUE</span>                                                     <span class="op">~</span> <span class="st">"Suspected"</span>
  <span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="44%">
<col width="55%">
</colgroup>
<thead><tr class="header">
<th>Criterios del ejemplo anterior</th>
<th>Valor resultante en la nueva variable “case_def”</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Si falta el valor de las variables <code>rdt_result</code> y <code>other_cases_in_home</code>
</td>
<td>NA (valor faltante)</td>
</tr>
<tr class="even">
<td>Si el valor de <code>rdt_result</code> es “Positivo”</td>
<td>“Confirmado”</td>
</tr>
<tr class="odd">
<td>Si el valor de <code>rdt_result</code> NO es “Positivo” Y el valor de <code>other_cases_in_home es</code> “Si”</td>
<td>“Probable”</td>
</tr>
<tr class="even">
<td>Si no se cumple alguno de los criterios anteriores</td>
<td>“Sospechoso”</td>
</tr>
</tbody>
</table></div>
<p><em>Ten en cuenta que R distingue entre mayúsculas y minúsculas, por lo que “Positivo” es diferente de “positivo”…</em></p>
<!-- ======================================================= -->
</div>
<div id="missing-values" class="section level3" number="3.12.3">
<h3>
<span class="header-section-number">3.12.3</span> Valores faltantes<a class="anchor" aria-label="anchor" href="#missing-values"><i class="fas fa-link"></i></a>
</h3>
<p>En R, los valores faltantes (missing value) se representan con el valor especial <code>NA</code> (una palabra “reservada” para ello) (letras mayúsculas N y A - sin comillas). Si importas datos que registran los valores faltantes de otra manera (por ejemplo, 99, “Nulo”, o .), es posible que quieras re-codificar esos valores a NA. En la página de <a href="import-and-export.html#import-and-export">importación y exportación</a> se explica cómo hacerlo.</p>
<p><strong>Para comprobar si un valor es <code>NA</code>, utiliza la función especial <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code></strong>, que devuelve <code>TRUE</code> o <code>FALSE</code>.</p>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rdt_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Positive"</span>, <span class="st">"Suspected"</span>, <span class="st">"Positive"</span>, <span class="cn">NA</span><span class="op">)</span>   <span class="co"># dos casos positivos, uno sospechoso y uno desconocido</span>
<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">rdt_result</span><span class="op">)</span>  <span class="co"># Comprueba si el valor de rdt_result es NA</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE  TRUE</code></pre>
<p>Puedes leer más sobre los valores faltantes, infinitos, <code>NULL</code> e imposibles en la página sobre <a href="missing-data.html#missing-data">Valores faltantes</a>]. Aprende a convertir los valores faltantes al importar datos en la página sobre <a href="import-and-export.html#import-and-export">Importación y exportación</a>.</p>
<!-- ======================================================= -->
</div>
<div id="mathematics-and-statistics" class="section level3" number="3.12.4">
<h3>
<span class="header-section-number">3.12.4</span> Matemáticos y estadísticos<a class="anchor" aria-label="anchor" href="#mathematics-and-statistics"><i class="fas fa-link"></i></a>
</h3>
<p>Todos los operadores y funciones de esta página están disponibles automáticamente en R <strong>base</strong>.</p>
<div id="mathematical-operators" class="section level4" number="3.12.4.1">
<h4>
<span class="header-section-number">3.12.4.1</span> Operadores matemáticos<a class="anchor" aria-label="anchor" href="#mathematical-operators"><i class="fas fa-link"></i></a>
</h4>
<p>Se utilizan a menudo para realizar sumas, divisiones, crear nuevas columnas, etc. A continuación se muestran los operadores matemáticos más comunes en R. No es importante poner espacios alrededor de los operadores.</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Propósito</th>
<th>Ejemplo en R</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>suman</td>
<td>2 + 3</td>
</tr>
<tr class="even">
<td>resta</td>
<td>2 - 3</td>
</tr>
<tr class="odd">
<td>multiplicación</td>
<td>2 * 3</td>
</tr>
<tr class="even">
<td>división</td>
<td>30 / 5</td>
</tr>
<tr class="odd">
<td>exponente</td>
<td>2^3</td>
</tr>
<tr class="even">
<td>orden de operaciones</td>
<td>( )</td>
</tr>
</tbody>
</table></div>
</div>
<div id="mathematical-functions" class="section level4" number="3.12.4.2">
<h4>
<span class="header-section-number">3.12.4.2</span> Funciones matemáticas<a class="anchor" aria-label="anchor" href="#mathematical-functions"><i class="fas fa-link"></i></a>
</h4>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Propósito</th>
<th>Función**</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>redondeo</td>
<td>round(x, digits = n)</td>
</tr>
<tr class="even">
<td>redondeo</td>
<td>janitor::round_half_up(x, digits = n)</td>
</tr>
<tr class="odd">
<td>redondeo arriba</td>
<td>ceiling(x)</td>
</tr>
<tr class="even">
<td>redondeo abajo</td>
<td>floor(x)</td>
</tr>
<tr class="odd">
<td>valor absoluto</td>
<td>abs(x)</td>
</tr>
<tr class="even">
<td>raiz cuadrada</td>
<td>sqrt(x)</td>
</tr>
<tr class="odd">
<td>exponente</td>
<td>exponent(x)</td>
</tr>
<tr class="even">
<td>logaritmo natural</td>
<td>log(x)</td>
</tr>
<tr class="odd">
<td>log base 10</td>
<td>log10(x)</td>
</tr>
<tr class="even">
<td>log base 2</td>
<td>log2(x)</td>
</tr>
</tbody>
</table></div>
<p>Nota: para <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> los <code>dígits =</code> especifican el número de decimales. Utiliza <code><a href="https://rdrr.io/r/base/Round.html">signif()</a></code> para redondear a un número de cifras significativas.</p>
</div>
<div id="scientific-notation" class="section level4" number="3.12.4.3">
<h4>
<span class="header-section-number">3.12.4.3</span> Notación científica<a class="anchor" aria-label="anchor" href="#scientific-notation"><i class="fas fa-link"></i></a>
</h4>
<p>La probabilidad de que se utilice la notación científica depende del valor de la opción <code>scipen</code>.</p>
<p>De la documentación de <code><a href="https://rdrr.io/r/base/options.html">?options</a></code>: scipen es una penalización que se aplica cuando se decide obtener valores numéricos en notación fija o exponencial. Los valores positivos se inclinan hacia la notación fija y los negativos hacia la notación científica: se preferirá la notación fija a menos que tenga más dígitos que ‘scipen’.</p>
<p>Si se establece en un número bajo (por ejemplo, 0) estará “activada” siempre. Para “desactivar” la notación científica en tu sesión de R, configúrela con un número muy alto, por ejemplo:</p>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># turn off scientific notation</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>scipen<span class="op">=</span><span class="fl">999</span><span class="op">)</span></code></pre></div>
</div>
<div id="rounding" class="section level4" number="3.12.4.4">
<h4>
<span class="header-section-number">3.12.4.4</span> Redondeo<a class="anchor" aria-label="anchor" href="#rounding"><i class="fas fa-link"></i></a>
</h4>
<p><span style="color: red;"><strong><em>PELIGRO:</em></strong> <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> utiliza el “redondeo del banquero” que redondea hacia arriba desde un 0,5 sólo si el número superior es par. Utiliza <code>round_half_up()</code> de <strong>janitor</strong> para redondear consistentemente las mitades hacia arriba al número entero más cercano. <a href="https://cran.r-project.org/web/packages/janitor/vignettes/janitor.html#explore-records-with-duplicated-values-for-specific-combinations-of-variables-with-get_dupes">Aquí tienes esta explicación</a></span></p>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># utilizar la función de redondeo adecuada para tu trabajo</span>
<span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2.5</span>, <span class="fl">3.5</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 2 4</code></pre>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/janitor/man/round_half_up.html">round_half_up</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2.5</span>, <span class="fl">3.5</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 3 4</code></pre>
</div>
<div id="statistical-functions" class="section level4" number="3.12.4.5">
<h4>
<span class="header-section-number">3.12.4.5</span> Funciones estadísticas<a class="anchor" aria-label="anchor" href="#statistical-functions"><i class="fas fa-link"></i></a>
</h4>
<p><span style="color: orange;"><strong><em>PRECAUCIÓN:</em></strong> Las funciones que aparecen a continuación incluyen por defecto los valores faltantes en los cálculos. Los valores faltantes darán como resultado una salida de <code>NA</code>, a menos que se especifique el argumento <code>na.rm = TRUE</code>. Esto se puede escribir de forma abreviada como <code>na.rm = T</code>.</span></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Objetivo</th>
<th>Función**</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>media (promedio)</td>
<td>mean(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>mediana</td>
<td>median(x, na.rm=T)</td>
</tr>
<tr class="odd">
<td>desviación estándar</td>
<td>sd(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>cuantiles*</td>
<td>quantile(x, probs)</td>
</tr>
<tr class="odd">
<td>suma</td>
<td>sum(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>valor mínimo</td>
<td>min(x, na.rm=T)</td>
</tr>
<tr class="odd">
<td>valor máximo</td>
<td>max(x, na.rm=T)</td>
</tr>
<tr class="even">
<td>rango de valores numéricos</td>
<td>range(x, na.rm=T)</td>
</tr>
<tr class="odd">
<td>resumen**</td>
<td>summary(x)</td>
</tr>
</tbody>
</table></div>
<p>Notas:</p>
<ul>
<li><p><code>*quantile()</code>: <code>x</code> es el vector numérico a examinar, y <code>probs =</code> es un vector numérico con probabilidades entre 0 y 1.0, por ejemplo <code><a href="https://rdrr.io/r/base/c.html">c(0.5, 0.8, 0.85)</a></code></p></li>
<li><p><code>**summary()</code>: da un resumen estadístico sobre un vector numérico incluyendo la media, mediana y percentiles más comunes</p></li>
</ul>
<p><span style="color: red;"><strong><em>PELIGRO:</em></strong> Si proporciona un vector de números a una de las funciones anteriores, asegúrese de envolver los números dentro de <code><a href="https://rdrr.io/r/base/c.html">c()</a></code>.</span></p>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Si se suministran números sin procesar a una función, envuélvalos en c()</span>
<span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">10</span>, <span class="fl">5</span>, <span class="fl">0</span><span class="op">)</span>    <span class="co"># !!! INCORRECTO !!!  </span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">10</span>, <span class="fl">5</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="co"># CORRECTO</span></code></pre></div>
<pre><code>## [1] 5.666667</code></pre>
</div>
<div id="other-useful-functions" class="section level4" number="3.12.4.6">
<h4>
<span class="header-section-number">3.12.4.6</span> Otras funciones útiles<a class="anchor" aria-label="anchor" href="#other-useful-functions"><i class="fas fa-link"></i></a>
</h4>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="30%">
<col width="20%">
<col width="48%">
</colgroup>
<thead><tr class="header">
<th>Objetivo</th>
<th>Función</th>
<th>Ejemplo**</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>crear una secuencia</td>
<td>seq(de, a, por)</td>
<td><code><a href="https://rdrr.io/r/base/seq.html">seq(1, 10, 2)</a></code></td>
</tr>
<tr class="even">
<td>repetir x, n veces</td>
<td>rep(x, nveces)</td>
<td>
<code><a href="https://rdrr.io/r/base/rep.html">rep(1:3, 2)</a></code> or <code><a href="https://rdrr.io/r/base/rep.html">rep(c("a", "b", "c"), 3)</a></code>
</td>
</tr>
<tr class="odd">
<td>subdividir un vector numérico</td>
<td>cut(x, n)</td>
<td><code><a href="https://rdrr.io/r/base/cut.html">cut(linelist$age, 5)</a></code></td>
</tr>
<tr class="even">
<td>tomar una muestra aleatoria</td>
<td>sample(x, tamaño)</td>
<td><code><a href="https://rdrr.io/r/base/sample.html">sample(linelist$id, size = 5, replace = TRUE)</a></code></td>
</tr>
</tbody>
</table></div>
<!-- ======================================================= -->
</div>
</div>
<div id="in" class="section level3 unnumbered">
<h3>
<code>%in%</code><a class="anchor" aria-label="anchor" href="#in"><i class="fas fa-link"></i></a>
</h3>
<p>Un operador muy útil para comparar valores, y para evaluar rápidamente si un valor está dentro de un vector o dataframe.</p>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="st">"a"</span> <span class="op">%in%</span> <span class="va">my_vector</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="st">"h"</span> <span class="op">%in%</span> <span class="va">my_vector</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Para preguntar si un valor <strong>no está</strong> <code><a href="https://rdrr.io/r/base/match.html">%in%</a></code> en un vector, pon un signo de exclamación (!) <strong>delante</strong> de la declaración lógica:</p>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># para negar, pon una exclamación delante</span>
<span class="op">!</span><span class="st">"a"</span> <span class="op">%in%</span> <span class="va">my_vector</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">!</span><span class="st">"h"</span> <span class="op">%in%</span> <span class="va">my_vector</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p><code><a href="https://rdrr.io/r/base/match.html">%in%</a></code> es muy útil cuando se utiliza la función <code>case_when()</code> de <strong>dplyr</strong>. Se puede definir un vector previamente y referenciarlo después. Por ejemplo:</p>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">affirmative</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"Yes"</span>, <span class="st">"YES"</span>, <span class="st">"yes"</span>, <span class="st">"y"</span>, <span class="st">"Y"</span>, <span class="st">"oui"</span>, <span class="st">"Oui"</span>, <span class="st">"Si"</span><span class="op">)</span>

<span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>child_hospitaled <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span>
    <span class="va">hospitalized</span> <span class="op">%in%</span> <span class="va">affirmative</span> <span class="op">&amp;</span> <span class="va">age</span> <span class="op">&lt;</span> <span class="fl">18</span> <span class="op">~</span> <span class="st">"Hospitalized Child"</span>,
    <span class="cn">TRUE</span>                                      <span class="op">~</span> <span class="st">"Not"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Nota: Si quieres detectar una cadena parcial, quizás usando <code>str_detect()</code> de <strong>stringr</strong>, no aceptará un vector de caracteres como <code><a href="https://rdrr.io/r/base/c.html">c("1", "Yes", "yes", "y")</a></code>. En su lugar, se le debe dar una <em>expresión regular</em> - una cadena condensada con barras OR, como “1|Yes|yes|y”. Por ejemplo, <code>str_detect(hospitalized, "1|Yes|yes|y")</code>. Consulta la página sobre <a href="characters-and-strings.html#characters-and-strings">Caracteres y cadenas</a> para obtener más información.</p>
<p>Puedes convertir un vector de caracteres en una expresión regular con este comando:</p>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">affirmative</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"Yes"</span>, <span class="st">"YES"</span>, <span class="st">"yes"</span>, <span class="st">"y"</span>, <span class="st">"Y"</span>, <span class="st">"oui"</span>, <span class="st">"Oui"</span>, <span class="st">"Si"</span><span class="op">)</span>
<span class="va">affirmative</span></code></pre></div>
<pre><code>## [1] "1"   "Yes" "YES" "yes" "y"   "Y"   "oui" "Oui" "Si"</code></pre>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># condense to </span>
<span class="va">affirmative_str_search</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">affirmative</span>, collapse <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span>  <span class="co"># option with base R</span>
<span class="va">affirmative_str_search</span> <span class="op">&lt;-</span> <span class="fu">str_c</span><span class="op">(</span><span class="va">affirmative</span>, collapse <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span>   <span class="co"># option with stringr package</span>

<span class="va">affirmative_str_search</span></code></pre></div>
<pre><code>## [1] "1|Yes|YES|yes|y|Y|oui|Oui|Si"</code></pre>
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</div>
</div>
<div id="errores-avisos-errors-warnings" class="section level2" number="3.13">
<h2>
<span class="header-section-number">3.13</span> Errores &amp; avisos {#errors-warnings)<a class="anchor" aria-label="anchor" href="#errores-avisos-errors-warnings"><i class="fas fa-link"></i></a>
</h2>
<p>En esta sección se explica:</p>
<ul>
<li>La diferencia entre errores y avisos (warnings)</li>
<li>Consejos generales de sintaxis para escribir código R</li>
<li>Código de asistencia</li>
</ul>
<p>En las página de <a href="common-errors.html#common-errors">Errores comunes</a> y de <a href="getting-help.html#getting-help">Obtener ayuda</a> se pueden encontrar los errores y avisos más comunes, así como consejos para la resolución de problemas.</p>
<!-- ======================================================= -->
<div id="error-warning" class="section level3" number="3.13.1">
<h3>
<span class="header-section-number">3.13.1</span> Error vs aviso<a class="anchor" aria-label="anchor" href="#error-warning"><i class="fas fa-link"></i></a>
</h3>
<p>Cuando se ejecuta un comando, la Consola de R puede mostrarte mensajes de aviso o error en texto rojo.</p>
<ul>
<li><p>Una <strong>aviso</strong> significa que R ha completado su comando, pero ha tenido que dar pasos adicionales o ha producido una salida inusual de la que deberías estar al tanto.</p></li>
<li><p>Un <strong>error</strong> significa que R no pudo completar su comando.</p></li>
</ul>
<p>Busca pistas:</p>
<ul>
<li><p>El mensaje de error/advertencia suele incluir un número de línea donde está el problema.</p></li>
<li><p>Si un objeto “es desconocido” o “no se encuentra”, quizás lo hayas escrito mal, hayas olvidado llamar a un paquete con library(), o hayas olvidado volver a ejecutar tu script después de hacer cambios.</p></li>
</ul>
<p>Si todo lo demás falla, copia el mensaje de error en Google junto con algunos términos clave; lo más probable es que a alguien le haya pasado lo mismo y ¡ya haya resuelto el problema!.</p>
<!-- ======================================================= -->
</div>
<div id="general-syntax-tips" class="section level3" number="3.13.2">
<h3>
<span class="header-section-number">3.13.2</span> Consejos generales de sintaxis<a class="anchor" aria-label="anchor" href="#general-syntax-tips"><i class="fas fa-link"></i></a>
</h3>
<p>Algunas cosas que hay que recordar al escribir comandos en R, para evitar errores y advertencias:</p>
<ul>
<li>Cierra siempre los paréntesis - consejo: cuenta el número de paréntesis de apertura “(” y de cierre “)” de cada trozo de código</li>
<li>Evita los espacios en los nombres de columnas y objetos. Utiliza barras bajas ( _ ) o puntos ( . ) en su lugar</li>
<li>No olvides separar los argumentos de una función con comas</li>
<li>R distingue entre mayúsculas y minúsculas, lo que significa que <code>Variable_A</code> es <em>diferente</em> de <code>variable_A</code>
</li>
</ul>
<!-- ======================================================= -->
</div>
<div id="code-assists" class="section level3" number="3.13.3">
<h3>
<span class="header-section-number">3.13.3</span> Código de asistencia<a class="anchor" aria-label="anchor" href="#code-assists"><i class="fas fa-link"></i></a>
</h3>
<p>Cualquier script (RMarkdown o de otro tipo) te dará pistas cuando hayas cometido un error. Por ejemplo, si te olvidaste de escribir una coma donde se necesita, o de cerrar un paréntesis, RStudio levantará una bandera en esa línea, a la derecha del script, para avisarte.</p>

<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ======================================================= -->
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="download-handbook-and-data.html"><span class="header-section-number">2</span> Descargando el manual y los datos</a></div>
<div class="next"><a href="transition-to-r.html"><span class="header-section-number">4</span> Transición a R</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#r-basics"><span class="header-section-number">3</span> Fundamentos de R</a></li>
<li><a class="nav-link" href="#por-qu%C3%A9-utilizar-r"><span class="header-section-number">3.1</span> ¿Por qué utilizar R?</a></li>
<li><a class="nav-link" href="#t%C3%A9rminos-clave"><span class="header-section-number">3.2</span> Términos clave</a></li>
<li>
<a class="nav-link" href="#learning"><span class="header-section-number">3.3</span> Recursos de aprendizaje</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#resources-within-rstudio"><span class="header-section-number">3.3.1</span> Recursos en RStudio</a></li>
<li><a class="nav-link" href="#Cheatsheets"><span class="header-section-number">3.3.2</span> Hojas de referencia</a></li>
<li><a class="nav-link" href="#twitter">Twitter</a></li>
<li><a class="nav-link" href="#free-online-resources"><span class="header-section-number">3.3.3</span> Recursos gratuitos en línea</a></li>
<li><a class="nav-link" href="#languages-other-than-english"><span class="header-section-number">3.3.4</span> Idiomas distintos del inglés</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#Installation"><span class="header-section-number">3.4</span> Instalación</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#r-and-rstudio"><span class="header-section-number">3.4.1</span> R y RStudio</a></li>
<li><a class="nav-link" href="#other-software-you-may-need-to-install"><span class="header-section-number">3.4.2</span> Otros programas que puedes necesitar instalar</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#rstudio"><span class="header-section-number">3.5</span> RStudio</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#rstudio-orientation"><span class="header-section-number">3.5.1</span> Orientación de RStudio</a></li>
<li><a class="nav-link" href="#rstudio-settings"><span class="header-section-number">3.5.2</span> Configuración de RStudio</a></li>
<li><a class="nav-link" href="#keyboard-shortcuts"><span class="header-section-number">3.5.3</span> Atajos de teclado</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#functions"><span class="header-section-number">3.6</span> Funciones</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#simple-functions"><span class="header-section-number">3.6.1</span> Funciones simples</a></li>
<li><a class="nav-link" href="#functions-with-multiple-arguments"><span class="header-section-number">3.6.2</span> Functions with multiple arguments</a></li>
<li><a class="nav-link" href="#writing-functions"><span class="header-section-number">3.6.3</span> Escribir funciones</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#packages"><span class="header-section-number">3.7</span> Paquetes</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#install-and-load"><span class="header-section-number">3.7.1</span> Instalar y cargar</a></li>
<li><a class="nav-link" href="#code-syntax"><span class="header-section-number">3.7.2</span> Sintaxis del código</a></li>
<li><a class="nav-link" href="#function-help"><span class="header-section-number">3.7.3</span> Ayuda a la función</a></li>
<li><a class="nav-link" href="#update-packages"><span class="header-section-number">3.7.4</span> Actualizar paquetes</a></li>
<li><a class="nav-link" href="#delete-packages"><span class="header-section-number">3.7.5</span> Eliminar paquetes</a></li>
<li><a class="nav-link" href="#dependencies"><span class="header-section-number">3.7.6</span> Dependencias</a></li>
<li><a class="nav-link" href="#masked-functions"><span class="header-section-number">3.7.7</span> Funciones enmascaradas</a></li>
<li><a class="nav-link" href="#detach-unload"><span class="header-section-number">3.7.8</span> Descargar</a></li>
<li><a class="nav-link" href="#install-older-version"><span class="header-section-number">3.7.9</span> Instalar una versión anterior</a></li>
<li><a class="nav-link" href="#suggested-packages"><span class="header-section-number">3.7.10</span> Paquetes recomendados</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#scripts"><span class="header-section-number">3.8</span> Scripts</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#Commenting"><span class="header-section-number">3.8.1</span> Comentarios</a></li>
<li><a class="nav-link" href="#Style"><span class="header-section-number">3.8.2</span> Estilo</a></li>
<li><a class="nav-link" href="#ejemplo-script-example-script"><span class="header-section-number">3.8.3</span> Ejemplo Script {example-script}</a></li>
<li><a class="nav-link" href="#r-markdown">R markdown</a></li>
<li><a class="nav-link" href="#r-notebooks">R notebooks</a></li>
<li><a class="nav-link" href="#shiny">Shiny</a></li>
<li><a class="nav-link" href="#code-folding"><span class="header-section-number">3.8.4</span> Plegar código</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#directorio-de-trabajo-working_directory"><span class="header-section-number">3.9</span> Directorio de trabajo {working_directory}</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#recommended-approach"><span class="header-section-number">3.9.1</span> Enfoque recomendado</a></li>
<li><a class="nav-link" href="#set-by-command"><span class="header-section-number">3.9.2</span> Mediante comandos</a></li>
<li><a class="nav-link" href="#set-manually"><span class="header-section-number">3.9.3</span> Manualmente</a></li>
<li><a class="nav-link" href="#within-an-R-project"><span class="header-section-number">3.9.4</span> Con un proyecto</a></li>
<li><a class="nav-link" href="#working-directory-in-an-R-markdown"><span class="header-section-number">3.9.5</span> Directorio en Rmarkdown</a></li>
<li><a class="nav-link" href="#providing-file-paths"><span class="header-section-number">3.9.6</span> Escribir la ruta completa</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#objects"><span class="header-section-number">3.10</span> Objetos</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#everything-is-an-object"><span class="header-section-number">3.10.1</span> Todo es un objeto</a></li>
<li><a class="nav-link" href="#definici%C3%B3n-de-objetos---defining-objects--"><span class="header-section-number">3.10.2</span> Definición de objetos (&lt;-) {#Defining objects (&lt;-)}</a></li>
<li><a class="nav-link" href="#object-structure"><span class="header-section-number">3.10.3</span> Estructura de los objetos</a></li>
<li><a class="nav-link" href="#object_classes"><span class="header-section-number">3.10.4</span> Tipos de objeto</a></li>
<li><a class="nav-link" href="#columnsvariables"><span class="header-section-number">3.10.5</span> Columnas/Variables ($)</a></li>
<li><a class="nav-link" href="#accessindex-with-brackets"><span class="header-section-number">3.10.6</span> Acceso/índice con corchetes ([ ])</a></li>
<li><a class="nav-link" href="#remove-objects"><span class="header-section-number">3.10.7</span> Eliminar objetos</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#piping"><span class="header-section-number">3.11</span> Piping (%&gt;%)</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#pipes"><span class="header-section-number">3.11.1</span> Pipes (%&gt;%)</a></li>
<li><a class="nav-link" href="#define-intermediate-objects"><span class="header-section-number">3.11.2</span> Definir objetos intermedios</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#operators"><span class="header-section-number">3.12</span> Operadores y funciones clave</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#assignment_operators"><span class="header-section-number">3.12.1</span> Operadores de asignación</a></li>
<li><a class="nav-link" href="#relational-and-logical-operators"><span class="header-section-number">3.12.2</span> Operadores relacionales y lógicos</a></li>
<li><a class="nav-link" href="#missing-values"><span class="header-section-number">3.12.3</span> Valores faltantes</a></li>
<li><a class="nav-link" href="#mathematics-and-statistics"><span class="header-section-number">3.12.4</span> Matemáticos y estadísticos</a></li>
<li><a class="nav-link" href="#in">%in%</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#errores-avisos-errors-warnings"><span class="header-section-number">3.13</span> Errores &amp; avisos {#errors-warnings)</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#error-warning"><span class="header-section-number">3.13.1</span> Error vs aviso</a></li>
<li><a class="nav-link" href="#general-syntax-tips"><span class="header-section-number">3.13.2</span> Consejos generales de sintaxis</a></li>
<li><a class="nav-link" href="#code-assists"><span class="header-section-number">3.13.3</span> Código de asistencia</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>El manual de R para la Epidemiología</strong>" was written by El equipo del manual. It was last built on 2021-11-22.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
