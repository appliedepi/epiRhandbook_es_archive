<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>2 Interacciones con directorios | EpiRhandbook en español</title>
<meta name="author" content="El equipo del manual">
<meta name="description" content="En esta página cubrimos los escenarios comunes en los que se crea, se interactúa, se guarda y se importa con directorios (carpetas).  2.1 Preparación  Paquete fs El paquete fs es un paquete...">
<meta name="generator" content="bookdown 0.28 with bs4_book()">
<meta property="og:title" content="2 Interacciones con directorios | EpiRhandbook en español">
<meta property="og:type" content="book">
<meta property="og:description" content="En esta página cubrimos los escenarios comunes en los que se crea, se interactúa, se guarda y se importa con directorios (carpetas).  2.1 Preparación  Paquete fs El paquete fs es un paquete...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="2 Interacciones con directorios | EpiRhandbook en español">
<meta name="twitter:description" content="En esta página cubrimos los escenarios comunes en los que se crea, se interactúa, se guarda y se importa con directorios (carpetas).  2.1 Preparación  Paquete fs El paquete fs es un paquete...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.24/datatables.js"></script><link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><link href="libs/tabwid-1.1.0/tabwid.css" rel="stylesheet">
<link href="libs/tabwid-1.1.0/scrool.css" rel="stylesheet">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QXDW878QLX');
    </script>
</head>
<body>
<div class="alert alert-info alert-dismissible">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
      <strong>¿Necesita ayuda para aprender R?</strong> Inscríbase en Applied Epi's <a href="https://www.appliedepi.org/live/" class="alert-link">curso de introducción a R</a>, pruebe nuestro <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriales gratuitos de R</a>, hacer un post en nuestro <a href="https://community.appliedepi.org/" class="alert-link">Foro comunitario de preguntas y respuestas</a>, o pregunte por nuestro <a href="mailto:contact@appliedepi.org" class="alert-link">R Servicio de asistencia técnica</a>.
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style_bs4.css">
<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">EpiRhandbook en español</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">Miscelánea</li>
<li><a class="" href="writing-functions-1.html"><span class="header-section-number">1</span> Escribir funciones</a></li>
<li><a class="active" href="directory-interactions.html"><span class="header-section-number">2</span> Interacciones con directorios</a></li>
<li><a class="" href="version-control-and-collaboration-with-git-and-github.html"><span class="header-section-number">3</span> Control de versiones y colaboración con Git y Github</a></li>
<li><a class="" href="common-errors.html"><span class="header-section-number">4</span> Errores comunes</a></li>
<li><a class="" href="getting-help.html"><span class="header-section-number">5</span> Cómo obtener ayuda</a></li>
<li><a class="" href="r-on-network-drives.html"><span class="header-section-number">6</span> R en redes locales</a></li>
<li><a class="" href="data-table.html"><span class="header-section-number">7</span> Data Table</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="directory-interactions" class="section level1" number="2">
<h1>
<span class="header-section-number">2</span> Interacciones con directorios<a class="anchor" aria-label="anchor" href="#directory-interactions"><i class="fas fa-link"></i></a>
</h1>
<p>En esta página cubrimos los escenarios comunes en los que se crea, se interactúa, se guarda y se importa con directorios (carpetas).</p>
<div id="preparation-38" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> Preparación<a class="anchor" aria-label="anchor" href="#preparation-38"><i class="fas fa-link"></i></a>
</h2>
<div id="paquete-fs" class="section level3 unnumbered">
<h3>Paquete <strong>fs</strong><a class="anchor" aria-label="anchor" href="#paquete-fs"><i class="fas fa-link"></i></a>
</h3>
<p>El paquete <strong>fs</strong> es un paquete <strong>tidyverse</strong> que facilita las interacciones con los directorios, mejorando algunas de las funciones de R <strong>base</strong>. En las secciones siguientes utilizaremos a menudo funciones de <strong>fs</strong>.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span></span>
<span>  <span class="va">fs</span>,             <span class="co"># file/directory interactions</span></span>
<span>  <span class="va">rio</span>,            <span class="co"># import/export</span></span>
<span>  <span class="va">here</span>,           <span class="co"># relative file pathways</span></span>
<span>  <span class="va">tidyverse</span><span class="op">)</span>      <span class="co"># data management and visualization</span></span></code></pre></div>
</div>
<div id="imprimir-el-directorio-como-un-árbol-de-dendrogramas" class="section level3 unnumbered">
<h3>Imprimir el directorio como un árbol de dendrogramas<a class="anchor" aria-label="anchor" href="#imprimir-el-directorio-como-un-%C3%A1rbol-de-dendrogramas"><i class="fas fa-link"></i></a>
</h3>
<p>Utiliza la función <code>dir_tree()</code> de <strong>fs</strong>.</p>
<p>Proporciona la ruta de la carpeta a <code>path =</code> y decide si quieres mostrar sólo un nivel (<code>recurse = FALSE</code>) o todos los archivos en todos los subniveles (<code>recurse = TRUE</code>). A continuación utilizamos <code>here()</code> como abreviatura del proyecto R y especificamos su subcarpeta “data”, que contiene todos los datos utilizados para este manual de R. Lo configuramos para que muestre todos los archivos dentro de “data” y sus subcarpetas (por ejemplo, “cache”, “epidemic models”, “population”, “shp” y “weather”).</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html">dir_tree</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu">here</span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span>, recurse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## C:/Users/neale/Documents/Applied Epi/repos/epiRhandbook_es/data
## ├── cache
## │   └── epidemic_models
## │       ├── 2015-04-30
## │       │   ├── estimated_reported_cases_samples.rds
## │       │   ├── estimate_samples.rds
## │       │   ├── latest_date.rds
## │       │   ├── reported_cases.rds
## │       │   ├── summarised_estimated_reported_cases.rds
## │       │   ├── summarised_estimates.rds
## │       │   └── summary.rds
## │       ├── epinow_res.rds
## │       ├── epinow_res_small.rds
## │       ├── generation_time.rds
## │       └── incubation_period.rds
## ├── case_linelists
## │   ├── cleaning_dict.csv
## │   ├── fluH7N9_China_2013.csv
## │   ├── linelist_cleaned.rds
## │   └── linelist_raw.xlsx
## ├── example
## │   ├── Central Hospital.csv
## │   ├── district_weekly_count_data.xlsx
## │   ├── fluH7N9_China_2013.csv
## │   ├── hospital_linelists.xlsx
## │   ├── linelists
## │   │   ├── 20201007linelist.csv
## │   │   ├── case_linelist20201006.csv
## │   │   ├── case_linelist_2020-10-02.csv
## │   │   ├── case_linelist_2020-10-03.csv
## │   │   ├── case_linelist_2020-10-04.csv
## │   │   ├── case_linelist_2020-10-05.csv
## │   │   └── case_linelist_2020-10-08.xlsx
## │   ├── Military Hospital.csv
## │   ├── Missing.csv
## │   ├── Other.csv
## │   ├── Port Hospital.csv
## │   └── St. Mark's Maternity Hospital (SMMH).csv
## ├── flexdashboard
## │   ├── outbreak_dashboard.html
## │   ├── outbreak_dashboard.Rmd
## │   ├── outbreak_dashboard_shiny.Rmd
## │   ├── outbreak_dashboard_test.html
## │   └── outbreak_dashboard_test.Rmd
## ├── gis
## │   ├── africa_countries.geo.json
## │   ├── covid_incidence.csv
## │   ├── covid_incidence_map.R
## │   ├── linelist_cleaned_with_adm3.rds
## │   ├── population
## │   │   ├── sle_admpop_adm3_2020.csv
## │   │   └── sle_population_statistics_sierraleone_2020.xlsx
## │   └── shp
## │       ├── README.txt
## │       ├── sle_adm3.CPG
## │       ├── sle_adm3.dbf
## │       ├── sle_adm3.prj
## │       ├── sle_adm3.sbn
## │       ├── sle_adm3.sbx
## │       ├── sle_adm3.shp
## │       ├── sle_adm3.shp.xml
## │       ├── sle_adm3.shx
## │       ├── sle_hf.CPG
## │       ├── sle_hf.dbf
## │       ├── sle_hf.prj
## │       ├── sle_hf.sbn
## │       ├── sle_hf.sbx
## │       ├── sle_hf.shp
## │       └── sle_hf.shx
## ├── godata
## │   ├── cases_clean.rds
## │   ├── contacts_clean.rds
## │   ├── followups_clean.rds
## │   └── relationships_clean.rds
## ├── likert_data.csv
## ├── linelist_cleaned.xlsx
## ├── make_evd_dataset.R
## ├── malaria_app
## │   ├── app.R
## │   ├── data
## │   │   └── facility_count_data.rds
## │   ├── funcs
## │   │   └── plot_epicurve.R
## │   ├── global.R
## │   ├── malaria_app.Rproj
## │   ├── server.R
## │   └── ui.R
## ├── malaria_facility_count_data.rds
## ├── phylo
## │   ├── sample_data_Shigella_tree.csv
## │   ├── Shigella_subtree_2.nwk
## │   ├── Shigella_subtree_2.txt
## │   └── Shigella_tree.txt
## ├── rmarkdown
## │   ├── outbreak_report.docx
## │   ├── outbreak_report.html
## │   ├── outbreak_report.pdf
## │   ├── outbreak_report.pptx
## │   ├── outbreak_report.Rmd
## │   ├── report_tabbed_example.html
## │   └── report_tabbed_example.Rmd
## ├── standardization
## │   ├── country_demographics.csv
## │   ├── country_demographics_2.csv
## │   ├── deaths_countryA.csv
## │   ├── deaths_countryB.csv
## │   └── world_standard_population_by_sex.csv
## ├── surveys
## │   ├── population.xlsx
## │   ├── survey_data.xlsx
## │   └── survey_dict.xlsx
## └── time_series
##     ├── campylobacter_germany.xlsx
##     └── weather
##         ├── germany_weather2002.nc
##         ├── germany_weather2003.nc
##         ├── germany_weather2004.nc
##         ├── germany_weather2005.nc
##         ├── germany_weather2006.nc
##         ├── germany_weather2007.nc
##         ├── germany_weather2008.nc
##         ├── germany_weather2009.nc
##         ├── germany_weather2010.nc
##         └── germany_weather2011.nc</code></pre>
</div>
</div>
<div id="list-files-in-a-directory" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> Listar los archivos de un directorio<a class="anchor" aria-label="anchor" href="#list-files-in-a-directory"><i class="fas fa-link"></i></a>
</h2>
<p>Para listar sólo los nombres de los archivos de un directorio puedes utilizar <code><a href="https://rdrr.io/r/base/list.files.html">dir()</a></code> de R <strong>base</strong>. Por ejemplo, este comando lista los nombres de los archivos de la subcarpeta “population” de la carpeta “data” en un proyecto R. La ruta relativa de los archivos se proporciona utilizando <code>here()</code> (sobre la que puede leer más en la página de <a href="#import-and-export">importación y exportación</a>).</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># file names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"gis"</span>, <span class="st">"population"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "sle_admpop_adm3_2020.csv"                        "sle_population_statistics_sierraleone_2020.xlsx"</code></pre>
<p>Para listar las rutas completas de los archivos del directorio, puedes utilizar <code>dir_ls()</code> de <strong>fs</strong>. Una alternativa de R <strong>base</strong> es <code><a href="https://rdrr.io/r/base/list.files.html">list.files()</a></code>.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># file paths</span></span>
<span><span class="fu">dir_ls</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"gis"</span>, <span class="st">"population"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## C:/Users/neale/Documents/Applied Epi/repos/epiRhandbook_es/data/gis/population/sle_admpop_adm3_2020.csv
## C:/Users/neale/Documents/Applied Epi/repos/epiRhandbook_es/data/gis/population/sle_population_statistics_sierraleone_2020.xlsx</code></pre>
<p>Para obtener toda la información de los metadatos de cada archivo en un directorio, (por ejemplo, la ruta, la fecha de modificación, etc.) puedes utilizar <code>dir_info()</code> de <strong>fs</strong>.</p>
<p>Esto puede ser especialmente útil si quieres extraer la última hora de modificación del archivo, por ejemplo si quieres importar la versión más reciente de un archivo. Para ver un ejemplo de esto, consulta la página de <a href="#import-and-export">importación y exportación</a>.</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># file info</span></span>
<span><span class="fu">dir_info</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"gis"</span>, <span class="st">"population"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Aquí está el dataframe devuelto. Desplázate a la derecha para ver todas las columnas.</p>
<div id="htmlwidget-8f1cbc14c3c647e7a08c" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-8f1cbc14c3c647e7a08c">{"x":{"filter":"none","vertical":false,"data":[["C:/Users/neale/Documents/Applied Epi/repos/epiRhandbook_es/data/gis/population/sle_admpop_adm3_2020.csv","C:/Users/neale/Documents/Applied Epi/repos/epiRhandbook_es/data/gis/population/sle_population_statistics_sierraleone_2020.xlsx"],["file","file"],[26939,57850],[33206,33206],["2022-11-22T08:42:01Z","2022-11-22T08:42:01Z"],[null,null],[null,null],[1040926351,1040926351],[1,1],[0,0],[6.19244948859016e+15,9.28867423240738e+15],[4096,4096],[56,120],[0,0],[0,0],["2022-11-22T10:52:15Z","2022-11-22T08:42:01Z"],["2022-11-22T08:42:01Z","2022-11-22T08:42:01Z"],["2022-11-22T08:42:01Z","2022-11-22T08:42:01Z"]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>path<\/th>\n      <th>type<\/th>\n      <th>size<\/th>\n      <th>permissions<\/th>\n      <th>modification_time<\/th>\n      <th>user<\/th>\n      <th>group<\/th>\n      <th>device_id<\/th>\n      <th>hard_links<\/th>\n      <th>special_device_id<\/th>\n      <th>inode<\/th>\n      <th>block_size<\/th>\n      <th>blocks<\/th>\n      <th>flags<\/th>\n      <th>generation<\/th>\n      <th>access_time<\/th>\n      <th>change_time<\/th>\n      <th>birth_time<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,3,7,8,9,10,11,12,13,14]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="file-information" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> Información sobre el archivo<a class="anchor" aria-label="anchor" href="#file-information"><i class="fas fa-link"></i></a>
</h2>
<p>Para extraer información de metadatos sobre un archivo específico, puedes utilizar <code>file_info()</code> de <strong>fs</strong> (o <code><a href="https://rdrr.io/r/base/file.info.html">file.info()</a></code> de R <strong>base</strong>).</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">file_info</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"case_linelists"</span>, <span class="st">"linelist_cleaned.rds"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-6a2ed2e548b65ed627f4" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-6a2ed2e548b65ed627f4">{"x":{"filter":"none","vertical":false,"data":[["C:/Users/neale/Documents/Applied Epi/repos/epiRhandbook_es/data/case_linelists/linelist_cleaned.rds"],["file"],[290144],[33206],["2022-11-22T09:34:23Z"],[null],[null],[1040926351],[1],[0],[5.34802455845691e+15],[4096],[568],[0],[0],["2022-11-22T13:06:42Z"],["2022-11-22T09:34:23Z"],["2022-11-22T08:42:00Z"]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>path<\/th>\n      <th>type<\/th>\n      <th>size<\/th>\n      <th>permissions<\/th>\n      <th>modification_time<\/th>\n      <th>user<\/th>\n      <th>group<\/th>\n      <th>device_id<\/th>\n      <th>hard_links<\/th>\n      <th>special_device_id<\/th>\n      <th>inode<\/th>\n      <th>block_size<\/th>\n      <th>blocks<\/th>\n      <th>flags<\/th>\n      <th>generation<\/th>\n      <th>access_time<\/th>\n      <th>change_time<\/th>\n      <th>birth_time<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,3,7,8,9,10,11,12,13,14]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>Aquí usamos <code>$</code> para indexar el resultado y devolver sólo el valor de <code>modification_time</code>.</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">file_info</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"case_linelists"</span>, <span class="st">"linelist_cleaned.rds"</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">modification_time</span></span></code></pre></div>
<pre><code>## [1] "2022-11-22 10:34:23 CET"</code></pre>
</div>
<div id="check-if-exists" class="section level2" number="2.4">
<h2>
<span class="header-section-number">2.4</span> Comprobar si existe<a class="anchor" aria-label="anchor" href="#check-if-exists"><i class="fas fa-link"></i></a>
</h2>
<div id="objetos-r" class="section level3 unnumbered">
<h3>Objetos R<a class="anchor" aria-label="anchor" href="#objetos-r"><i class="fas fa-link"></i></a>
</h3>
<p>Puedes utilizar <code><a href="https://rdrr.io/r/base/exists.html">exists()</a></code> de R <strong>base</strong> para comprobar si un objeto R existe <em>dentro</em> de R (escribe el nombre del objeto entre comillas).</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/exists.html">exists</a></span><span class="op">(</span><span class="st">"linelist"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Ten en cuenta que algunos paquetes de R <strong>base</strong> utilizan nombres de objetos genéricos como “data” entre bastidores, que aparecerán como TRUE a menos que se especifique <code>inherit = FALSE</code>. Esta es una razón para no nombrar tu conjunto de datos como “data”.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/exists.html">exists</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/exists.html">exists</a></span><span class="op">(</span><span class="st">"data"</span>, inherit <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Si estás escribiendo una función, deberías utilizar <code><a href="https://rdrr.io/r/base/missing.html">missing()</a></code> de R <strong>base</strong> para comprobar si un argumento está presente o no, en lugar de <code><a href="https://rdrr.io/r/base/exists.html">exists()</a></code>.</p>
</div>
<div id="directorios" class="section level3 unnumbered">
<h3>Directorios<a class="anchor" aria-label="anchor" href="#directorios"><i class="fas fa-link"></i></a>
</h3>
<p>Para comprobar si un directorio existe, escribe la ruta del archivo (y el nombre del archivo) a <code>is_dir()</code> de <strong>fs</strong>. Desplázate a la derecha para ver que se imprime <code>TRUE</code>.</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">is_dir</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## C:/Users/neale/Documents/Applied Epi/repos/epiRhandbook_es/data 
##                                                            TRUE</code></pre>
<p>Una alternativa de R <strong>base</strong> es <code><a href="https://rdrr.io/r/base/files.html">file.exists()</a></code>.</p>
</div>
<div id="files" class="section level3 unnumbered">
<h3>Files<a class="anchor" aria-label="anchor" href="#files"><i class="fas fa-link"></i></a>
</h3>
<p>Para comprobar si un archivo específico existe, utiliza <code>is_file()</code> de <strong>fs</strong>. Desplázate a la derecha para ver que se imprime <code>TRUE</code>.</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">is_file</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"case_linelists"</span>, <span class="st">"linelist_cleaned.rds"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## C:/Users/neale/Documents/Applied Epi/repos/epiRhandbook_es/data/case_linelists/linelist_cleaned.rds 
##                                                                                                TRUE</code></pre>
<p>Una alternativa de R <strong>base</strong> es <code><a href="https://rdrr.io/r/base/files.html">file.exists()</a></code>.</p>
</div>
</div>
<div id="create" class="section level2" number="2.5">
<h2>
<span class="header-section-number">2.5</span> Crear<a class="anchor" aria-label="anchor" href="#create"><i class="fas fa-link"></i></a>
</h2>
<div id="directorios-1" class="section level3 unnumbered">
<h3>Directorios<a class="anchor" aria-label="anchor" href="#directorios-1"><i class="fas fa-link"></i></a>
</h3>
<p>Para crear un nuevo directorio (carpeta) puede utilizar <code>dir_create()</code> de <strong>fs</strong>. Si el directorio ya existe, no se sobrescribirá y no se devolverá ningún error.</p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dir_create</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"test"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Una alternativa es <code><a href="https://rdrr.io/r/base/files2.html">dir.create()</a></code> de R <strong>base</strong>, que mostrará un error si el directorio ya existe. En cambio, <code>dir_create()</code> en este escenario será silencioso.</p>
</div>
<div id="archivos" class="section level3 unnumbered">
<h3>Archivos<a class="anchor" aria-label="anchor" href="#archivos"><i class="fas fa-link"></i></a>
</h3>
<p>Puedes crear un archivo (vacío) con <code>file_create()</code> de <strong>fs</strong>. Si el archivo ya existe, no se sobreescribirá ni se modificará.</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">file_create</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"test.rds"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Una alternativa de R <strong>base</strong> es <code><a href="https://rdrr.io/r/base/files.html">file.create()</a></code>. Pero si el archivo ya existe, esta opción lo truncará. Si se utiliza <code>file_create()</code> el archivo se dejará sin cambios</p>
</div>
<div id="crear-si-no-existe" class="section level3 unnumbered">
<h3>Crear si no existe<a class="anchor" aria-label="anchor" href="#crear-si-no-existe"><i class="fas fa-link"></i></a>
</h3>
<p>EN CONSTRUCCIÓN</p>
</div>
</div>
<div id="delete" class="section level2" number="2.6">
<h2>
<span class="header-section-number">2.6</span> Borrar<a class="anchor" aria-label="anchor" href="#delete"><i class="fas fa-link"></i></a>
</h2>
<div id="objetos-r-1" class="section level3 unnumbered">
<h3>Objetos R<a class="anchor" aria-label="anchor" href="#objetos-r-1"><i class="fas fa-link"></i></a>
</h3>
<p>Utiliza <code><a href="https://rdrr.io/r/base/rm.html">rm()</a></code> de R <strong>base</strong> para eliminar un objeto R.</p>
</div>
<div id="directorios-2" class="section level3 unnumbered">
<h3>Directorios<a class="anchor" aria-label="anchor" href="#directorios-2"><i class="fas fa-link"></i></a>
</h3>
<p>Utiliza <code>dir_delete()</code> de <strong>fs</strong>.</p>
</div>
<div id="archivos-1" class="section level3 unnumbered">
<h3>Archivos<a class="anchor" aria-label="anchor" href="#archivos-1"><i class="fas fa-link"></i></a>
</h3>
<p>Puedes eliminar archivos con <code>file_delete()</code> de <strong>fs</strong>.</p>
</div>
</div>
<div id="running-other-files" class="section level2" number="2.7">
<h2>
<span class="header-section-number">2.7</span> Ejecución de otros archivos<a class="anchor" aria-label="anchor" href="#running-other-files"><i class="fas fa-link"></i></a>
</h2>
<div id="source" class="section level3 unnumbered">
<h3>
<code>source()</code><a class="anchor" aria-label="anchor" href="#source"><i class="fas fa-link"></i></a>
</h3>
<p>Para ejecutar un script de R desde otro script de R, puedes utilizar el comando <code><a href="https://rdrr.io/r/base/source.html">source()</a></code> (de R <strong>base</strong>).</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"scripts"</span>, <span class="st">"cleaning_scripts"</span>, <span class="st">"clean_testing_data.R"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Esto equivale a ver el script de R anterior y clicar en el botón “Source” en la parte superior derecha del script. Esto ejecutará el script pero lo hará de forma silenciosa (sin salida a la consola de R) a menos que se pretenda específicamente. Consulta la página sobre [Consola interactiva] para ver ejemplos de uso de <code><a href="https://rdrr.io/r/base/source.html">source()</a></code> para interactuar con un usuario a través de la consola de R en modo de pregunta y respuesta.</p>
<div class="inline-figure"><img src="images/source_button.png" width="82" height="300%" style="display: block; margin: auto;"></div>
</div>
<div id="render" class="section level3 unnumbered">
<h3>
<code>render()</code><a class="anchor" aria-label="anchor" href="#render"><i class="fas fa-link"></i></a>
</h3>
<p><code>render()</code> es una variación de <code><a href="https://rdrr.io/r/base/source.html">source()</a></code> que se utiliza más a menudo para los scripts de R markdown. Tu pescribes <code>input =</code> que es el archivo R markdown, y también <code>output_format =</code> (“html_document”, “pdf_document”, “word_document”, ““)</p>
<p>Mira la página sobre <a href="#reports-with-r-markdown">Informes con R Markdown</a> para más detalles. También consulta la documentación de <code>render()</code> <a href="https://rmarkdown.rstudio.com/docs/reference/render.html">aquí</a> o escribiendo <code>?render</code>.</p>
</div>
<div id="ejecutar-archivos-en-un-directorio" class="section level3 unnumbered">
<h3>Ejecutar archivos en un directorio<a class="anchor" aria-label="anchor" href="#ejecutar-archivos-en-un-directorio"><i class="fas fa-link"></i></a>
</h3>
<p>Puedes crear un bucle <em>for</em> y utilizarlo para <code><a href="https://rdrr.io/r/base/source.html">source()</a></code> cada archivo en un directorio, identificado con <code><a href="https://rdrr.io/r/base/list.files.html">dir()</a></code>.</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span><span class="op">(</span><span class="va">script</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"scripts"</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">".R$"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>   <span class="co"># for each script name in the R Project's "scripts" folder (with .R extension)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"scripts"</span>, <span class="va">script</span><span class="op">)</span><span class="op">)</span>                        <span class="co"># source the file with the matching name that exists in the scripts folder</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Si sólo quieres ejecutar determinados scripts, puedes identificarlos por su nombre de la siguiente manera:</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scripts_to_run</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>     <span class="st">"epicurves.R"</span>,</span>
<span>     <span class="st">"demographic_tables.R"</span>,</span>
<span>     <span class="st">"survival_curves.R"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">script</span> <span class="kw">in</span> <span class="va">scripts_to_run</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"scripts"</span>, <span class="va">script</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Aquí puedes ver una <a href="https://cran.r-project.org/web/packages/fs/vignettes/function-comparisons.html">comparación</a> de las funciones <strong>fs</strong> y R <strong>base</strong>.</p>
</div>
<div id="importar-archivos-en-un-directorio" class="section level3 unnumbered">
<h3>Importar archivos en un directorio<a class="anchor" aria-label="anchor" href="#importar-archivos-en-un-directorio"><i class="fas fa-link"></i></a>
</h3>
<p>Consulta la página sobre <a href="#import-and-export">importación y exportación</a> para importar y exportar archivos individuales.</p>
<p>Consulta también la página de <a href="#import-and-export">importación y exportación</a> para conocer los métodos para importar automáticamente el archivo más reciente, basándose en una fecha del nombre del archivo <em>o</em> mirando los metadatos del mismo.</p>
<p>Consulta la página sobre <a href="#iteration-loops-and-lists">Iteración, bucles y listas</a> para ver un ejemplo con el paquete <strong>purrr</strong> demostrando:</p>
<ul>
<li>Dividir un dataframe y guardarlo como múltiples archivos CSV</li>
<li>Dividir un dataframe y guardar cada parte como una hoja separada dentro de un libro de Excel</li>
<li>Importar varios archivos CSV y combinarlos en un dataframe</li>
<li>Importar un libro de Excel con varias hojas y combinarlas en un dataframe</li>
</ul>
</div>
</div>
<div id="base-r-4" class="section level2" number="2.8">
<h2>
<span class="header-section-number">2.8</span> R <strong>base</strong><a class="anchor" aria-label="anchor" href="#base-r-4"><i class="fas fa-link"></i></a>
</h2>
<p>Mira a continuación las funciones <code><a href="https://rdrr.io/r/base/list.files.html">list.files()</a></code> y <code><a href="https://rdrr.io/r/base/list.files.html">dir()</a></code>, que realizan la misma operación de listar archivos dentro de un directorio especificado. Puedes especificar <code>ignore.case =</code> o un patrón específico para buscar.</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu">here</span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu">here</span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">".csv"</span><span class="op">)</span></span>
<span><span class="co"># dir(path = here("data"), pattern = ".csv")</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu">here</span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">"evd"</span>, ignore.case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Si un archivo está actualmente “abierto”, se mostrará en su carpeta con una tilde delante, como “~$hospital_linelists.xlsx”.</p>
<!-- ======================================================= -->
</div>
<div id="resources-37" class="section level2" number="2.9">
<h2>
<span class="header-section-number">2.9</span> Recursos<a class="anchor" aria-label="anchor" href="#resources-37"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://cran.r-project.org/web/packages/fs/vignettes/function-comparisons.html" class="uri">https://cran.r-project.org/web/packages/fs/vignettes/function-comparisons.html</a></p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="writing-functions-1.html"><span class="header-section-number">1</span> Escribir funciones</a></div>
<div class="next"><a href="version-control-and-collaboration-with-git-and-github.html"><span class="header-section-number">3</span> Control de versiones y colaboración con Git y Github</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#directory-interactions"><span class="header-section-number">2</span> Interacciones con directorios</a></li>
<li>
<a class="nav-link" href="#preparation-38"><span class="header-section-number">2.1</span> Preparación</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#paquete-fs">Paquete fs</a></li>
<li><a class="nav-link" href="#imprimir-el-directorio-como-un-%C3%A1rbol-de-dendrogramas">Imprimir el directorio como un árbol de dendrogramas</a></li>
</ul>
</li>
<li><a class="nav-link" href="#list-files-in-a-directory"><span class="header-section-number">2.2</span> Listar los archivos de un directorio</a></li>
<li><a class="nav-link" href="#file-information"><span class="header-section-number">2.3</span> Información sobre el archivo</a></li>
<li>
<a class="nav-link" href="#check-if-exists"><span class="header-section-number">2.4</span> Comprobar si existe</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#objetos-r">Objetos R</a></li>
<li><a class="nav-link" href="#directorios">Directorios</a></li>
<li><a class="nav-link" href="#files">Files</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#create"><span class="header-section-number">2.5</span> Crear</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#directorios-1">Directorios</a></li>
<li><a class="nav-link" href="#archivos">Archivos</a></li>
<li><a class="nav-link" href="#crear-si-no-existe">Crear si no existe</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#delete"><span class="header-section-number">2.6</span> Borrar</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#objetos-r-1">Objetos R</a></li>
<li><a class="nav-link" href="#directorios-2">Directorios</a></li>
<li><a class="nav-link" href="#archivos-1">Archivos</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#running-other-files"><span class="header-section-number">2.7</span> Ejecución de otros archivos</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#source">source()</a></li>
<li><a class="nav-link" href="#render">render()</a></li>
<li><a class="nav-link" href="#ejecutar-archivos-en-un-directorio">Ejecutar archivos en un directorio</a></li>
<li><a class="nav-link" href="#importar-archivos-en-un-directorio">Importar archivos en un directorio</a></li>
</ul>
</li>
<li><a class="nav-link" href="#base-r-4"><span class="header-section-number">2.8</span> R base</a></li>
<li><a class="nav-link" href="#resources-37"><span class="header-section-number">2.9</span> Recursos</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>EpiRhandbook en español</strong>" was written by El equipo del manual. It was last built on 2022-11-22.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
