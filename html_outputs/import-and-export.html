<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>7 Importación y exportación | EpiRhandbook en español</title>
<meta name="author" content="El equipo del manual">
<meta name="description" content="En esta página describimos las formas de localizar, importar y exportar archivos: Uso del paquete rio y las funciones import() y export() para importar muchos tipos de archivos. Uso del paquete...">
<meta name="generator" content="bookdown 0.28 with bs4_book()">
<meta property="og:title" content="7 Importación y exportación | EpiRhandbook en español">
<meta property="og:type" content="book">
<meta property="og:description" content="En esta página describimos las formas de localizar, importar y exportar archivos: Uso del paquete rio y las funciones import() y export() para importar muchos tipos de archivos. Uso del paquete...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="7 Importación y exportación | EpiRhandbook en español">
<meta name="twitter:description" content="En esta página describimos las formas de localizar, importar y exportar archivos: Uso del paquete rio y las funciones import() y export() para importar muchos tipos de archivos. Uso del paquete...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.24/datatables.js"></script><link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/tabwid-1.1.0/tabwid.css" rel="stylesheet">
<link href="libs/tabwid-1.1.0/scrool.css" rel="stylesheet">
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script><script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.9/grViz.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><script src="libs/plotly-binding-4.10.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script><link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="libs/plotly-basic-2.5.1/plotly-basic-2.5.1.min.js"></script><script src="libs/plotly-cartesian-2.5.1/plotly-cartesian-2.5.1.min.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-9.3.1/highcharts.js"></script><script src="libs/highcharts-9.3.1/highcharts-3d.js"></script><script src="libs/highcharts-9.3.1/highcharts-more.js"></script><script src="libs/highcharts-9.3.1/modules/stock.js"></script><script src="libs/highcharts-9.3.1/modules/map.js"></script><script src="libs/highcharts-9.3.1/modules/data.js"></script><script src="libs/highcharts-9.3.1/modules/exporting.js"></script><script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script><script src="libs/highcharts-9.3.1/modules/drilldown.js"></script><script src="libs/highcharts-9.3.1/modules/item-series.js"></script><script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-9.3.1/modules/annotations.js"></script><script src="libs/highcharts-9.3.1/modules/export-data.js"></script><script src="libs/highcharts-9.3.1/modules/funnel.js"></script><script src="libs/highcharts-9.3.1/modules/heatmap.js"></script><script src="libs/highcharts-9.3.1/modules/treemap.js"></script><script src="libs/highcharts-9.3.1/modules/sankey.js"></script><script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script><script src="libs/highcharts-9.3.1/modules/organization.js"></script><script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script><script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script><script src="libs/highcharts-9.3.1/modules/sunburst.js"></script><script src="libs/highcharts-9.3.1/modules/vector.js"></script><script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script><script src="libs/highcharts-9.3.1/modules/xrange.js"></script><script src="libs/highcharts-9.3.1/modules/tilemap.js"></script><script src="libs/highcharts-9.3.1/modules/venn.js"></script><script src="libs/highcharts-9.3.1/modules/gantt.js"></script><script src="libs/highcharts-9.3.1/modules/timeline.js"></script><script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script><script src="libs/highcharts-9.3.1/modules/bullet.js"></script><script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script><script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script><script src="libs/highcharts-9.3.1/modules/lollipop.js"></script><script src="libs/highcharts-9.3.1/modules/series-label.js"></script><script src="libs/highcharts-9.3.1/plugins/motion.js"></script><script src="libs/highcharts-9.3.1/custom/reset.js"></script><script src="libs/highcharts-9.3.1/modules/boost.js"></script><script src="libs/highchart-binding-0.9.4/highchart.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QXDW878QLX');
    </script>
</head>
<body>
<div class="alert alert-info alert-dismissible">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
      <strong>¿Necesita ayuda para aprender R?</strong> Inscríbase en Applied Epi's <a href="https://www.appliedepi.org/live/" class="alert-link">curso de introducción a R</a>, pruebe nuestro <a href="https://www.appliedepi.org/tutorial/" class="alert-link">tutoriales gratuitos de R</a>, hacer un post en nuestro <a href="https://community.appliedepi.org/" class="alert-link">Foro comunitario de preguntas y respuestas</a>, o pregunte por nuestro <a href="mailto:contact@appliedepi.org" class="alert-link">R Servicio de asistencia técnica</a>.
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style_bs4.css">
<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">EpiRhandbook en español</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"></a></li>
<li class="book-part">Acerca de este libro</li>
<li><a class="" href="editorial-and-technical-notes.html"><span class="header-section-number">1</span> Notas editoriales y técnicas</a></li>
<li><a class="" href="download-handbook-and-data.html"><span class="header-section-number">2</span> Descargando el manual y los datos</a></li>
<li class="book-part">Aspectos básicos</li>
<li><a class="" href="r-basics.html"><span class="header-section-number">3</span> Fundamentos de R</a></li>
<li><a class="" href="transition-to-r.html"><span class="header-section-number">4</span> Transición a R</a></li>
<li><a class="" href="suggested-packages-1.html"><span class="header-section-number">5</span> Paquetes recomendados</a></li>
<li><a class="" href="r-projects.html"><span class="header-section-number">6</span> Proyectos en R</a></li>
<li><a class="active" href="import-and-export.html"><span class="header-section-number">7</span> Importación y exportación</a></li>
<li class="book-part">Gestión de datos</li>
<li><a class="" href="cleaning-data-and-core-functions.html"><span class="header-section-number">8</span> Limpieza de datos y funciones básicas</a></li>
<li><a class="" href="working-with-dates.html"><span class="header-section-number">9</span> Trabajando con Fechas</a></li>
<li><a class="" href="characters-and-strings.html"><span class="header-section-number">10</span> Caracteres y cadenas</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">11</span> Factores</a></li>
<li><a class="" href="pivoting-data.html"><span class="header-section-number">12</span> Pivotar datos</a></li>
<li><a class="" href="grouping-data.html"><span class="header-section-number">13</span> Agrupar datos</a></li>
<li><a class="" href="joining-data.html"><span class="header-section-number">14</span> Unir datos</a></li>
<li><a class="" href="de-duplication.html"><span class="header-section-number">15</span> De-duplicación</a></li>
<li><a class="" href="iteration-loops-and-lists.html"><span class="header-section-number">16</span> Iteración, bucles y listas</a></li>
<li class="book-part">Análisis</li>
<li><a class="" href="descriptive-tables.html"><span class="header-section-number">17</span> Tablas descriptivas</a></li>
<li><a class="" href="simple-statistical-tests.html"><span class="header-section-number">18</span> Tests estadísticos sencillos</a></li>
<li><a class="" href="univariate-and-multivariable-regression.html"><span class="header-section-number">19</span> Regresión univariante y multivariable</a></li>
<li><a class="" href="missing-data.html"><span class="header-section-number">20</span> Valores faltantes</a></li>
<li><a class="" href="standardised-rates.html"><span class="header-section-number">21</span> Tasas estandarizadas</a></li>
<li><a class="" href="moving-averages.html"><span class="header-section-number">22</span> Medias Móviles</a></li>
<li><a class="" href="time-series-and-outbreak-detection.html"><span class="header-section-number">23</span> Series temporales y detección de brotes</a></li>
<li><a class="" href="epidemic-modeling.html"><span class="header-section-number">24</span> Modelización de epidemias</a></li>
<li><a class="" href="contact-tracing-1.html"><span class="header-section-number">25</span> Rastreo de contactos</a></li>
<li><a class="" href="survey-analysis.html"><span class="header-section-number">26</span> Análisis de encuestas</a></li>
<li><a class="" href="survival-analysis.html"><span class="header-section-number">27</span> Análisis de supervivencia</a></li>
<li><a class="" href="gis-basics.html"><span class="header-section-number">28</span> Conceptos básicos de los SIG</a></li>
<li class="book-part">Visualización de datos</li>
<li><a class="" href="tables-for-presentation.html"><span class="header-section-number">29</span> Tablas para presentaciones</a></li>
<li><a class="" href="ggplot-basics.html"><span class="header-section-number">30</span> Conceptos básicos de ggplot</a></li>
<li><a class="" href="ggplot-tips.html"><span class="header-section-number">31</span> Consejos de ggplot</a></li>
<li><a class="" href="epidemic-curves.html"><span class="header-section-number">32</span> Curvas epidémicas</a></li>
<li><a class="" href="demographic-pyramids-and-likert-scales.html"><span class="header-section-number">33</span> Pirámides de población y escalas de Likert</a></li>
<li><a class="" href="heat-plots.html"><span class="header-section-number">34</span> Gráficos de calor</a></li>
<li><a class="" href="diagrams-and-charts.html"><span class="header-section-number">35</span> Diagramas y gráficos</a></li>
<li><a class="" href="combinations-analysis.html"><span class="header-section-number">36</span> Análisis de combinaciones</a></li>
<li><a class="" href="transmission-chains.html"><span class="header-section-number">37</span> Cadenas de transmisión</a></li>
<li><a class="" href="phylogenetic-trees-1.html"><span class="header-section-number">38</span> Árboles filogenéticos</a></li>
<li><a class="" href="interactive-plots.html"><span class="header-section-number">39</span> Gráficos interactivos</a></li>
<li class="book-part">Informes y Dashboards</li>
<li><a class="" href="reports-with-r-markdown.html"><span class="header-section-number">40</span> Informes con R Markdown</a></li>
<li><a class="" href="organizing-routine-reports.html"><span class="header-section-number">41</span> Organización de informes rutinarios</a></li>
<li><a class="" href="dashboards-with-r-markdown.html"><span class="header-section-number">42</span> Dashboards con R Markdown</a></li>
<li><a class="" href="dashboards-with-shiny.html"><span class="header-section-number">43</span> Dashboards con Shiny</a></li>
<li class="book-part">Miscelánea</li>
<li><a class="" href="writing-functions-1.html"><span class="header-section-number">44</span> Escribir funciones</a></li>
<li><a class="" href="directory-interactions.html"><span class="header-section-number">45</span> Interacciones con directorios</a></li>
<li><a class="" href="version-control-and-collaboration-with-git-and-github.html"><span class="header-section-number">46</span> Control de versiones y colaboración con Git y Github</a></li>
<li><a class="" href="common-errors.html"><span class="header-section-number">47</span> Errores comunes</a></li>
<li><a class="" href="getting-help.html"><span class="header-section-number">48</span> Cómo obtener ayuda</a></li>
<li><a class="" href="r-on-network-drives.html"><span class="header-section-number">49</span> R en redes locales</a></li>
<li><a class="" href="data-table.html"><span class="header-section-number">50</span> Data Table</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="import-and-export" class="section level1" number="7">
<h1>
<span class="header-section-number">7</span> Importación y exportación<a class="anchor" aria-label="anchor" href="#import-and-export"><i class="fas fa-link"></i></a>
</h1>
<div class="inline-figure"><img src="images/Import_Export_1500x500.png" width="100%"></div>
<p>En esta página describimos las formas de localizar, importar y exportar
archivos:</p>
<ul>
<li><p>Uso del paquete <strong>rio</strong> y las funciones <code>import()</code> y <code><a href="https://rdrr.io/pkg/plotly/man/export.html">export()</a></code> para importar muchos tipos de archivos.</p></li>
<li><p>Uso del paquete <strong>here</strong> para localizar archivos relativos a la raíz de un proyecto R - para evitar complicaciones de las rutas de los archivos que son específicas de un ordenador</p></li>
<li><p>Escenarios específicos de importación, como:</p></li>
<li><p>Hojas de Excel</p></li>
<li><p>Encabezados desordenados y filas que se saltan/son omitidas</p></li>
<li><p>Desde las hojas de Google</p></li>
<li><p>A partir de datos publicados en sitios web</p></li>
<li><p>Con las API</p></li>
<li><p>Importar el archivo <em>más reciente</em></p></li>
<li><p>Introducción manual de datos</p></li>
<li><p>Tipos de archivos específicos de R, como RDS y RData</p></li>
<li><p>Exportar/guardar archivos y gráficos</p></li>
</ul>
<!-- ======================================================= --><div id="overview" class="section level2" number="7.1">
<h2>
<span class="header-section-number">7.1</span> Resumen<a class="anchor" aria-label="anchor" href="#overview"><i class="fas fa-link"></i></a>
</h2>
<p>Cuando importas unos “datos” en R, generalmente estás creando un nuevo objeto <em>data frame</em> en tu entorno de R y definiéndolo como un archivo importado (por ejemplo, Excel, CSV, TSV, RDS) que será guardado en tu disco en una determinada ruta/dirección.</p>
<p>Puedes importar/exportar muchos tipos de archivos, incluidos los creados por otros programas estadísticos (SAS, STATA, SPSS). También puedes conectarte a bases de datos relacionales.</p>
<p>R tiene incluso sus propios formatos de datos:</p>
<ul>
<li>Un archivo RDS (.rds) almacena un único objeto R, como un dataframe. Son útiles para almacenar datos limpios, ya que mantienen los tipos de columnas de R. Lee más en <a href="import-and-export.html#import_rds">esta sección</a>.</li>
<li>Un archivo RData (.Rdata) puede utilizarse para almacenar múltiples objetos, o incluso un espacio de trabajo R completo. Lee más en <a href="import-and-export.html#import_rdata">esta sección</a>.</li>
</ul>
<!-- ======================================================= -->
</div>
<div id="the-rio-package" class="section level2" number="7.2">
<h2>
<span class="header-section-number">7.2</span> El paquete <strong>rio</strong><a class="anchor" aria-label="anchor" href="#the-rio-package"><i class="fas fa-link"></i></a>
</h2>
<p>El paquete de R que recomendamos es: <strong>rio</strong>. El nombre “rio” es una abreviatura de “R I/O” (input/output).</p>
<p>Sus funciones <code>import()</code> y <code><a href="https://rdrr.io/pkg/plotly/man/export.html">export()</a></code> pueden manejar muchos tipos de archivos diferentes (por ejemplo, .xlsx, .csv, .rds, .tsv). Cuando se proporciona una ruta de archivo a cualquiera de estas funciones (incluyendo la extensión del archivo como “.csv”), <strong>rio</strong> leerá la extensión y utilizará la herramienta correcta para importar o exportar el archivo.</p>
<p>La alternativa al uso de <strong>rio</strong> es utilizar funciones de muchos otros paquetes, cada uno de los cuales es específico para un tipo de archivo. Por ejemplo, <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> (R <strong>base</strong>), <code>read.xlsx()</code> (paquete <strong>openxlsx</strong>), y <code>write_csv()</code> (paquete <strong>readr</strong>), etc. Estas alternativas pueden ser difíciles de recordar, mientras que usar <code>import()</code> y <code><a href="https://rdrr.io/pkg/plotly/man/export.html">export()</a></code> de <strong>rio</strong> es fácil.</p>
<p>Las funciones <code>import()</code> y <code><a href="https://rdrr.io/pkg/plotly/man/export.html">export()</a></code> de <strong>rio</strong> utilizan el paquete y la función adecuados para un archivo determinado, basándose en su extensión. Al final de esta página puedes ver una tabla completa de los paquetes/funciones que utiliza <strong>rio</strong> en segundo plano. También puede utilizarse para importar archivos de STATA, SAS y SPSS, entre otras docenas de tipos de archivos.</p>
<p>La importación/exportación de shapefiles requiere otros paquetes, como se detalla en la página sobre <a href="gis-basics.html#gis-basics">Conceptos básicos de los SIG</a> (Sistemas de Información Geográfica).</p>
</div>
<div id="here" class="section level2" number="7.3">
<h2>
<span class="header-section-number">7.3</span> El paquete <strong>here</strong><a class="anchor" aria-label="anchor" href="#here"><i class="fas fa-link"></i></a>
</h2>
<p>El paquete <strong>here</strong> y su función <code>here()</code> facilitan la tarea de decirle a R dónde encontrar y guardar tus archivos - en esencia, construye rutas de archivos.</p>
<p>Utilizado junto con un proyecto R, <strong>here</strong> te permite describir la ubicación de los archivos en tu proyecto R en relación con el <em>directorio raíz</em> de los proyectos de R (la carpeta de nivel superior). Esto es útil cuando el proyecto R puede ser compartido o accedido por múltiples personas/ordenadores. Evita las complicaciones debidas a las rutas de archivos únicas en diferentes ordenadores (por ejemplo, <code>"C:/Users/Laura/Documents..."</code> al “comenzar” la ruta de archivos en un lugar común a todos los usuarios (la raíz del proyecto R).</p>
<p>Así es como funciona <code>here()</code> dentro de un proyecto R:</p>
<ul>
<li><p>Cuando, dentro del proyecto R, se carga por primera vez el paquete <strong>here</strong>, se coloca un pequeño archivo llamado “.here” en la carpeta raíz de tu proyecto R como un “punto de referencia” o “ancla”</p></li>
<li><p>En tus scripts, para referenciar un archivo en las subcarpetas del proyecto R, se utiliza la función <code>here()</code> para construir la ruta del archivo <em>en relación con ese ancla</em></p></li>
<li><p>Para construir la ruta de los archivos, escribe los nombres de las carpetas más allá de la raíz, entre comillas, separados por comas, y finalmente termina con el nombre y la extensión del archivo, como se muestra a continuación</p></li>
<li><p>Las rutas de <code>here()</code> pueden utilizarse tanto para la importación como para la exportación</p></li>
</ul>
<p>Por ejemplo, a continuación, la función import() recibe una ruta de archivo construida con <code>here()</code>.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"linelists"</span>, <span class="st">"ebola_linelist.xlsx"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>El comando <code>here("data", "linelists", "ebola_linelist.xlsx")</code> en realidad está proporcionando la ruta completa del archivo que es <em>única para el ordenador del usuario</em>:</p>
<pre><code>"C:/Users/Laura/Documents/my_R_project/data/linelists/ebola_linelist.xlsx"</code></pre>
<p>Lo bueno es que el comando <code>here()</code> puede ejecutarse en cualquier ordenador que acceda al proyecto R.</p>
<p><span style="color: darkgreen;"><strong><em>CONSEJO:</em></strong> Si no estás seguro de dónde está la raíz “.here”, ejecuta la función <code>here()</code> con los paréntesis vacíos.</span></p>
<p>Lee más sobre el paquete <strong>here</strong> <a href="https://here.r-lib.org/">en este enlace</a>.</p>
<!-- ======================================================= -->
</div>
<div id="file-paths" class="section level2" number="7.4">
<h2>
<span class="header-section-number">7.4</span> Rutas de los archivos<a class="anchor" aria-label="anchor" href="#file-paths"><i class="fas fa-link"></i></a>
</h2>
<p>Al importar o exportar datos, debes proporcionar una ruta de archivo. Puedes hacerlo de tres maneras:</p>
<ol style="list-style-type: decimal">
<li>
<em>Recomendado:</em> proporcionar una ruta de archivo “relativa” con el paquete <strong>here</strong>
</li>
<li>Proporcionar la ruta “completa” / “absoluta” del archivo</li>
<li>Seleccionar manualmente los archivos</li>
</ol>
<div id="rutas-de-archivos-relativas" class="section level3 unnumbered">
<h3>Rutas de archivos “relativas”<a class="anchor" aria-label="anchor" href="#rutas-de-archivos-relativas"><i class="fas fa-link"></i></a>
</h3>
<p>En R, las rutas de archivo “relativas” consisten en la ruta de archivo <em>relativa a</em> la raíz de un proyecto R. Permiten rutas de archivo más simples que pueden funcionar en diferentes ordenadores (por ejemplo, si el proyecto R está en una unidad compartida o se envía por correo electrónico). Como se ha descrito <a href="import-and-export.html#here">anteriormente</a> las rutas de archivo relativas se facilitan mediante el uso del paquete <strong>here</strong>.</p>
<p>A continuación se muestra un ejemplo de una ruta de archivo relativa construida con <code>here()</code>. Suponemos que el trabajo está en un proyecto R que contiene una subcarpeta “data” y dentro de ella una subcarpeta “linelists”, en la que está el archivo .xlsx de interés.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"linelists"</span>, <span class="st">"ebola_linelist.xlsx"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="rutas-absolutas" class="section level3 unnumbered">
<h3>Rutas “absolutas”<a class="anchor" aria-label="anchor" href="#rutas-absolutas"><i class="fas fa-link"></i></a>
</h3>
<p>Las rutas absolutas o “completas” de los archivos pueden proporcionarse a funciones como <code>import()</code>, pero son “frágiles”, ya que son únicas para el ordenador específico del usuario y, por tanto, <em>no se recomiendan</em>.</p>
<p>A continuación se muestra un ejemplo de ruta absoluta de archivos, donde en el ordenador de Laura hay una carpeta “analysis”, una subcarpeta “data” y dentro de ésta una subcarpeta “linelists”, en la que se encuentra el archivo .xlsx de interés.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="st">"C:/Users/Laura/Documents/analysis/data/linelists/ebola_linelist.xlsx"</span><span class="op">)</span></span></code></pre></div>
<p>Hay que tener en cuenta algunas cosas sobre las rutas absolutas de los archivos:</p>
<ul>
<li>
<strong>Evita utilizar rutas absolutas de archivos</strong>, ya que el script no funcionará si se ejecuta en un ordenador diferente<br>
</li>
<li>
<em>Utiliza barras inclinadas</em> (<code>/</code>), como en el ejemplo anterior (nota: esto <em>NO</em> es el valor predeterminado para las rutas de archivos de Windows)</li>
<li>Las rutas de archivos que comienzan con barras dobles (por ejemplo, “//…”) probablemente <strong>no serán reconocidas por R</strong> y producirán un error. Considera la posibilidad de trasladar tu trabajo a una unidad “con nombre” o que comience con una letra (por ejemplo, “J:” o “C:”). Consulta la página sobre <a href="directory-interactions.html#directory-interactions">interacciones con directorios</a> para obtener más detalles sobre esta cuestión.</li>
</ul>
<p>Un escenario en el que las rutas absolutas de los archivos pueden ser apropiadas es cuando se quiere importar un archivo desde una unidad compartida que tiene la misma ruta de archivo completa para todos los usuarios.</p>
<p><span style="color: darkgreen;"><strong><em>CONSEJO:</em></strong> Para convertir rápidamente las barras inclinadas <code>\</code> a <code>/</code>, resalta el código de interés, usa Ctrl+f (en Windows), marca la casilla de opción para “En selección”, y luego usa la funcionalidad de reemplazo para convertirlos.</span></p>
<!-- ======================================================= -->
</div>
<div id="selección-manual" class="section level3 unnumbered">
<h3>Selección manual<a class="anchor" aria-label="anchor" href="#selecci%C3%B3n-manual"><i class="fas fa-link"></i></a>
</h3>
<p>Puedes importar datos manualmente mediante uno de estos métodos:</p>
<ol style="list-style-type: decimal">
<li>En el panel de entorno de RStudio, cliquea en “Import Dataset”, y selecciona el tipo de datos</li>
<li>Cliquea en File / Import dataset / (selecciona el tipo de datos)</li>
<li>Para codificar la selección manual, utiliza el comando de <code><a href="https://rdrr.io/r/base/file.choose.html">file.choose()</a></code> (dejando los paréntesis vacíos) para provocar la aparición de una <strong>ventana emergente</strong> que permita al usuario seleccionar manualmente el archivo de su ordenador. Por ejemplo:</li>
</ol>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Selección manual de un archivo. Cuando se ejecute este comando, aparecerá una ventana EMERGENTE.</span></span>
<span></span>
<span><span class="co"># La ruta del archivo seleccionado será suministrada al comando import().</span></span>
<span></span>
<span><span class="va">my_data</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.choose.html">file.choose</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><span style="color: darkgreen;"><strong><em>CONSEJO:</em></strong> La <strong>ventana emergente</strong> puede aparecer DETRÁS de la ventana de RStudio.</span></p>
</div>
</div>
<div id="import-data" class="section level2" number="7.5">
<h2>
<span class="header-section-number">7.5</span> Importar datos<a class="anchor" aria-label="anchor" href="#import-data"><i class="fas fa-link"></i></a>
</h2>
<p>Utilizar <code>import()</code> es bastante sencillo. Simplemente escribe la ruta del archivo (incluyendo el nombre y la extensión del archivo) entre comillas. Si utilizas here() para construir la ruta del archivo, sigue las instrucciones anteriores. A continuación se muestran algunos ejemplos:</p>
<p>Para importar un archivo csv que se encuentra en tu “directorio de trabajo” o en la carpeta raíz del proyecto R:</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="st">"linelist_cleaned.csv"</span><span class="op">)</span></span></code></pre></div>
<p>Para importar la primera hoja de un archivo de Excel que se encuentra en las subcarpetas “data” y “linelists” del proyecto R (la ruta del archivo construida con <code>here()</code>):</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"linelists"</span>, <span class="st">"linelist_cleaned.xlsx"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Para importar un data frame (un archivo .rds) utilizando una ruta de archivo absoluta:</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="st">"C:/Users/Laura/Documents/tuberculosis/data/linelists/linelist_cleaned.rds"</span><span class="op">)</span></span></code></pre></div>
<div id="hojas-de-excel-específicas" class="section level3 unnumbered">
<h3>Hojas de Excel específicas<a class="anchor" aria-label="anchor" href="#hojas-de-excel-espec%C3%ADficas"><i class="fas fa-link"></i></a>
</h3>
<p>Por defecto, si proporcionas un archivo de Excel (.xlsx) a <code>import()</code>, se importará la primera hoja del libro. Si deseas importar una <strong>hoja</strong> específica, incluye el nombre de la hoja con el argumento <code>which =</code>. Por ejemplo:</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_data</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="st">"my_excel_file.xlsx"</span>, which <span class="op">=</span> <span class="st">"Sheetname"</span><span class="op">)</span></span></code></pre></div>
<p>Utilizando el método <code>here()</code> para proporcionar una vía relativa a import(), también podés importar una hoja específica añadiendo el argumento which = después del paréntesis de cierre de la función here().</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="import-and-export.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Demostración: importación de una hoja de Excel específica al utilizar rutas relativas con el paquete 'here'</span></span>
<span id="cb54-2"><a href="import-and-export.html#cb54-2" aria-hidden="true" tabindex="-1"></a>linelist_raw <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"linelist.xlsx"</span>), <span class="at">which =</span> <span class="st">"Sheet1"</span>)<span class="st">`</span><span class="at">  </span></span></code></pre></div>
<p>Para <em>exportar</em> un dataframe de R a una hoja de Excel específica y que el resto del archivo de Excel permanezca sin cambios, tendrás que importar, editar y exportar con un paquete alternativo destinado a este fin, como <strong>openxlsx</strong>. Vea más información en la página sobre las <a href="directory-interactions.html#directory-interactions">interacciones con directorios</a> o <a href="https://ycphs.github.io/openxlsx/">en esta página de github</a>.</p>
<p>Si tu libro de Excel es .xlsb (libro de Excel en formato binario) es posible que no puedas importarlo con <strong>rio</strong>. Considera la posibilidad de volver a guardarlo como .xlsx, o de utilizar un paquete como <strong>readxlsb</strong>, creado para <a href="https://cran.r-project.org/web/packages/readxlsb/vignettes/read-xlsb-workbook.html">este fin</a>.</p>
<!-- ======================================================= -->
</div>
<div id="import_missing" class="section level3 unnumbered">
<h3>Valores faltantes<a class="anchor" aria-label="anchor" href="#import_missing"><i class="fas fa-link"></i></a>
</h3>
<p>Es posible que desees designar qué valor(es) de tus datos se debe(n) considerar como faltantes (missing values). Como se explica en la página sobre <a href="missing-data.html#missing-data">Valores faltantes</a>, el valor en R para los valores faltantes es <code>NA</code>, pero tal vez los datos que vas a importar utiliza 99, “Missing”, o simplemente el espacio de caracteres vacíos “” en su lugar.</p>
<p>Utiliza el argumento <code>na =</code> en <code>import()</code> y proporciona el(los) valor(es) entre comillas (incluso si son números). Puedes especificar varios valores incluyéndolos dentro de un vector, utilizando <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> como se muestra a continuación.</p>
<p>Aquí, el valor “99” en los datos importados se considera valor faltante y se convierte en <code>NA</code> en R.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"my_linelist.xlsx"</span><span class="op">)</span>, na <span class="op">=</span> <span class="st">"99"</span><span class="op">)</span></span></code></pre></div>
<p>Aquí, cualquiera de los valores “Missing”, “” (celda vacía), o ” ” (un solo espacio) en los datos importados se convierten en <code>NA</code> en R.</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"my_linelist.csv"</span><span class="op">)</span>, na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Missing"</span>, <span class="st">""</span>, <span class="st">" "</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="saltar-filas" class="section level3 unnumbered">
<h3>Saltar filas<a class="anchor" aria-label="anchor" href="#saltar-filas"><i class="fas fa-link"></i></a>
</h3>
<p>Si querés evitar la importación de una fila de datos, puedes hacerlo con el argumento <code>skip =</code> utilizando <code>import()</code> de <strong>rio</strong> en un archivo .xlsx o .csv. Debes proporcionar el número de filas que deseas omitir.</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_raw</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="st">"linelist_raw.xlsx"</span>, skip <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>  <span class="co"># no importa la fila de cabecera</span></span></code></pre></div>
<p>Desafortunadamente, <code>skip =</code> sólo acepta un valor entero, <em>no</em> un rango (por ejemplo, “2:10” no funciona). Para omitir la importación de filas específicas que no son consecutivas desde el principio, considera la posibilidad de importar varias veces y utilizar <code>bind_rows()</code> de <strong>dplyr</strong>. Mira en el ejemplo siguiente cómo se omite sólo la fila 2.</p>
</div>
<div id="gestionar-una-segunda-fila-de-cabecera" class="section level3 unnumbered">
<h3>Gestionar una segunda fila de cabecera<a class="anchor" aria-label="anchor" href="#gestionar-una-segunda-fila-de-cabecera"><i class="fas fa-link"></i></a>
</h3>
<p>A veces, tus datos pueden tener una <em>segunda</em> fila de cabecera, por ejemplo, si se trata de una fila de “diccionario de datos”, como se muestra a continuación. Esta situación puede ser problemática porque puede hacer que todas las columnas se importen como de tipo “carácter”.</p>
<p>A continuación se muestra un ejemplo de este tipo de de datos (en el que la primera fila es el diccionario de datos).</p>
<div id="htmlwidget-a8ef205c6760f8bf2521" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-a8ef205c6760f8bf2521">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["case identification number assigned by MOH","5fe599","8689b7","11f8ea","b8812a"],["transmission chain generation number","4","4","2","3"],["estimated date of infection, mm/dd/yyyy","2014-05-08",null,null,"2014-05-04"],["date of symptom onset, YYYY-MM-DD","2014-05-13","2014-05-13","2014-05-16","2014-05-18"],["date of initial hospitalization, mm/dd/yyyy","2014-05-15","2014-05-14","2014-05-18","2014-05-20"],["date of outcome status determination",null,"2014-05-18","2014-05-30",null],["either 'Death' or 'Recovered' or 'Unknown'",null,"Recover","Recover",null],["either 'm' or 'f' or 'unknown'","m","f","m","f"],["age number","2","3","56","18"],["age unit, either 'years' or 'months' or 'days'","years","years","years","years"],[null,"2","3","56","18"],[null,"0-4","0-4","50-69","15-19"],[null,"0-4","0-4","55-59","15-19"],["Name of hospital of first admission","Other","Missing","St. Mark's Maternity Hospital (SMMH)","Port Hospital"],["longitude of residence, approx","-13.2157351064963","-13.2152339775486","-13.212910703914","-13.2363711169728"],["latitude of residence, approx","8.46897295100924","8.45171855856465","8.46481700596819","8.4754761613651"],["case_id of infector","f547d6",null,null,"f90f5f"],["context of known transmission event","other",null,null,"other"],[null,"27","25","91","41"],[null,"48","59","238","135"],[null,"22","22","21","23"],["presence of fever on admission, either 'yes' or 'no'","no",null,null,"no"],["presence of chills on admission, either 'yes' or 'no'","no",null,null,"no"],["presence of cough on admission, either 'yes' or 'no'","yes",null,null,"no"],["presence of aches on admission, either 'yes' or 'no'","no",null,null,"no"],["presence of vomiting on admission, either 'yes' or 'no'","yes",null,null,"no"],[null,"36.8","36.9","36.9","36.8"],["time of hospital admission HH:MM",null,"09:36","16:48","11:22"],[null,"117.1875","71.8184429761563","16.0652496292635","22.4965706447188"],[null,"2","1","2","2"]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>generation<\/th>\n      <th>date_infection<\/th>\n      <th>date_onset<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>date_outcome<\/th>\n      <th>outcome<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_unit<\/th>\n      <th>age_years<\/th>\n      <th>age_cat<\/th>\n      <th>age_cat5<\/th>\n      <th>hospital<\/th>\n      <th>lon<\/th>\n      <th>lat<\/th>\n      <th>infector<\/th>\n      <th>source<\/th>\n      <th>wt_kg<\/th>\n      <th>ht_cm<\/th>\n      <th>ct_blood<\/th>\n      <th>fever<\/th>\n      <th>chills<\/th>\n      <th>cough<\/th>\n      <th>aches<\/th>\n      <th>vomit<\/th>\n      <th>temp<\/th>\n      <th>time_admission<\/th>\n      <th>bmi<\/th>\n      <th>days_onset_hosp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":4,"scrollX":true,"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[4,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><div id="eliminar-la-segunda-fila-de-la-cabecera" class="section level4 unnumbered">
<h4>Eliminar la segunda fila de la cabecera<a class="anchor" aria-label="anchor" href="#eliminar-la-segunda-fila-de-la-cabecera"><i class="fas fa-link"></i></a>
</h4>
<p>Para eliminar la segunda fila de la cabecera, tendrás que importar los datos dos veces.</p>
<ol style="list-style-type: decimal">
<li>Importar los datos para almacenar los nombres correctos de las columnas</li>
<li>Importar los datos de nuevo, saltándose las <em>dos</em> primeras filas (cabecera y segunda fila)
3)Vincular los nombres correctos en el dataframe reducido</li>
</ol>
<p>El argumento exacto utilizado para vincular los nombres de las columnas correctas depende del tipo de archivo de datos (.csv, .tsv, .xlsx, etc.). Esto se debe a que <strong>rio</strong> utiliza una función diferente para los distintos tipos de archivos (véase la tabla anterior).</p>
<p><strong>Para los archivos de Excel:</strong> (<code>col_names =</code>)</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># importa por primera vez; almacena los nombres de las columnas</span></span>
<span><span class="va">linelist_raw_names</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="st">"linelist_raw.xlsx"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># guarda los nombres de columna</span></span>
<span></span>
<span><span class="co"># importa por segunda vez; omite la fila 2, y asigna los nombres de las columnas al argumento col_names =</span></span>
<span><span class="va">linelist_raw</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="st">"linelist_raw.xlsx"</span>,</span>
<span>                       skip <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                       col_names <span class="op">=</span> <span class="va">linelist_raw_names</span></span>
<span>                       <span class="op">)</span> </span></code></pre></div>
<p><strong>Para archivos CSV:</strong> (<code>col.names =</code>)</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># primera importación; almacena los nombres de las columnas</span></span>
<span><span class="va">linelist_raw_names</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="st">"linelist_raw.csv"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># save true column names</span></span>
<span></span>
<span><span class="co"># nota: el argumento para archivos csv es 'col.names = '</span></span>
<span><span class="va">linelist_raw</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="st">"linelist_raw.csv"</span>,</span>
<span>                       skip <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                       col.names <span class="op">=</span> <span class="va">linelist_raw_names</span></span>
<span>                       <span class="op">)</span> </span></code></pre></div>
<p><strong>Opción alternativa</strong> - cambiar los nombres de las columnas utilizando un comando separado</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># asigna/reescribe cabecesas usando la función 'colnames()' de R base</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">linelist_raw</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">linelist_raw_names</span></span></code></pre></div>
</div>
<div id="hacer-un-diccionario-de-datos" class="section level4 unnumbered">
<h4>Hacer un diccionario de datos<a class="anchor" aria-label="anchor" href="#hacer-un-diccionario-de-datos"><i class="fas fa-link"></i></a>
</h4>
<p>Bonus! Si tienes una segunda fila que es un diccionario de datos, puedes crear fácilmente un diccionario de datos propio a partir de ella. Este consejo está adaptado de este <a href="https://alison.rbind.io/post/2018-02-23-read-multiple-header-rows/">post</a>.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dict</span> <span class="op">&lt;-</span> <span class="va">linelist_2headers</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>             <span class="co"># linelist con como primera fila</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                             <span class="co"># mantener sólo los nombres de las columnas y la primera fila del diccionario </span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="fu">everything</span><span class="op">(</span><span class="op">)</span>,       <span class="co"># pivotar todas las columnas a formato largo</span></span>
<span>               names_to <span class="op">=</span> <span class="st">"Column"</span>,       <span class="co"># asignar nuevos nombres de columnas</span></span>
<span>               values_to <span class="op">=</span> <span class="st">"Description"</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-8771577caa665800a3a0" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-8771577caa665800a3a0">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["case_id","generation","date_infection","date_onset","date_hospitalisation","date_outcome","outcome","gender","age","age_unit","age_years","age_cat","age_cat5","hospital","lon","lat","infector","source","wt_kg","ht_cm","ct_blood","fever","chills","cough","aches","vomit","temp","time_admission","bmi","days_onset_hosp"],["case identification number assigned by MOH","transmission chain generation number","estimated date of infection, mm/dd/yyyy","date of symptom onset, YYYY-MM-DD","date of initial hospitalization, mm/dd/yyyy","date of outcome status determination","either 'Death' or 'Recovered' or 'Unknown'","either 'm' or 'f' or 'unknown'","age number","age unit, either 'years' or 'months' or 'days'",null,null,null,"Name of hospital of first admission","longitude of residence, approx","latitude of residence, approx","case_id of infector","context of known transmission event",null,null,null,"presence of fever on admission, either 'yes' or 'no'","presence of chills on admission, either 'yes' or 'no'","presence of cough on admission, either 'yes' or 'no'","presence of aches on admission, either 'yes' or 'no'","presence of vomiting on admission, either 'yes' or 'no'",null,"time of hospital admission HH:MM",null,null]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>Column<\/th>\n      <th>Description<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":4,"scrollX":true,"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[4,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="combinar-las-dos-filas-de-la-cabecera" class="section level4 unnumbered">
<h4>Combinar las dos filas de la cabecera<a class="anchor" aria-label="anchor" href="#combinar-las-dos-filas-de-la-cabecera"><i class="fas fa-link"></i></a>
</h4>
<p>En algunos casos, cuando los datos crudos tienen <em>dos</em> filas de cabecera (o, más concretamente, la segunda fila de datos es una cabecera secundaria), es posible que desees “combinarlas” o añadir los valores de la segunda fila de cabecera a la primera fila de cabecera.</p>
<p>El comando siguiente definirá los nombres de las columnas del dataframe como la combinación del primer encabezado (verdadero) con el valor inmediatamente inferior (en la primera fila).</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">my_data</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">my_data</span><span class="op">)</span>, <span class="va">my_data</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="hojas-de-google" class="section level3 unnumbered">
<h3>Hojas de Google<a class="anchor" aria-label="anchor" href="#hojas-de-google"><i class="fas fa-link"></i></a>
</h3>
<p>Puedes importar datos de una hoja de cálculo de Google en línea con el paquete <strong>googlesheet4</strong> y autenticando tu acceso al archivo.</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="st">"googlesheets4"</span><span class="op">)</span></span></code></pre></div>
<p>A continuación, se importa y guarda una hoja de Google de demostración. Este comando puede solicitar la autentificación de tu cuenta de Google. Sigue las indicaciones y las ventanas emergentes de tu navegador web para conceder a los paquetes de la API de Tidyverse permisos para editar, crear y eliminar sus hojas de cálculo en Google Drive.</p>
<p>La hoja que aparece a continuación es “visible para cualquiera con el enlace” y puedes intentar importarla.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Gsheets_demo</span> <span class="op">&lt;-</span> <span class="fu">read_sheet</span><span class="op">(</span><span class="st">"https://docs.google.com/spreadsheets/d/1scgtzkVLLHAe5a6_eFQEwkZcc14yFUx1KgOMZ4AKUfY/edit#gid=0"</span><span class="op">)</span></span></code></pre></div>
<p>La hoja también puede importarse utilizando sólo el ID de la hoja, así es una url más corta:</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Gsheets_demo</span> <span class="op">&lt;-</span> <span class="fu">read_sheet</span><span class="op">(</span><span class="st">"1scgtzkVLLHAe5a6_eFQEwkZcc14yFUx1KgOMZ4AKUfY"</span><span class="op">)</span></span></code></pre></div>
<p>Otro paquete, <strong>googledrive</strong> ofrece funciones útiles para escribir, editar y eliminar hojas de Google. Por ejemplo, utilizando las funciones <code>gs4_create()</code> y <code>sheet_write()</code> que se encuentran en este paquete.</p>
<p>Aquí hay otros tutoriales útiles en línea:<br><a href="https://arbor-analytics.com/post/getting-your-data-into-r-from-google-sheets/">tutorial básico de importación de hojas de Google</a><br><a href="https://googlesheets4.tidyverse.org/articles/googlesheets4.html">tutorial más detallado</a><br><a href="https://googlesheets4.tidyverse.org/articles/articles/drive-and-sheets.html">interacción entre googlesheets4 y tidyverse</a></p>
</div>
</div>
<div id="multiple-files---import-export-split-combine" class="section level2" number="7.6">
<h2>
<span class="header-section-number">7.6</span> Múltiples archivos - importar, exportar, dividir, combinar<a class="anchor" aria-label="anchor" href="#multiple-files---import-export-split-combine"><i class="fas fa-link"></i></a>
</h2>
<p>Consulta la página sobre <a href="iteration-loops-and-lists.html#iteration-loops-and-lists">Iteración, bucles y listas</a> para ver ejemplos de cómo importar y combinar múltiples archivos, o múltiples archivos de Excel. Esa página también tiene ejemplos sobre cómo dividir un dataframe en partes y exportar cada uno por separado, o como hojas específicas en un archivo de Excel.</p>
<!-- ======================================================= -->
</div>
<div id="import_github" class="section level2" number="7.7">
<h2>
<span class="header-section-number">7.7</span> Importar desde Github<a class="anchor" aria-label="anchor" href="#import_github"><i class="fas fa-link"></i></a>
</h2>
<p>Importar datos directamente de Github a R puede ser muy fácil o puede requerir algunos pasos - dependiendo del tipo de archivo. A continuación se presentan algunos enfoques:</p>
<div id="csv-files" class="section level3 unnumbered">
<h3>CSV files<a class="anchor" aria-label="anchor" href="#csv-files"><i class="fas fa-link"></i></a>
</h3>
<p>Es fácil importar un archivo .csv directamente desde Github a R con un comando de R.</p>
<ol style="list-style-type: decimal">
<li><p>Ve al repositorio de Github, localiza el archivo de interés y clica sobre él</p></li>
<li><p>Cliquea en el botón “Raw” (entonces verás los datos csv “crudos”, como se muestra a continuación)</p></li>
<li><p>Copia la URL (dirección web)</p></li>
<li><p>Pega la URL entre comillas dentro del comando de R <code>import()</code></p></li>
</ol>
<div class="inline-figure"><img src="images/download_csv_raw.png" width="100%" style="display: block; margin: auto auto auto 0;"></div>
</div>
<div id="xlsx-files" class="section level3 unnumbered">
<h3>XLSX files<a class="anchor" aria-label="anchor" href="#xlsx-files"><i class="fas fa-link"></i></a>
</h3>
<p>Es posible que no puedas ver los datos “en crudo” (raw) de algunos archivos (por ejemplo, .xlsx, .rds, .nwk, .shp)</p>
<ol style="list-style-type: decimal">
<li>Ve al repositorio de Github, localica el archivo de interés y clica sobre él</li>
<li>Cliquea en el botón “Download”, como se muestra a continuación</li>
<li>Guarda el archivo en tu ordenador e impórtalo en R</li>
</ol>
<div class="inline-figure"><img src="images/download_xlsx.png" width="100%" style="display: block; margin: auto auto auto 0;"></div>
</div>
<div id="shapefiles" class="section level3 unnumbered">
<h3>Shapefiles<a class="anchor" aria-label="anchor" href="#shapefiles"><i class="fas fa-link"></i></a>
</h3>
<p>Los shapefiles tienen muchos archivos subcomponentes, cada uno con una extensión diferente. Un archivo tendrá la extensión “.shp”, pero otros tienen “.dbf”, “.prj”, etc. Para descargar un shapefile de Github, tendrás que descargar cada uno de los archivos subcomponentes individualmente, y guardarlos en la <em>misma</em> carpeta de tu ordenador. En Github, cliquea en cada archivo individualmente y descárgalos clicando en el botón “Download”.</p>
<p>Una vez guardado en tu ordenador, puedes importar el archivo shape como se muestra en la página de <a href="gis-basics.html#gis-basics">Conceptos básicos de los SIG</a> utilizando <code>st_read()</code> del paquete <strong>sf</strong>. Sólo tienes que proporcionar la ruta del archivo y el nombre del archivo “.shp”, siempre que los demás archivos relacionados estén en la misma carpeta de tu ordenador.</p>
<p>A continuación, se puede ver cómo el shapefile “sle_adm3” consta de muchos archivos, cada uno de los cuales debe descargarse de Github.</p>
<div class="inline-figure"><img src="images/download_shp.png" width="100%" style="display: block; margin: auto auto auto 0;"></div>
<!-- ======================================================= -->
</div>
</div>
<div id="manual-data-entry" class="section level2" number="7.8">
<h2>
<span class="header-section-number">7.8</span> Grabación manual de datos<a class="anchor" aria-label="anchor" href="#manual-data-entry"><i class="fas fa-link"></i></a>
</h2>
<div id="entrada-por-filas" class="section level3 unnumbered">
<h3>Entrada por filas<a class="anchor" aria-label="anchor" href="#entrada-por-filas"><i class="fas fa-link"></i></a>
</h3>
<p>Utiliza la función <code>tribble()</code> del paquete <strong>tibble</strong> de tidyverse (<a href="https://tibble.tidyverse.org/reference/tribble.html">referencia online de tibble</a>).</p>
<p>Observa que las cabeceras de las columnas comienzan con una <em>tilde</em> (~). Observa también que cada columna debe contener sólo un tipo de datos (carácter, numérico, etc.). Puedes utilizar tabulaciones, espacios y nuevas filas para que la entrada de datos sea más intuitiva y legible. Los espacios no importan entre los valores, pero cada fila está representada por una nueva línea de código. Por ejemplo:</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># crea el dataset manualmente por filas</span></span>
<span><span class="va">manual_entry_rows</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">colA</span>, <span class="op">~</span><span class="va">colB</span>,</span>
<span>  <span class="st">"a"</span>,   <span class="fl">1</span>,</span>
<span>  <span class="st">"b"</span>,   <span class="fl">2</span>,</span>
<span>  <span class="st">"c"</span>,   <span class="fl">3</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Y ahora mostramos el nuevo conjunto de datos:</p>
<div id="htmlwidget-ddb08a981866a26e357c" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ddb08a981866a26e357c">{"x":{"filter":"none","vertical":false,"data":[["1","2","3"],["a","b","c"],[1,2,3]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>colA<\/th>\n      <th>colB<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="entrada-por-columnas" class="section level3 unnumbered">
<h3>Entrada por columnas<a class="anchor" aria-label="anchor" href="#entrada-por-columnas"><i class="fas fa-link"></i></a>
</h3>
<p>Dado que un dataframe consiste en vectores (columnas verticales), el enfoque básico para la creación manual de dataframes en R espera que definas cada columna y luego las unas. Esto puede ser contrario a la intuición en epidemiología, ya que normalmente pensamos en nuestros datos como una observación por filas (como arriba).</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># define cada vector (columna vertical) por separado, cada uno con su propio nombre</span></span>
<span><span class="va">PatientID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">235</span>, <span class="fl">452</span>, <span class="fl">778</span>, <span class="fl">111</span><span class="op">)</span></span>
<span><span class="va">Treatment</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Yes"</span>, <span class="st">"No"</span>, <span class="st">"Yes"</span>, <span class="st">"Yes"</span><span class="op">)</span></span>
<span><span class="va">Death</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<p><span style="color: orange;"><strong><em>PRECAUCIÓN:</em></strong> Todos los vectores deben tener la misma longitud (el mismo número de valores).</span></p>
<p>A continuación, los vectores pueden unirse mediante la función <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code>:</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># combine the columns into a data frame, by referencing the vector names</span></span>
<span><span class="va">manual_entry_cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">PatientID</span>, <span class="va">Treatment</span>, <span class="va">Death</span><span class="op">)</span></span></code></pre></div>
<p>Y ahora mostramos el nuevo conjunto de datos:</p>
<div id="htmlwidget-fbb65930017b923396e9" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-fbb65930017b923396e9">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4"],[235,452,778,111],["Yes","No","Yes","Yes"],[1,0,1,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>PatientID<\/th>\n      <th>Treatment<\/th>\n      <th>Death<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="pegar-desde-el-portapapeles" class="section level3 unnumbered">
<h3>Pegar desde el portapapeles<a class="anchor" aria-label="anchor" href="#pegar-desde-el-portapapeles"><i class="fas fa-link"></i></a>
</h3>
<p>Si copias los datos de otro lugar y los tienes en el portapapeles, puedes probar una de las dos formas siguientes:</p>
<p>Con el paquete <strong>clipr</strong>, puedes utilizar <code>read_clip_tbl()</code> para importar como un dataframe, o simplemente <code>read_clip()</code> para importar como un vector de caracteres. En ambos casos, deja los paréntesis vacíos.</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">clipr</span><span class="fu">::</span><span class="fu"><a href="http://matthewlincoln.net/clipr/reference/read_clip_tbl.html">read_clip_tbl</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># importar portapapeles actual como data frame</span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">clipr</span><span class="fu">::</span><span class="fu"><a href="http://matthewlincoln.net/clipr/reference/read_clip.html">read_clip</a></span><span class="op">(</span><span class="op">)</span>      <span class="co"># importar como vector de caracteres</span></span></code></pre></div>
<p>También puedes exportar fácilmente al portapapeles de tu sistema con <strong>clipr.</strong> Consulta la sección siguiente sobre Exportación.</p>
<p>Alternativamente, pueder utilizar la función <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> de R <strong>base</strong> con <code>file = "clipboard"</code>) para importar como un dataframe:</p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_from_clipboard</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span></span>
<span>  file <span class="op">=</span> <span class="st">"clipboard"</span>,  <span class="co"># especifica esto como "portapapeles"</span></span>
<span>  sep <span class="op">=</span> <span class="st">"t"</span>,           <span class="co"># el separador puede ser un tabulador, o una coma, etc.</span></span>
<span>  header<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>         <span class="co"># si hay una fila de cabecera</span></span></code></pre></div>
</div>
</div>
<div id="import-most-recent-file" class="section level2" number="7.9">
<h2>
<span class="header-section-number">7.9</span> Importar el archivo más reciente<a class="anchor" aria-label="anchor" href="#import-most-recent-file"><i class="fas fa-link"></i></a>
</h2>
<p>A menudo puedes recibir actualizaciones diarias de tus datos. En este caso, querrás escribir un código que importe el archivo más reciente. A continuación presentamos dos maneras de abordar esto:</p>
<ul>
<li>Seleccionar el archivo en función de la fecha del nombre del archivo</li>
<li>Seleccionar el archivo en función de los metadatos del archivo (última modificación)</li>
</ul>
<div id="fechas-en-el-nombre-del-archivo" class="section level3 unnumbered">
<h3>Fechas en el nombre del archivo<a class="anchor" aria-label="anchor" href="#fechas-en-el-nombre-del-archivo"><i class="fas fa-link"></i></a>
</h3>
<p>Este enfoque se basa en tres premisas:</p>
<ol style="list-style-type: decimal">
<li>Confías en las fechas en los nombres de los archivos</li>
<li>Las fechas son numéricas y aparecen <em>generalmente</em> en el mismo formato (por ejemplo, año, mes y día)</li>
<li>No hay otros números en el nombre del archivo</li>
</ol>
<p>Te explicaremos paso a paso y te mostraremos todos los pasos combinados al final.</p>
<p>En primer lugar, utiliza <code><a href="https://rdrr.io/r/base/list.files.html">dir()</a></code> de R <strong>base</strong> para extraer sólo los nombres de los archivos de la carpeta de interés. Consulta la página sobre <a href="directory-interactions.html#directory-interactions">interacciones con directorios</a> para obtener más detalles sobre <code><a href="https://rdrr.io/r/base/list.files.html">dir()</a></code>. En este ejemplo, la carpeta de interés es la carpeta “linelists” dentro de la carpeta “example” dentro de “data” dentro del proyecto R.</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_filenames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"example"</span>, <span class="st">"linelists"</span><span class="op">)</span><span class="op">)</span> <span class="co"># obtiene los nombres de ficheros de la carpeta</span></span>
<span><span class="va">linelist_filenames</span>                                              <span class="co"># los muestra</span></span></code></pre></div>
<pre><code>## [1] "20201007linelist.csv"          "case_linelist_2020-10-02.csv"  "case_linelist_2020-10-03.csv" 
## [4] "case_linelist_2020-10-04.csv"  "case_linelist_2020-10-05.csv"  "case_linelist_2020-10-08.xlsx"
## [7] "case_linelist20201006.csv"</code></pre>
<p>Una vez que tengas este vector de nombres, puedes extraer las fechas de ellos aplicando <code>str_extract()</code> de <strong>stringr</strong> utilizando esta expresión regular. Este comando extrae cualquier número en el nombre del archivo (incluyendo cualquier otro carácter en el medio como guiones o barras). Puedes leer más sobre <strong>stringr</strong> en la página <a href="characters-and-strings.html#characters-and-strings">Caracteres y cadenas</a>.</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_dates_raw</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract</a></span><span class="op">(</span><span class="va">linelist_filenames</span>, <span class="st">"[0-9].*[0-9]"</span><span class="op">)</span> <span class="co"># extract numbers and any characters in between</span></span>
<span><span class="va">linelist_dates_raw</span>  <span class="co"># print</span></span></code></pre></div>
<pre><code>## [1] "20201007"   "2020-10-02" "2020-10-03" "2020-10-04" "2020-10-05" "2020-10-08" "20201006"</code></pre>
<p>Suponiendo que las fechas estén escritas en general con el mismo formato de fecha (por ejemplo, Año, Mes y Día) y que los años tengan 4 dígitos, puedes utilizar las funciones de conversión de <strong>lubridate</strong> (<code>ymd()</code>, <code>dmy()</code> o <code>mdy()</code>) para convertirlas en fechas. Para estas funciones, no importan los guiones, espacios o barras, sino el orden de los números. Lee más en la página <a href="working-with-dates.html#working-with-dates">Trabajando con fechas</a>.</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_dates_clean</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="va">linelist_dates_raw</span><span class="op">)</span></span>
<span><span class="va">linelist_dates_clean</span></span></code></pre></div>
<pre><code>## [1] "2020-10-07" "2020-10-02" "2020-10-03" "2020-10-04" "2020-10-05" "2020-10-08" "2020-10-06"</code></pre>
<p>La función de R <strong>base</strong> <code>wich.max()</code> puede utilizarse para devolver la posición del índice (por ejemplo, 1ª, 2ª, 3ª, …) del valor máximo de la fecha. El último archivo se identifica correctamente como el sexto archivo - “case_linelist_2020-10-08.xlsx”.</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">index_latest_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.max</a></span><span class="op">(</span><span class="va">linelist_dates_clean</span><span class="op">)</span></span>
<span><span class="va">index_latest_file</span></span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>Si condensamos todos estos comandos, el código completo podría ser como el siguiente. Observa que el <code>.</code> en la última línea es un marcador de posición para el objeto canalizado en ese punto de la secuencia de pipes. En ese punto el valor es simplemente el número 6. Esto se coloca entre corchetes dobles para extraer el sexto elemento del vector de nombres de archivo producido por <code><a href="https://rdrr.io/r/base/list.files.html">dir()</a></code>.</p>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load packages</span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span></span>
<span>  <span class="va">tidyverse</span>,         <span class="co"># gestión de datos</span></span>
<span>  <span class="va">stringr</span>,           <span class="co"># trabajar con cadenas/caracteres</span></span>
<span>  <span class="va">lubridate</span>,         <span class="co"># trabajar con fechas</span></span>
<span>  <span class="va">rio</span>,               <span class="co"># importar / exportar</span></span>
<span>  <span class="va">here</span>,              <span class="co"># rutas relativas </span></span>
<span>  <span class="va">fs</span><span class="op">)</span>                <span class="co"># interacciones de directorio</span></span>
<span></span>
<span><span class="co"># extraer el nombre del último archivo</span></span>
<span><span class="va">latest_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"example"</span>, <span class="st">"linelists"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># nombres de archivos de la subcarpeta "linelists"    </span></span>
<span>  <span class="fu">str_extract</span><span class="op">(</span><span class="st">"[0-9].*[0-9]"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                  <span class="co"># extraer fechas (números)</span></span>
<span>  <span class="fu">ymd</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                                        <span class="co"># convertir los números en fechas (asumiendo el formato año-mes-día)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.max</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                                 <span class="co"># obtener el índice de la fecha máxima (último archivo)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"example"</span>, <span class="st">"linelists"</span><span class="op">)</span><span class="op">)</span><span class="op">[[</span><span class="va">.</span><span class="op">]</span><span class="op">]</span>              <span class="co">#  devuelve el nombre del archivo del último linelist</span></span>
<span></span>
<span><span class="va">latest_file</span>  <span class="co"># mostrar el nombre del último archivo</span></span></code></pre></div>
<pre><code>## [1] "case_linelist_2020-10-08.xlsx"</code></pre>
<p>Ahora puedes utilizar este nombre para terminar la ruta relativa del archivo, con <code>here()</code>:</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"example"</span>, <span class="st">"linelists"</span>, <span class="va">latest_file</span><span class="op">)</span> </span></code></pre></div>
<p>Y ahora puedes importar el último archivo:</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># import</span></span>
<span><span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"example"</span>, <span class="st">"linelists"</span>, <span class="va">latest_file</span><span class="op">)</span><span class="op">)</span> <span class="co"># importar </span></span></code></pre></div>
</div>
<div id="utiliza-la-información-del-archivo" class="section level3 unnumbered">
<h3>Utiliza la información del archivo<a class="anchor" aria-label="anchor" href="#utiliza-la-informaci%C3%B3n-del-archivo"><i class="fas fa-link"></i></a>
</h3>
<p>Si tus archivos no tienen fechas en sus nombres (o no te fías de esas fechas), puedes intentar extraer la última fecha de modificación de los metadatos del archivo. Utiliza las funciones del paquete <strong>fs</strong> para examinar la información de los metadatos de cada archivo, que incluye la fecha y hora de la última modificación y la ruta del archivo.</p>
<p>A continuación, proporcionamos la carpeta de interés a <code>dir_info()</code> de <strong>fs</strong>. En este caso, la carpeta de interés está en el proyecto R en la carpeta “data”, la subcarpeta “example”, y su subcarpeta “linelists”. El resultado es un dataframe con una línea por cada archivo y columnas para <code>modification_time</code>, <code>path</code>, etc. Puedes ver un ejemplo visual de esto en la página sobre <a href="directory-interactions.html#directory-interactions">interacciones con directorios</a>.</p>
<p>Podemos ordenar este dataframe de archivos por la columna <code>modification_time</code>, y luego mantener sólo la fila superior (último archivo) con la función <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> de R <strong>base</strong>. A continuación, podemos extraer la ruta de este último archivo sólo con la función <strong>dplyr</strong> <code>pull()</code> en la columna <code>path</code>. Finalmente podemos pasar esta ruta de archivo a import(). El archivo importado se guarda como <code>latest_file</code>.</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">latest_file</span> <span class="op">&lt;-</span> <span class="fu">dir_info</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"example"</span>, <span class="st">"linelists"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># recoger información de todos los archivos en el directorio</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">modification_time</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>      <span class="co"># ordenar por tiempo de modificación</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                               <span class="co"># mantener sólo el archivo superior (más reciente)</span></span>
<span>  <span class="fu">pull</span><span class="op">(</span><span class="va">path</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                            <span class="co"># extraer sólo la ruta del archivo</span></span>
<span>  <span class="fu">import</span><span class="op">(</span><span class="op">)</span>                                  <span class="co"># importar el archivo</span></span></code></pre></div>
<!-- ======================================================= -->
</div>
</div>
<div id="import_api" class="section level2" number="7.10">
<h2>
<span class="header-section-number">7.10</span> APIs<a class="anchor" aria-label="anchor" href="#import_api"><i class="fas fa-link"></i></a>
</h2>
<p>Una “Interfaz de Programación Automatizada” (API) puede utilizarse para solicitar datos directamente de un sitio web. Las API son un conjunto de reglas que permiten que una aplicación de software interactúe con otra. El cliente (tu) envía una “solicitud” y recibe una “respuesta” con contenido. Los paquetes de R <strong>httr</strong> y <strong>jsonlite</strong> pueden facilitar este proceso.</p>
<p>Cada sitio web habilitado para la API tendrá su propia documentación y detalles con los que hay que familiarizarse. Algunos sitios están disponibles públicamente y cualquiera puede acceder a ellos. Otros, como las plataformas con ID de usuario y credenciales, requieren autenticación para acceder a sus datos.</p>
<p>Obviamente es necesario disponer de una conexión a Internet para importar datos a través de la API. Te daremos ejemplos breves de uso de las API para importar datos, y presentaremos enlaces a otros recursos.</p>
<p><em>Nota: recuerda que los datos pueden estar</em> publicados* en un sitio web sin una API, que puede ser más fácil de recuperar. Por ejemplo, un archivo CSV publicado puede ser accesible simplemente proporcionando la URL del sitio a <code>import()</code> como se describe en la sección sobre la <a href="import-and-export.html#import_github">importación desde Github</a>.*</p>
<div id="petición-http" class="section level3 unnumbered">
<h3>Petición HTTP<a class="anchor" aria-label="anchor" href="#petici%C3%B3n-http"><i class="fas fa-link"></i></a>
</h3>
<p>El intercambio de la API se realiza normalmente a través de una solicitud HTTP. HTTP es el Protocolo de Transferencia de Hipertexto, y es el formato subyacente de una solicitud/respuesta entre un cliente y un servidor. La entrada y la salida exactas pueden variar en función del tipo de API, pero el proceso es el mismo: una “Solicitud” (a menudo Solicitud HTTP) del usuario, que suele contener una consulta, seguida de una “Respuesta”, que contiene información de estado sobre la solicitud y posiblemente el contenido solicitado.</p>
<p>Estos son algunos de los componentes de una <em>petición HTTP</em>:</p>
<ul>
<li>La URL completa de la API</li>
<li>El “Método” (o “Verbo”)</li>
<li>Headers (Encabezados)</li>
<li>Body (Cuerpo)</li>
</ul>
<p>El “método” de la petición HTTP es la acción que se quiere realizar. Los dos métodos HTTP más comunes son <code>GET</code> y <code>POST</code>, pero otros pueden ser <code>PUT</code>, <code>DELETE</code>, <code>PATCH</code>, etc. Cuando se importan datos a R lo más probable es que se utilice <code>GET</code>.</p>
<p>Después de la solicitud, tu ordenador recibirá una “respuesta” en un formato similar al que se envió, incluyendo la URL, el estado HTTP (¡status 200 es lo que quieres!), el tipo de archivo, el tamaño y el contenido deseado. A continuación, tendrá que analizar esta respuesta y convertirla en un dataframe viable dentro de su entorno R.</p>
</div>
<div id="paquetes" class="section level3 unnumbered">
<h3>Paquetes<a class="anchor" aria-label="anchor" href="#paquetes"><i class="fas fa-link"></i></a>
</h3>
<p>El paquete <strong>httr</strong> funciona bien para manejar peticiones HTTP en R. Requiere poco conocimiento previo de las APIs de la web y puede ser utilizado por personas menos familiarizadas con la terminología de desarrollo de software. Además, si la respuesta HTTP es .json, puede utilizar <strong>jsonlite</strong> para analizar la respuesta.</p>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load packages</span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">httr</span>, <span class="va">jsonlite</span>, <span class="va">tidyverse</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="datos-de-acceso-público" class="section level3 unnumbered">
<h3>Datos de acceso público<a class="anchor" aria-label="anchor" href="#datos-de-acceso-p%C3%BAblico"><i class="fas fa-link"></i></a>
</h3>
<p>A continuación se muestra un ejemplo de solicitud HTTP, tomado de un tutorial de <a href="https://www.trafforddatalab.io/open_data_companion/#A_quick_introduction_to_APIs">Trafford Data Lab</a>. Este sitio tiene varios otros recursos para aprender y ejercicios de API.</p>
<p>Escenario: Queremos importar una lista de establecimientos de comida rápida en la ciudad de Trafford, Reino Unido. Se puede acceder a los datos desde la API de la Food Standards Agency (Agencia de Normas Alimentarias), que proporciona datos de calificación de higiene alimentaria para el Reino Unido.</p>
<p>Estos son los parámetros de nuestra solicitud:</p>
<ul>
<li>Verbo HTTP: GET</li>
<li>URL del punto de la API: <a href="http://api.ratings.food.gov.uk/Establishments" class="uri">http://api.ratings.food.gov.uk/Establishments</a>
</li>
<li>Parámetros seleccionados: name, address, longitude, latitude, businessTypeId, ratingKey, localAuthorityId</li>
<li>Cabeceras: “x-api-version”, 2</li>
<li>Formato(s) de datos: JSON, XML</li>
<li>Documentación: <a href="http://api.ratings.food.gov.uk/help" class="uri">http://api.ratings.food.gov.uk/help</a>
</li>
</ul>
<p>El código R sería el siguiente:</p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># preparar la petición</span></span>
<span><span class="va">path</span> <span class="op">&lt;-</span> <span class="st">"http://api.ratings.food.gov.uk/Establishments"</span></span>
<span><span class="va">request</span> <span class="op">&lt;-</span> <span class="fu">GET</span><span class="op">(</span>url <span class="op">=</span> <span class="va">path</span>,</span>
<span>             query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>               localAuthorityId <span class="op">=</span> <span class="fl">188</span>,</span>
<span>               BusinessTypeId <span class="op">=</span> <span class="fl">7844</span>,</span>
<span>               pageNumber <span class="op">=</span> <span class="fl">1</span>,</span>
<span>               pageSize <span class="op">=</span> <span class="fl">5000</span><span class="op">)</span>,</span>
<span>             <span class="fu">add_headers</span><span class="op">(</span><span class="st">"x-api-version"</span> <span class="op">=</span> <span class="st">"2"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Comprobar si hay error con el servidor ("200" es el correcto!)</span></span>
<span><span class="va">request</span><span class="op">$</span><span class="va">status_code</span></span>
<span></span>
<span><span class="co"># enviar la solicitud, analizar la respuesta y convertirla en un data frame</span></span>
<span><span class="va">response</span> <span class="op">&lt;-</span> <span class="fu">content</span><span class="op">(</span><span class="va">request</span>, as <span class="op">=</span> <span class="st">"text"</span>, encoding <span class="op">=</span> <span class="st">"UTF-8"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">fromJSON</span><span class="op">(</span>flatten <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">pluck</span><span class="op">(</span><span class="st">"establishments"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Ahora puedes limpiar y utilizar el dataframe <code>response</code>, que contiene una fila por establecimiento de comida rápida.</p>
</div>
<div id="se-requiere-autenticación" class="section level3 unnumbered">
<h3>Se requiere autenticación<a class="anchor" aria-label="anchor" href="#se-requiere-autenticaci%C3%B3n"><i class="fas fa-link"></i></a>
</h3>
<p>Algunas APIs requieren autenticación - para que se demuestre quién eres y poder acceder a datos restringidos. Para importar estos datos, es posible que tengas que utilizar primero un método POST para proporcionar un nombre de usuario, una contraseña o un código. Esto devolverá un token de acceso, que puede ser utilizado para posteriores solicitudes del método GET para obtener los datos deseados.</p>
<p>A continuación se muestra un ejemplo de consulta de datos de <em>Go.Data</em>, que es una herramienta de investigación de brotes. <em>Go.Data</em> utiliza una API para todas las interacciones entre la interfaz de la web y las aplicaciones de los smartphones utilizadas para la captura de datos. <em>Go.Data</em> se utiliza en todo el mundo. Se requiere autenticación, dado que los datos de los brotes son sensibles y sólo debes poder acceder a los datos de <em>tu</em> brote.</p>
<p>A continuación se muestra un ejemplo de código R que utiliza <strong>httr</strong> y <strong>jsonlite</strong> para conectarse a la API de <em>Go.Data</em> para importar datos sobre el seguimiento de los contactos de tu brote.</p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># establecer credenciales para la autorización</span></span>
<span><span class="va">url</span> <span class="op">&lt;-</span> <span class="st">"https://godatasampleURL.int/"</span>           <span class="co"># url correcta de Go.Data</span></span>
<span><span class="va">username</span> <span class="op">&lt;-</span> <span class="st">"username"</span>                          <span class="co"># usuario Go.Data válido </span></span>
<span><span class="va">password</span> <span class="op">&lt;-</span> <span class="st">"password"</span>                          <span class="co"># contraseña válida </span></span>
<span><span class="va">outbreak_id</span> <span class="op">&lt;-</span> <span class="st">"xxxxxx-xxxx-xxxx-xxxx-xxxxxxx"</span>  <span class="co"># ID de brote de Go.Data</span></span>
<span></span>
<span><span class="co"># obtener token de acceso</span></span>
<span><span class="va">url_request</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">url</span>,<span class="st">"api/oauth/token?access_token=123"</span><span class="op">)</span> <span class="co"># definir URL base de la solicitud</span></span>
<span></span>
<span><span class="co"># preparar la petición</span></span>
<span><span class="va">response</span> <span class="op">&lt;-</span> <span class="fu">POST</span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="va">url_request</span>,  </span>
<span>  body <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>    username <span class="op">=</span> <span class="va">username</span>,    <span class="co"># utiliza el nombre de usuario/contraseña guardado  arriba para autorizar                               </span></span>
<span>    password <span class="op">=</span> <span class="va">password</span><span class="op">)</span>,                                       </span>
<span>    encode <span class="op">=</span> <span class="st">"json"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ejecutar la petición y analizar la respuesta</span></span>
<span><span class="va">content</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">content</span><span class="op">(</span><span class="va">response</span>, as <span class="op">=</span> <span class="st">"text"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">fromJSON</span><span class="op">(</span>flatten <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>          <span class="co"># acoplar el JSON anidado</span></span>
<span>  <span class="fu">glimpse</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Guardar el token de acceso de la respuesta</span></span>
<span><span class="va">access_token</span> <span class="op">&lt;-</span> <span class="va">content</span><span class="op">$</span><span class="va">access_token</span>    <span class="co"># guardar el token de acceso para permitir las siguientes llamadas a la API</span></span>
<span></span>
<span><span class="co"># importar contactos del brote</span></span>
<span><span class="co"># Utilizar el token de acceso </span></span>
<span><span class="va">response_contacts</span> <span class="op">&lt;-</span> <span class="fu">GET</span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">url</span>,<span class="st">"api/outbreaks/"</span>,<span class="va">outbreak_id</span>,<span class="st">"/contacts"</span><span class="op">)</span>,          <span class="co"># petición GET</span></span>
<span>  <span class="fu">add_headers</span><span class="op">(</span></span>
<span>    Authorization <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"Bearer"</span>, <span class="va">access_token</span>, sep <span class="op">=</span> <span class="st">" "</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">json_contacts</span> <span class="op">&lt;-</span> <span class="fu">content</span><span class="op">(</span><span class="va">response_contacts</span>, as <span class="op">=</span> <span class="st">"text"</span><span class="op">)</span>         <span class="co"># # convertir JSON a texto</span></span>
<span></span>
<span><span class="va">contacts</span> <span class="op">&lt;-</span> <span class="fu">as_tibble</span><span class="op">(</span><span class="fu">fromJSON</span><span class="op">(</span><span class="va">json_contacts</span>, flatten <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>   <span class="co"># acoplar JSON a tibble</span></span></code></pre></div>
<p><span style="color: orange;"><strong><em>PRECAUCIÓN:</em></strong> Si estás importando grandes cantidades de datos desde una API que requiere autenticación, es posible que se agote el tiempo de espera. Para evitarlo, recupera el access_token antes de cada solicitud GET de la API y prueba a utilizar filtros o límites en la consulta. </span></p>
<p><span style="color: darkgreen;"><strong><em>CONSEJO:</em></strong> La función fromJSON() del paquete <strong>jsonlite</strong> no se ajuste completamente la primera vez que se ejecuta, por lo que es probable que todavía tengas elementos de la lista en tu tibble resultante. Tendrás que ajustar aún más ciertas variables, dependiendo de lo jerarquizado que esté tu .json. Para ver más información sobre esto, consulta la documentación del paquete <strong>jsonlite</strong>, como la <a href="https://rdrr.io/cran/jsonlite/man/flatten.html">función flatten()</a>. </span></p>
<p>Para más detalles, mira la documentación en el <a href="https://loopback.io/doc/en/lb4/index.html">Explorador de LoopBack</a>, la página de <a href="contact-tracing-1.html#contact-tracing-1">Rastreo de Contactos</a> o los consejos de la API en el <a href="https://worldhealthorganization.github.io/godata/api-docs">repositorio Github de Go.Data</a></p>
<p>Puedes leer más sobre el paquete <em>httr</em> <a href="https://httr.r-lib.org/articles/quickstart.html">aquí</a></p>
<p>Esta sección también se inspiró en <a href="https://www.dataquest.io/blog/r-api-tutorial/">este tutorial</a> y <a href="https://medium.com/@traffordDataLab/querying-apis-in-r-39029b73d5f1">este otro tutorial</a>.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="export" class="section level2" number="7.11">
<h2>
<span class="header-section-number">7.11</span> Exportar<a class="anchor" aria-label="anchor" href="#export"><i class="fas fa-link"></i></a>
</h2>
<div id="con-el-paquete-rio" class="section level3 unnumbered">
<h3>Con el paquete <strong>rio</strong><a class="anchor" aria-label="anchor" href="#con-el-paquete-rio"><i class="fas fa-link"></i></a>
</h3>
<p>Con <strong>rio</strong>, puedes utilizar la función <code><a href="https://rdrr.io/pkg/plotly/man/export.html">export()</a></code> de forma muy similar a <code>import()</code>. Primero indica el nombre del objeto de R que deseas guardar (por ejemplo, <code>linelist</code>) y luego escribe entre comillas la ruta de acceso al archivo donde deseas guardarlo, incluyendo el nombre y la extensión de archivo deseados. Por ejemplo:</p>
<p>Esto guarda el dataframe <code>linelist</code> como un archivo de Excel en el directorio de trabajo/carpeta raíz del proyecto R:</p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/export.html">export</a></span><span class="op">(</span><span class="va">linelist</span>, <span class="st">"my_linelist.xlsx"</span><span class="op">)</span> <span class="co"># lo guardará en el directorio de trabajo</span></span></code></pre></div>
<p>Se puede guardar el mismo dataframe como un archivo csv cambiando la extensión. Por ejemplo, también lo guardamos en una ruta de archivo construida con <code>here()</code>:</p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/export.html">export</a></span><span class="op">(</span><span class="va">linelist</span>, <span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"clean"</span>, <span class="st">"my_linelist.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="al-portapapeles" class="section level3 unnumbered">
<h3>Al portapapeles<a class="anchor" aria-label="anchor" href="#al-portapapeles"><i class="fas fa-link"></i></a>
</h3>
<p>Para exportar un dataframe al “portapapeles” de tu ordenador (para luego pegarlo en otro software como Excel, Google Spreadsheets, etc.) puedes utilizar <code>write_clip()</code> del paquete <strong>clipr</strong>.</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># exporta el data frame linelist al portapapeles de tu sistema</span></span>
<span><span class="fu">clipr</span><span class="fu">::</span><span class="fu"><a href="http://matthewlincoln.net/clipr/reference/write_clip.html">write_clip</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="import_rds" class="section level2" number="7.12">
<h2>
<span class="header-section-number">7.12</span> Archivos RDS<a class="anchor" aria-label="anchor" href="#import_rds"><i class="fas fa-link"></i></a>
</h2>
<p>Además de .csv, .xlsx, etc., también puedes exportar/guardar dataframes de R como archivos .rds. Este es un formato de archivo específico de R, y es muy útil si sabes que vas a trabajar con los datos exportados de nuevo en R.</p>
<p>Los tipos de columnas se conservan, por lo que no hay que volver a hacer la limpieza cuando se importan (con un archivo Excel o incluso CSV esto puede ser un dolor de cabeza). También es un archivo más pequeño, lo que es útil para la exportación e importación si tu conjunto de datos es grande.</p>
<p>Por ejemplo, si trabajas en un equipo de epidemiología y necesitas enviar archivos a un equipo de SIG para la elaboración de mapas, y ellos también utilizan R, ¡sólo tienes que enviarles el archivo .rds! Así se conservan todos los tipos de columnas y ellos tienen menos trabajo que hacer.</p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/export.html">export</a></span><span class="op">(</span><span class="va">linelist</span>, <span class="fu">here</span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"clean"</span>, <span class="st">"my_linelist.rds"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="import_rdata" class="section level2" number="7.13">
<h2>
<span class="header-section-number">7.13</span> Archivos Rdata y listas de datos<a class="anchor" aria-label="anchor" href="#import_rdata"><i class="fas fa-link"></i></a>
</h2>
<p>Los archivos <code>.Rdata</code> pueden almacenar múltiples objetos de R - por ejemplo, múltiples dataframes, resultados de modelos, listas, etc. Esto puede ser muy útil para consolidar o compartir muchos de tus datos para un proyecto determinado.</p>
<p>En el siguiente ejemplo, se almacenan múltiples objetos R dentro del archivo exportado “my_objects.Rdata”:</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/export.html">export</a></span><span class="op">(</span><span class="va">my_list</span>, <span class="va">my_dataframe</span>, <span class="va">my_vector</span>, <span class="st">"my_objects.Rdata"</span><span class="op">)</span></span></code></pre></div>
<p>Nota: si estás intentando <em>importar</em> una lista, utiliza <code>import_list()</code> de <strong>rio</strong> para importarla con la estructura y el contenido originales completos.</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import_list.html">import_list</a></span><span class="op">(</span><span class="st">"my_list.Rdata"</span><span class="op">)</span></span></code></pre></div>
<!-- ======================================================= -->
</div>
<div id="saving-plots" class="section level2" number="7.14">
<h2>
<span class="header-section-number">7.14</span> Guardar gráficos<a class="anchor" aria-label="anchor" href="#saving-plots"><i class="fas fa-link"></i></a>
</h2>
<p>Las instrucciones sobre cómo guardar los gráficos, como los creados por <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>, se discuten en profundidad en la página de <a href="ggplot-basics.html#ggplot-basics">Conceptos básicos de ggplot</a>.</p>
<p>En resumen, ejecuta <code>ggsave("my_plot_filepath_and_name.png")</code> después de obtener tu gráfico. Puedes proporcionar un gráfico guardado con plot = argumento, o sólo especificar la ruta de archivo de destino (con extensión de archivo) para guardar el gráfico mostrado más recientemente. También puedes controlar el ancho <code>width =</code>, la altura <code>height =</code>, las unidades <code>units =</code> y los puntos por pulgada <code>dpi =</code>.</p>
<p>La forma de guardar un gráfico de red, como un árbol de transmisión, se aborda en la página <a href="transmission-chains.html#transmission-chains">Cadenas de transmisión</a>.</p>
<!-- ======================================================= -->
</div>
<div id="resources-1" class="section level2" number="7.15">
<h2>
<span class="header-section-number">7.15</span> Recursos<a class="anchor" aria-label="anchor" href="#resources-1"><i class="fas fa-link"></i></a>
</h2>
<p>El <a href="https://cran.r-project.org/doc/manuals/r-release/R-data.html">manual de importación y exportación de datos de R</a></p>
<p><a href="https://es.r4ds.hadley.nz/importaci%C3%B3n-de-datos.html">Capítulo de R 4 Data Science en español sobre la importación de datos</a></p>
<p><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">documentación de ggsave()</a></p>
<p>A continuación se muestra una tabla, extraída de la <a href="https://cran.r-project.org/web/packages/rio/vignettes/rio.html">viñeta online</a> de <strong>rio</strong>. Para cada tipo de datos muestra: la extensión de archivo esperada, el paquete que <strong>rio</strong> utiliza para importar o exportar los datos, y si esta funcionalidad está incluida en la versión instalada de <strong>rio</strong>.</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="25%">
<col width="17%">
<col width="17%">
<col width="18%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th>Formato</th>
<th>Extensión típica</th>
<th>Paquete importación</th>
<th>Paquete exportación</th>
<th>Instalado por defecto</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Datos separados por comas</td>
<td>.csv</td>
<td>data.table <code>fread()</code>
</td>
<td>data.table</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Datos separados por pipe</td>
<td>.psv</td>
<td>data.table <code>fread()</code>
</td>
<td>data.table</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Datos separados por tabul</td>
<td>.tsv</td>
<td>data.table <code>fread()</code>
</td>
<td>data.table</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>SAS</td>
<td>.sas7bdat</td>
<td>haven</td>
<td>haven</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>SPSS</td>
<td>.sav</td>
<td>haven</td>
<td>haven</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Stata</td>
<td>.dta</td>
<td>haven</td>
<td>haven</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>SAS</td>
<td>XPORT</td>
<td>.xpt</td>
<td>haven</td>
<td>haven</td>
</tr>
<tr class="even">
<td>SPSS Portable</td>
<td>.por</td>
<td>haven</td>
<td></td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Excel</td>
<td>.xls</td>
<td>readxl</td>
<td></td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Excel</td>
<td>.xlsx</td>
<td>readxl</td>
<td>openxlsx</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Syntaxis R</td>
<td>.R</td>
<td>base</td>
<td>base</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Objetos R guardados</td>
<td>.RData, .rda</td>
<td>base</td>
<td>base</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Objetos R serializados</td>
<td>.rds</td>
<td>base</td>
<td>base</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Epiinfo</td>
<td>.rec</td>
<td>foreign</td>
<td></td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Minitab</td>
<td>.mtp</td>
<td>foreign</td>
<td></td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Systat</td>
<td>.syd</td>
<td>foreign</td>
<td></td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>“XBASE”</td>
<td>database files</td>
<td>.dbf</td>
<td>foreign</td>
<td>foreign</td>
</tr>
<tr class="even">
<td>Formato de archivo Weka Attribute-Relation</td>
<td>.arff</td>
<td>foreign</td>
<td>foreign</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Formato de intercambio de datos</td>
<td>.dif</td>
<td>utils</td>
<td></td>
<td>Yes</td>
</tr>
<tr class="even">
<td>Datos de Fortran</td>
<td>no recognized extension</td>
<td>utils</td>
<td></td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>Formato de ancho fijo</td>
<td>.fwf</td>
<td>utils</td>
<td>utils</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>datos separados por comas gzip</td>
<td>.csv.gz</td>
<td>utils</td>
<td>utils</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>CSVY (CSV + cabecera de metadatos YAML)</td>
<td>.csvy</td>
<td>csvy</td>
<td>csvy</td>
<td>No</td>
</tr>
<tr class="even">
<td>EViews</td>
<td>.wf1</td>
<td>hexView</td>
<td></td>
<td>No</td>
</tr>
<tr class="odd">
<td>Formato de intercambio Feather R/Python</td>
<td>.feather</td>
<td>feather</td>
<td>feather</td>
<td>No</td>
</tr>
<tr class="even">
<td>Almacenamiento rápido</td>
<td>.fst</td>
<td>fst</td>
<td>fst</td>
<td>No</td>
</tr>
<tr class="odd">
<td>JSON</td>
<td>.json</td>
<td>jsonlite</td>
<td>jsonlite</td>
<td>No</td>
</tr>
<tr class="even">
<td>Matlab</td>
<td>.mat</td>
<td>rmatio</td>
<td>rmatio</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Hoja de cálculo OpenDocument</td>
<td>.ods</td>
<td>readODS</td>
<td>readODS</td>
<td>No</td>
</tr>
<tr class="even">
<td>Tablas HTML</td>
<td>.html</td>
<td>xml2</td>
<td>xml2</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Documentos XML</td>
<td>.xml</td>
<td>xml2</td>
<td>xml2</td>
<td>No</td>
</tr>
<tr class="even">
<td>YAML</td>
<td>.yml</td>
<td>yaml</td>
<td>yaml</td>
<td>No</td>
</tr>
<tr class="odd">
<td>Portapapeles por defecto es tsv</td>
<td></td>
<td>clipr</td>
<td>clipr</td>
<td>No</td>
</tr>
</tbody>
</table></div>
</div>
</div>



<div class="chapter-nav">
<div class="prev"><a href="r-projects.html"><span class="header-section-number">6</span> Proyectos en R</a></div>
<div class="next"><a href="cleaning-data-and-core-functions.html"><span class="header-section-number">8</span> Limpieza de datos y funciones básicas</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#import-and-export"><span class="header-section-number">7</span> Importación y exportación</a></li>
<li><a class="nav-link" href="#overview"><span class="header-section-number">7.1</span> Resumen</a></li>
<li><a class="nav-link" href="#the-rio-package"><span class="header-section-number">7.2</span> El paquete rio</a></li>
<li><a class="nav-link" href="#here"><span class="header-section-number">7.3</span> El paquete here</a></li>
<li>
<a class="nav-link" href="#file-paths"><span class="header-section-number">7.4</span> Rutas de los archivos</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#rutas-de-archivos-relativas">Rutas de archivos “relativas”</a></li>
<li><a class="nav-link" href="#rutas-absolutas">Rutas “absolutas”</a></li>
<li><a class="nav-link" href="#selecci%C3%B3n-manual">Selección manual</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#import-data"><span class="header-section-number">7.5</span> Importar datos</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#hojas-de-excel-espec%C3%ADficas">Hojas de Excel específicas</a></li>
<li><a class="nav-link" href="#import_missing">Valores faltantes</a></li>
<li><a class="nav-link" href="#saltar-filas">Saltar filas</a></li>
<li><a class="nav-link" href="#gestionar-una-segunda-fila-de-cabecera">Gestionar una segunda fila de cabecera</a></li>
<li><a class="nav-link" href="#hojas-de-google">Hojas de Google</a></li>
</ul>
</li>
<li><a class="nav-link" href="#multiple-files---import-export-split-combine"><span class="header-section-number">7.6</span> Múltiples archivos - importar, exportar, dividir, combinar</a></li>
<li>
<a class="nav-link" href="#import_github"><span class="header-section-number">7.7</span> Importar desde Github</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#csv-files">CSV files</a></li>
<li><a class="nav-link" href="#xlsx-files">XLSX files</a></li>
<li><a class="nav-link" href="#shapefiles">Shapefiles</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#manual-data-entry"><span class="header-section-number">7.8</span> Grabación manual de datos</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#entrada-por-filas">Entrada por filas</a></li>
<li><a class="nav-link" href="#entrada-por-columnas">Entrada por columnas</a></li>
<li><a class="nav-link" href="#pegar-desde-el-portapapeles">Pegar desde el portapapeles</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#import-most-recent-file"><span class="header-section-number">7.9</span> Importar el archivo más reciente</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#fechas-en-el-nombre-del-archivo">Fechas en el nombre del archivo</a></li>
<li><a class="nav-link" href="#utiliza-la-informaci%C3%B3n-del-archivo">Utiliza la información del archivo</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#import_api"><span class="header-section-number">7.10</span> APIs</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#petici%C3%B3n-http">Petición HTTP</a></li>
<li><a class="nav-link" href="#paquetes">Paquetes</a></li>
<li><a class="nav-link" href="#datos-de-acceso-p%C3%BAblico">Datos de acceso público</a></li>
<li><a class="nav-link" href="#se-requiere-autenticaci%C3%B3n">Se requiere autenticación</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#export"><span class="header-section-number">7.11</span> Exportar</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#con-el-paquete-rio">Con el paquete rio</a></li>
<li><a class="nav-link" href="#al-portapapeles">Al portapapeles</a></li>
</ul>
</li>
<li><a class="nav-link" href="#import_rds"><span class="header-section-number">7.12</span> Archivos RDS</a></li>
<li><a class="nav-link" href="#import_rdata"><span class="header-section-number">7.13</span> Archivos Rdata y listas de datos</a></li>
<li><a class="nav-link" href="#saving-plots"><span class="header-section-number">7.14</span> Guardar gráficos</a></li>
<li><a class="nav-link" href="#resources-1"><span class="header-section-number">7.15</span> Recursos</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>
</div>
  

  

</div>
 <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>EpiRhandbook en español</strong>" was written by El equipo del manual. It was last built on 2022-11-22.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
